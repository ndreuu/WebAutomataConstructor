{"version":3,"sources":["Logic/OutputAutomata.js","Logic/DFA.js","Logic/NFA.js","Logic/TM.js","Logic/DPDA.js","Logic/DMealy.js","Logic/DMoore.js","Logic/Computer.js","Logic/Stack.js","react-graph-vis-types.js","Components/ControlWrapper/ControlWrapper.tsx","Components/NodeControl/NodeControl.tsx","utils.tsx","hoc.tsx","Components/EdgeControl/EdgeControl.tsx","Components/RunControl/RunControl.tsx","SavesManager/BrowserSavesManager.ts","Api/apiBase.ts","Api/getSaves.ts","Api/save.ts","Api/getSave.ts","SavesManager/CloudSavesManager.ts","Components/WelcomePopout/WelcomePopout.tsx","Components/SavingPopout/SavingPopout.tsx","Components/Pages/LoginPage/GoogleOAuthButton/GoogleOAuthButton.tsx","Components/Pages/LoginPage/LoginPage.tsx","Components/Pages/PingPage/PingPage.tsx","Components/Pages/FailedLoginPage/FailedLoginPage.tsx","Components/AppHeader/AppHeader.tsx","Api/obtainAuth.ts","Components/Pages/SuccessLoginPage/SuccessLoginPage.tsx","VisNetwork.tsx","ErrorModal.tsx","App.tsx","index.tsx","Logic/IGraphTypes.js","Logic/Exceptions.js","Logic/PDA.js","Logic/EpsilonNFA.js","Logic/Mealy.js","Logic/Moore.js"],"names":["__extends","this","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__","constructor","prototype","create","__assign","assign","t","s","i","n","arguments","length","call","apply","exports","__esModule","OutputAutomata","_super","graph","startStatements","input","_this","restart","counterSteps","historiStep","curPosition","forEach","value","push","stmt","statements","get","id","oaRun","output","historiRun","counterStepsForResult","ref","after","_step","counter","history","isAdmit","haveAdmitting","nodes","toNodes","nextStepPosition","position","by","cellMatrix","idLogic","map","v","nextStepPositions","positions","nextPOs","reduce","acc","pos","po","outputs","undefined","Error","_a","trNum","alphabet","nextPositions","nodesOfCurPos","oaStep","setInput","console","log","key","matrix","value1","isDeterministic","ret","line","cells","fstCell","hasDublicates","stackDown","retNodes","temp","stack","getStorage","require","Computer","EpsilonNFA_1","Exceptions_1","DFA","startStatement","step","NonDeterministic","enfaStep","run","enfaRun","EpsilonNFA","NFA","haveEpsilon","IGraphTypes_1","PDA_1","TMMemory","storage","pointer","getPointer","reset","lookUp","initialize","init","mvRight","curr","upd","mvLeft","tmp_1","TM","mem","__step","tr","histori","move","Move","R","stackPush","L","assignCurMt","memory","mtTrun","mtStep","checkMemFormat","isMtMem","edges","transitions","value2","_b","curMt","newPos","PDA","DPDA","byEmpty","pdaStep","pdaRun","DMealy","Mealy","nfa","from","to","Set","title","DMoore","Moore","eof","EPS","BOTTOM","Map","byEmptyStackAdmt","isAdmt","nfaToDfa","minimizeDfa","mooreToMealy","mealyToMoore","getCurrNode","currentNode","sort","a","localValue","_loop_1","this_1","getAlphabetFromEdges","getStatementsFromNodes","createMatrix","alphabetSet","i_1","add","set","size","j","statementFrom","statementTo","letterId","stDwn","stPsh","mv","Stack","capacity","Infinity","item","pop","peek","list","cpyTo","ControlWrapper","props","visible","style","className","children","restProps","Paper","variant","Typography","React","Component","defaultProps","NodeControl","onLabelChange","event","node","changeNodeLabel","target","setState","label","onIsAdmitChanged","changeStateIsAdmit","checked","reinitComputer","onIsInitialChanged","changeStateIsInitial","isInitial","onDeleteClick","deleteNode","state","prevNodeId","prevProps","prevState","FormControl","TextField","onChange","FormControlLabel","control","Switch","Button","onClick","epsSubstStr","epsText","epsSubstStrs","values","join","mvStr","transitionsToLabel","frmt","maxLength","max","phs","Math","o","ttl","std","spc","epsSubst","epsSubsts","str","getTransitionsTitles","graphToElements","DataSet","edge","elementsToGraph","elements","computersInfo","dfa","name","description","preview","defaultGraph","x","y","isCurrent","pda","dpda","tm","mealy","dmealy","moore","dmoore","getCookie","parts","document","cookie","split","shift","withComputerType","ComputerTypeContext","Consumer","context","computerType","selectTransition","transition","activeTransition","changeTransitions","transitionsText","accumulator","filter","fth","tmp","fst","trd","bebra","reverse","snd","changeEdgeTransitions","deleteEdge","changeEditMode","editMode","updateTransitions","out","deleteTransition","delete","prevEdgeId","displayedTransitionText","countRules","rules","newRow","concat","multiline","rows","helperText","onBlur","historyEndRef","createRef","computerShouldBeUpdated","prev","current","some","index","isEqual","getComputer","initialNode","e","byEmptyStack","initializeComputer","warn","gElements","computer","result","onInputChanged","setResettedStatus","wasRuned","currentInputIndex","stepResult","changeStateIsCurrent","updMem","_nodes","nodeCore","find","startNode","scrollIntoView","behavior","setIsNonDetermenistic","error","it","toString","updateElements","setComputerType","admitByStack","curStbyEmp","setByEmptyStack","miniDFA","graphcore","start","NonMinimizable","setIsNonMinimizable","starts","includes","setInit","haveEmpty","setNfaToDfa","setMinimizeDfa","setMooreToMealy","setMealyToMoore","setChangerByStack","setRun","setStep","setReset","snapshot","char","color","Tooltip","border","BrowserSavesManager","saves","getSaves","Promise","resolve","saveMeta","save","type","localStorage","next_id","save_index","findIndex","user_id","saves_json","JSON","stringify","setItem","parse","getItem","BASE_URL","URL","getAuthHeaders","headers","Headers","getParams","method","onAuthFailed","reject","url","port","pathname","params","fetch","href","then","response","status","ok","statusText","json","catch","request","body","postParams","getSave","CloudSavesManager","serialized_save","apiSave","WelcomePopout","open","onClose","changeComputerType","browserSavesManager","cloudSavesManager","onCloudSaveOpenClicked","onBrowserSaveOpenClicked","updateCloudSavesMeta","setLoadingCloudSavesMeta","getSavesMeta","savesMeta","setCloudSavesMeta","updateBrowserSavesMeta","setBrowserSavesMeta","useState","cloudSavesMeta","browserSavesMeta","loadingCloudSavesMeta","useEffect","Dialog","maxWidth","fullWidth","DialogTitle","DialogContent","List","dense","ListSubheader","Skeleton","animation","height","ListItem","secondaryAction","ListItemText","entries","entry","primary","secondary","IconButton","SavingPopout","isLogin","updateNames","setLoadingSavesMeta","savesOrigin","setSavesMeta","setSavesOrigin","loadingSavesMeta","saveName","setSaveName","ToggleButtonGroup","orientation","exclusive","_","ToggleButton","disabled","disablePadding","ListItemButton","onSaveNameClicked","DialogActions","GoogleOAuthButton","characters","charactersLength","charAt","floor","random","getRandomString","auth_url","action","src","alt","aria-hidden","LoginPage","PingPage","pong","setPong","fetch_init","text","fetchPong","err","FailedLoginPage","AppHeader","onMenuButtonClicked","onSaveButtonClicked","onLogoutButtonClicked","useHistory","AppBar","Toolbar","obtainAuth","SuccessLoginPage","onAuthSuccess","updateAuth","VisNetwork","useRef","domNode","smooth","enabled","roundness","width","arrows","scaleFactor","manipulation","addEdge","edgeData","callback","alert","layout","improvedLayout","shapeProperties","interpolation","shape","font","labelHighlightBold","borderWidth","background","highlight","physics","options","contextMenu","setContextMenu","handleContextMenu","preventDefault","mouseX","clientX","mouseY","clientY","handleClose","addEventListener","network","ctrlKey","addEdgeMode","disableEditMode","useLayoutEffect","Network","data","window","on","onDoubleClick","onClick1","onClick2","onClick3","onClick4","refContainer","onContextMenu","Menu","anchorReference","anchorPosition","top","left","transform","bgcolor","boxShadow","NonDetermenisticModal","setOpen","isNonDetermenistic","Modal","aria-labelledby","aria-describedby","Box","sx","component","mt","NonMinimizableModal","isNonMinimizable","createContext","computerAction","controlAction","changerByStack","Ribbon","memRef","wasComputerResetted","ptr","abs","App","errIsNonDetermenistic","errIsNonMinimizable","lastNodeId","subscribeToShortcuts","openSavePopout","savePopoutOpen","closeSavePopout","openWelcomePopout","welcomePopoutOpen","closeWelcomePopout","login","logout","changePopout","popout","updateGraph","update","lableTokens","borderWidthSelected","ids","createNode","canvas","selectNode","nodesIDs","selectedNodes","selectedNode","deselectNode","remove","rmEdges","selectEdge","edgesIDs","selectedEdges","selectedEdge","deselectEdge","changeEdgeTransition","NFAContextMenu","DFAContextMenu","MealyContextMenu","MooreContextMenu","PDAContextMenu","AnotherContextMenu","ContextMenu","inEdgeMode","widthConstraint","heightConstraint","initiallyStabilized","path","Provider","f","ReactDOM","render","StrictMode","getElementById","Computer_1","Stack_1","lodash_1","admitByEmptyStack","newPosSet","updCurPos","epsStep","pPos","epsilonStep","rmRepeations","htable","epsId","letterStep","_nextStepPositions","ps","table","ImSet","startPos","head","has","afterEps","EPStack","flatted","_to","_edges","letter","getIter","delta","startId","_getJump","zero","first","second","statement","element","number","byEveryLetter","accLine","groups","group","cutBy","cell","createTableT","getJump","updateGroups","jmpGrp","newGrp","newNumber","toRm","splice","_updateGroups","toPositions","g","cycleEps","copyPushList","cpy","pushReverse","pushVals","pushTopToNewStack0","newStack","permute0","permutation","r","cloneDeep","_tmp","dwn","_detour","lvl","cur","permute","k","slice","c","fill","rmRepetitions","hash","curLId","stack0","visited","permutes","cycle","idx","newCycleStack","matchPushEpsVal","matchDownEpsVal","endsOfEpsWay","dfs","transformedInput","Queue","enqueue","dequeue","normalize","_v","getItter","myForEach","getNth","iter","outs","_nodesOuts","outIndex","nodesOuts","vs","curNodeOuts","mapNodes","mealyEdges","tmpTransitions","tmpTransiton"],"mappings":"sIACA,IAAIA,EAAaC,MAAQA,KAAKD,WAAe,WACzC,IAAIE,EAAgB,SAAUC,EAAGC,GAI7B,OAHAF,EAAgBG,OAAOC,gBAClB,CAAEC,UAAW,cAAgBC,OAAS,SAAUL,EAAGC,GAAKD,EAAEI,UAAYH,IACvE,SAAUD,EAAGC,GAAK,IAAK,IAAIK,KAAKL,EAAOA,EAAEM,eAAeD,KAAIN,EAAEM,GAAKL,EAAEK,MACpDN,EAAGC,IAE5B,OAAO,SAAUD,EAAGC,GAEhB,SAASO,IAAOV,KAAKW,YAAcT,EADnCD,EAAcC,EAAGC,GAEjBD,EAAEU,UAAkB,OAANT,EAAaC,OAAOS,OAAOV,IAAMO,EAAGE,UAAYT,EAAES,UAAW,IAAIF,IAV1C,GAazCI,EAAYd,MAAQA,KAAKc,UAAa,WAStC,OARAA,EAAWV,OAAOW,QAAU,SAASC,GACjC,IAAK,IAAIC,EAAGC,EAAI,EAAGC,EAAIC,UAAUC,OAAQH,EAAIC,EAAGD,IAE5C,IAAK,IAAIV,KADTS,EAAIG,UAAUF,GACOd,OAAOQ,UAAUH,eAAea,KAAKL,EAAGT,KACzDQ,EAAER,GAAKS,EAAET,IAEjB,OAAOQ,IAEKO,MAAMvB,KAAMoB,YAEhCI,EAAQC,YAAa,EACrB,IACIC,EAAgC,SAAUC,GAE1C,SAASD,EAAeE,EAAOC,EAAiBC,GAC5C,IAAIC,EAAQJ,EAAOL,KAAKtB,KAAM4B,EAAOC,IAAoB7B,KAsIzD,OAlHA+B,EAAMC,QAAU,WACZD,EAAME,aAAe,EACrBF,EAAMG,YAAc,GACpBH,EAAMI,YAAc,GACpBJ,EAAMF,gBAAgBO,SAAQ,SAAUC,GACpCN,EAAMI,YAAYG,KAAK,CACnBC,KAAMR,EAAMS,WAAWC,IAAIJ,EAAMK,UAI7CX,EAAMY,MAAQ,WAGV,IAAIC,EAFJb,EAAMc,WAAa,GACnBd,EAAMe,sBAAwB,EAE9B,IAAK,IAAI5B,EAAI,EAAGA,EAAIa,EAAMD,MAAMT,OAAQH,IAAK,CACzC,IAAI6B,EAAM,CACNd,aAAcF,EAAMe,sBACpBX,YAAaJ,EAAMI,YACnBD,YAAaH,EAAMc,YAEnBG,EAAQjB,EAAMkB,MAAMF,GACxBhB,EAAMe,sBAAwBC,EAAId,aAClCF,EAAMI,YAAcY,EAAIZ,YACxBJ,EAAMc,WAAaE,EAAIb,YACvBU,EAASI,EAAMJ,OAEnB,MAAO,CACHM,QAASnB,EAAMe,sBACfK,QAASpB,EAAMc,WACfO,QAASrB,EAAMsB,cAActB,EAAMI,aACnCmB,MAAOvB,EAAMwB,QAAQxB,EAAMI,aAC3BS,OAAQA,IAGhBb,EAAMyB,iBAAmB,SAAUC,EAAUC,GACzC,OAAO3B,EAAM4B,WAAWF,EAASlB,KAAKqB,QAASF,GAAIG,KAAI,SAAUC,GAAK,MAAQ,CAAEL,SAAU,CAAElB,KAAMuB,GAAKlB,OAAQkB,EAAElB,YAErHb,EAAMgC,kBAAoB,SAAUC,EAAWN,GAC3C,IAAIO,EAAUD,EAAUH,KAAI,SAAUC,GAAK,OAAO/B,EAAMyB,iBAAiBM,EAAGJ,MAc5E,MAAO,CAAEM,UAbIC,EAAQC,QAAO,SAAUC,EAAKC,GAEvC,OADAA,EAAIhC,SAAQ,SAAUiC,GAAM,OAAOF,EAAI7B,KAAK+B,EAAGZ,aACxCU,IACR,IAUyBG,QATfL,EAAQC,QAAO,SAAUC,EAAKC,GAOvC,OANAA,EAAIhC,SAAQ,SAAUiC,GAClB,QAAkBE,IAAdF,EAAGzB,OACH,MAAM,IAAI4B,MAAM,qBAEpBL,EAAI7B,KAAK+B,EAAGzB,WAETuB,IACR,MAGPpC,EAAMkB,MAAQ,SAAUF,GACpB,IAAI0B,EACAC,EAAQ3C,EAAM4C,SAASlC,IAA6C,QAAxCgC,EAAK1C,EAAMD,MAAMiB,EAAId,qBAAkC,IAAPwC,OAAgB,EAASA,EAAGpC,OACxGuC,EAAgB7C,EAAMgC,kBAAkBhB,EAAIZ,YAAauC,GAC7D3B,EAAIZ,YAAcyC,EAAcZ,UAChC,IAAIa,EAAgB9C,EAAMwB,QAAQR,EAAIZ,aAKtC,OAJAY,EAAIb,YAAYI,KAAK,CAAEgB,MAAOuB,EAAenB,GAAIgB,IAC7C3B,EAAIZ,YAAYd,OAAS,GACzB0B,EAAId,eAED,CACHiB,QAASH,EAAId,aACbkB,QAASJ,EAAIb,YACbkB,QAASrB,EAAMsB,cAAcN,EAAIZ,aACjCmB,MAAOuB,EACPjC,OAAQgC,EAAcN,UAG9BvC,EAAM+C,OAAS,WACX,IAAI/B,EAAM,CACNd,aAAcF,EAAME,aACpBE,YAAaJ,EAAMI,YACnBD,YAAaH,EAAMG,aAEnBc,EAAQjB,EAAMkB,MAAMF,GAIxB,OAHAhB,EAAME,aAAec,EAAId,aACzBF,EAAMI,YAAcY,EAAIZ,YACxBJ,EAAMG,YAAca,EAAIb,YACjB,CACHgB,QAASF,EAAME,QACfC,QAASH,EAAMG,QACfC,QAASJ,EAAMI,QACfE,MAAON,EAAMM,MACbV,OAAQI,EAAMJ,SAGtBb,EAAMgD,SAAW,SAAUjD,GACvBC,EAAMD,MAAQ,GACdA,EAAMM,SAAQ,SAAUC,GACpBN,EAAMD,MAAMQ,KAAK,CAAEsB,QAAS7B,EAAM4C,SAASlC,IAAIJ,GAAQA,MAAOA,OAElEN,EAAMC,WAEVD,EAAMI,YAAc,GACpBN,EAAgBO,SAAQ,SAAUC,GAC9BN,EAAMI,YAAYG,KAAK,CACnBC,KAAMR,EAAMS,WAAWC,IAAIJ,EAAMK,SAGzCX,EAAMgD,SAASjD,GACfC,EAAME,aAAe,EACrB+C,QAAQC,IAAI,UACZlD,EAAM4C,SAASvC,SAAQ,SAAUC,EAAO6C,GAAO,OAAOF,QAAQC,IAAI5C,EAAO6C,MACzEF,QAAQC,IAAI,SACZlD,EAAMS,WAAWJ,SAAQ,SAAUC,GAAS,OAAO2C,QAAQC,IAAI5C,MAC/D2C,QAAQC,IAAIlD,EAAMI,aAClBJ,EAAMoD,OAAO/C,SAAQ,SAAUC,GAC3B2C,QAAQC,MACR5C,EAAMD,SAAQ,SAAUgD,GAAU,OAAOJ,QAAQC,IAAIG,SAElDrD,EAyBX,OAjKAhC,EAAU2B,EAAgBC,GA0I1BD,EAAed,UAAUyE,gBAAkB,WACvC,IAAIC,GAAM,EAQV,OAPAtF,KAAKmF,OAAO/C,SAAQ,SAAUmD,GAAQ,OAAOA,EAAKnD,SAAQ,SAAUoD,GAChE,IAAIC,EAAUD,EAAM,GAChBE,EAAgBF,EAAMtB,QAAO,SAAUC,EAAK5B,GAAQ,OAAO4B,GAAQ5B,EAAKoD,YAAcF,EAAQE,aAAe,GAC7GH,EAAMnE,OAAS,GAAKqE,IACpBJ,GAAM,SAGPA,GAEX5D,EAAed,UAAU2C,QAAU,SAAUS,GACzC,IAAIjC,EAAQ/B,KACR4F,EAAW,GAKf,OAJA5B,EAAU5B,SAAQ,SAAUC,GACxB,IAAIwD,EAAO/E,EAASA,EAAS,GAAIiB,EAAMuB,MAAMjB,EAAME,KAAKqB,UAAW,CAAEkC,WAAuBvB,IAAhBlC,EAAMyD,WAAsBvB,EAAYlC,EAAMyD,MAAMC,eAChIH,EAAStD,KAAKuD,MAEXD,GAEXlE,EAAed,UAAUyC,cAAgB,SAAUW,GAC/C,OAAOA,EAAUE,QAAO,SAAUC,EAAK3D,GAAK,OAAO2D,GAAO3D,EAAE+B,KAAKa,WAAY,IAE1E1B,EAlKyB,CADnBsE,EAAQ,IAoKZC,UACbzE,EAAQE,eAAiBA,G,iCC9LzB,IAAI3B,EAAaC,MAAQA,KAAKD,WAAe,WACzC,IAAIE,EAAgB,SAAUC,EAAGC,GAI7B,OAHAF,EAAgBG,OAAOC,gBAClB,CAAEC,UAAW,cAAgBC,OAAS,SAAUL,EAAGC,GAAKD,EAAEI,UAAYH,IACvE,SAAUD,EAAGC,GAAK,IAAK,IAAIK,KAAKL,EAAOA,EAAEM,eAAeD,KAAIN,EAAEM,GAAKL,EAAEK,MACpDN,EAAGC,IAE5B,OAAO,SAAUD,EAAGC,GAEhB,SAASO,IAAOV,KAAKW,YAAcT,EADnCD,EAAcC,EAAGC,GAEjBD,EAAEU,UAAkB,OAANT,EAAaC,OAAOS,OAAOV,IAAMO,EAAGE,UAAYT,EAAES,UAAW,IAAIF,IAV1C,GAa7Cc,EAAQC,YAAa,EACrB,IAAIyE,EAAeF,EAAQ,IACvBG,EAAeH,EAAQ,IACvBI,EAAqB,SAAUzE,GAE/B,SAASyE,EAAIxE,EAAOyE,EAAgBvE,GAChC,IAAIC,EAAQJ,EAAOL,KAAKtB,KAAM4B,EAAOyE,EAAgBvE,IAAU9B,KAc/D,OAbA+B,EAAMuE,KAAO,WACT,IAAK3E,EAAOf,UAAUyE,gBAAgB/D,KAAKS,GACvC,MAAM,IAAIoE,EAAaI,iBAE3B,OAAOxE,EAAMyE,YAEjBzE,EAAM0E,IAAM,WACR,IAAK9E,EAAOf,UAAUyE,gBAAgB/D,KAAKS,GACvC,MAAM,IAAIoE,EAAaI,iBAE3B,OAAOxE,EAAM2E,WAEjB3E,EAAMgD,SAASjD,GACRC,EAEX,OAlBAhC,EAAUqG,EAAKzE,GAkBRyE,EAnBc,CAoBvBF,EAAaS,YACfnF,EAAQ4E,IAAMA,G,iCCrCd,IAAIrG,EAAaC,MAAQA,KAAKD,WAAe,WACzC,IAAIE,EAAgB,SAAUC,EAAGC,GAI7B,OAHAF,EAAgBG,OAAOC,gBAClB,CAAEC,UAAW,cAAgBC,OAAS,SAAUL,EAAGC,GAAKD,EAAEI,UAAYH,IACvE,SAAUD,EAAGC,GAAK,IAAK,IAAIK,KAAKL,EAAOA,EAAEM,eAAeD,KAAIN,EAAEM,GAAKL,EAAEK,MACpDN,EAAGC,IAE5B,OAAO,SAAUD,EAAGC,GAEhB,SAASO,IAAOV,KAAKW,YAAcT,EADnCD,EAAcC,EAAGC,GAEjBD,EAAEU,UAAkB,OAANT,EAAaC,OAAOS,OAAOV,IAAMO,EAAGE,UAAYT,EAAES,UAAW,IAAIF,IAV1C,GAa7Cc,EAAQC,YAAa,EACrB,IACImF,EAAqB,SAAUjF,GAE/B,SAASiF,EAAIhF,EAAOyE,EAAgBvE,GAChC,IAAIC,EAAQJ,EAAOL,KAAKtB,KAAM4B,EAAOyE,EAAgBvE,IAAU9B,KAC/D,GAAI+B,EAAM8E,cACN,MAAM,IAAIrC,MAAM,uBAEpB,OAAOzC,EAEX,OARAhC,EAAU6G,EAAKjF,GAQRiF,EATc,CADNZ,EAAQ,IAWZW,YACfnF,EAAQoF,IAAMA,G,iCC1Bd,IAAI7G,EAAaC,MAAQA,KAAKD,WAAe,WACzC,IAAIE,EAAgB,SAAUC,EAAGC,GAI7B,OAHAF,EAAgBG,OAAOC,gBAClB,CAAEC,UAAW,cAAgBC,OAAS,SAAUL,EAAGC,GAAKD,EAAEI,UAAYH,IACvE,SAAUD,EAAGC,GAAK,IAAK,IAAIK,KAAKL,EAAOA,EAAEM,eAAeD,KAAIN,EAAEM,GAAKL,EAAEK,MACpDN,EAAGC,IAE5B,OAAO,SAAUD,EAAGC,GAEhB,SAASO,IAAOV,KAAKW,YAAcT,EADnCD,EAAcC,EAAGC,GAEjBD,EAAEU,UAAkB,OAANT,EAAaC,OAAOS,OAAOV,IAAMO,EAAGE,UAAYT,EAAES,UAAW,IAAIF,IAV1C,GAazCI,EAAYd,MAAQA,KAAKc,UAAa,WAStC,OARAA,EAAWV,OAAOW,QAAU,SAASC,GACjC,IAAK,IAAIC,EAAGC,EAAI,EAAGC,EAAIC,UAAUC,OAAQH,EAAIC,EAAGD,IAE5C,IAAK,IAAIV,KADTS,EAAIG,UAAUF,GACOd,OAAOQ,UAAUH,eAAea,KAAKL,EAAGT,KACzDQ,EAAER,GAAKS,EAAET,IAEjB,OAAOQ,IAEKO,MAAMvB,KAAMoB,YAEhCI,EAAQC,YAAa,EACrB,IAAIqF,EAAgBd,EAAQ,IACxBe,EAAQf,EAAQ,IAChBG,EAAeH,EAAQ,IACvBgB,EAA0B,WAC1B,SAASA,IACLhH,KAAKiH,QAAU,CAAC,KAChBjH,KAAKkH,QAAU,EA8CnB,OA5CAF,EAASpG,UAAUuG,WAAa,WAC5B,OAAOnH,KAAKkH,SAEhBF,EAASpG,UAAUwG,MAAQ,WACvBpH,KAAKiH,QAAU,CAAC,KAChBjH,KAAKkH,QAAU,GAEnBF,EAASpG,UAAUyG,OAAS,WACxB,OAAOrH,KAAKiH,QAAQjH,KAAKkH,UAE7BF,EAASpG,UAAU0G,WAAa,SAAUC,GACtC,IAAIxF,EAAQ/B,KACZuH,EAAKnF,SAAQ,SAAUC,GAAS,OAAON,EAAMyF,QAAQ,IAAKnF,MAC1DrC,KAAKkH,QAAU,GAEnBF,EAASpG,UAAU4G,QAAU,SAAUC,EAAMC,GACrC1H,KAAKiH,QAAQjH,KAAKkH,WAAaO,IAC/BzH,KAAKiH,QAAQjH,KAAKkH,SAAWQ,EAC7B1H,KAAKkH,WAELlH,KAAKkH,UAAYlH,KAAKiH,QAAQ5F,QAC9BrB,KAAKiH,QAAQ3E,KAAK,MAG1B0E,EAASpG,UAAU+G,OAAS,SAAUF,EAAMC,GACxC,GAAqB,IAAjB1H,KAAKkH,QAAe,CAChBlH,KAAKiH,QAAQjH,KAAKkH,WAAaO,IAC/BzH,KAAKiH,QAAQjH,KAAKkH,SAAWQ,EAC7B1H,KAAKkH,QAAU,GAEnB,IAAIU,EAAQ,CAAC,KACb5H,KAAKiH,QAAQ7E,SAAQ,SAAUC,GAAS,OAAOuF,EAAMtF,KAAKD,MAC1DrC,KAAKiH,QAAUW,OAGX5H,KAAKiH,QAAQjH,KAAKkH,WAAaO,IAC/BzH,KAAKiH,QAAQjH,KAAKkH,SAAWQ,EAC7B1H,KAAKkH,YAIjBF,EAASpG,UAAUmF,WAAa,WAC5B,OAAO/F,KAAKiH,SAETD,EAjDmB,GAmD9BxF,EAAQwF,SAAWA,EACnB,IAAIa,EAAoB,SAAUlG,GAE9B,SAASkG,EAAGjG,EAAOyE,EAAgBvE,GAC/B,IAAIC,EAAQJ,EAAOL,KAAKtB,KAAM4B,EAAOyE,EAAgBvE,IAAU9B,KA0F/D,OAzFA+B,EAAM+F,IAAM,IAAId,EAChBjF,EAAMgG,OAAS,SAAU7E,EAAS8E,EAAIC,GAClC,IAAIvE,EAAK,GAsBT,OArBA3B,EAAM4B,WAAW5B,EAAMI,YAAY,GAAGI,KAAKqB,QAASoE,GAAI5F,SAAQ,SAAUC,GAClEA,EAAMsD,YAAc5D,EAAM+F,IAAIT,WAC1BhF,EAAM6F,OAASpB,EAAcqB,KAAKC,IAClCrG,EAAM+F,IAAIN,QAAQnF,EAAMsD,UAAWtD,EAAMgG,UAAU,IACnD3E,EAAKrB,EAAMsD,WAEXtD,EAAM6F,OAASpB,EAAcqB,KAAKG,IAClCvG,EAAM+F,IAAIH,OAAOtF,EAAMsD,UAAWtD,EAAMgG,UAAU,IAClD3E,EAAKrB,EAAMsD,WAEf5D,EAAMwG,YAAY,CAAEhG,KAAMR,EAAMS,WAAWC,IAAIJ,EAAMK,UAG7DuF,EAAQ3F,KAAK,CACTgB,MAAO,CAACvB,EAAMuB,MAAMvB,EAAMI,YAAY,GAAGI,KAAKqB,UAC9CF,GAAIA,IAGRsB,QAAQC,IAAI,yBACZD,QAAQC,IAAIlD,EAAM+F,IAAI/B,cACtB7C,IACO,CACHI,MAAO,CAACvB,EAAMuB,MAAMvB,EAAMI,YAAY,GAAGI,KAAKqB,UAC9CR,QAASrB,EAAMI,YAAY,GAAGI,KAAKa,QACnCF,QAASA,EACTC,QAAS8E,EACTO,OAAQzG,EAAM+F,IAAI/B,aAClBmB,QAASnF,EAAM+F,IAAIX,eAG3BpF,EAAMC,QAAU,WACZD,EAAME,aAAe,EACrBF,EAAMG,YAAc,GACpBH,EAAMI,YAAc,GACpBJ,EAAM+F,IAAIV,QACVrF,EAAMI,YAAc,CAAC,CACbI,KAAMR,EAAMS,WAAWC,IAAIV,EAAMF,gBAAgB,GAAGa,OAGhEX,EAAM0G,OAAS,WACX,MAAMjE,MAAM,WAEhBzC,EAAMgD,SAAW,SAAUjD,GACvBC,EAAMD,MAAQ,GAEdC,EAAM+F,IAAIV,QACVrF,EAAM+F,IAAIR,WAAWxF,GACrBC,EAAME,aAAe,EACrBF,EAAMG,YAAc,GACpBH,EAAMI,YAAc,GACpBJ,EAAMI,YAAc,CAAC,CACbI,KAAMR,EAAMS,WAAWC,IAAIV,EAAMF,gBAAgB,GAAGa,MAE5DsC,QAAQC,IAAIlD,EAAMI,cAEtBJ,EAAM2G,OAAS,WACX1D,QAAQC,IAAI,SACZ,IAAIK,EAAMvD,EAAMgG,OAAOhG,EAAME,aAAc,EAAGF,EAAMG,aAMpD,OALAH,EAAME,aAAeqD,EAAIpC,QACzBnB,EAAMG,YAAcoD,EAAInC,QACuB,KAA3CmC,EAAInC,QAAQmC,EAAInC,QAAQ9B,OAAS,GAAGqC,KACpC4B,EAAIhC,MAAQ,IAETxC,EAASA,EAAS,GAAIwE,GAAM,CAAEkD,OAAQzG,EAAM+F,IAAI/B,gBAE3DhE,EAAMuE,KAAO,WACT,IAAK3E,EAAOf,UAAUyE,gBAAgB/D,KAAKS,GACvC,MAAM,IAAIoE,EAAaI,iBAE3B,OAAOxE,EAAM2G,UAEjB3G,EAAM0E,IAAM,WACR,IAAK9E,EAAOf,UAAUyE,gBAAgB/D,KAAKS,GACvC,MAAM,IAAIoE,EAAaI,iBAE3B,OAAOxE,EAAM0G,UAEjB1G,EAAM4G,eAAe/G,GAIrBG,EAAM+F,IAAIR,WAAWxF,GACrBC,EAAMI,YAAc,CAAC,CACbI,KAAMR,EAAMS,WAAWC,IAAIV,EAAMF,gBAAgB,GAAGa,MAE5DsC,QAAQC,IAAI,gCACLlD,EAsBX,OAlHAhC,EAAU8H,EAAIlG,GA8FdkG,EAAGjH,UAAU+H,eAAiB,SAAU/G,GACpC,IAAIgH,GAAU,EASd,GARAhH,EAAMiH,MAAMzG,SAAQ,SAAUC,GAAS,OAAOA,EAAMyG,YAAY1G,SAAQ,SAAUgD,GAC9EA,EAAOhD,SAAQ,SAAU2G,GACrB,IAAItE,EAAIuE,GACyB,QAA3BvE,EAAKsE,EAAOV,iBAA8B,IAAP5D,OAAgB,EAASA,EAAGpD,UAAwC,QAA3B2H,EAAKD,EAAOV,iBAA8B,IAAPW,OAAgB,EAASA,EAAG3H,QAAU,IACvJuH,GAAU,aAIjBA,EACD,MAAMpE,MAAM,eAGpBqD,EAAGjH,UAAUqI,MAAQ,WACjB,OAAOjJ,KAAKmC,YAAY,IAE5B0F,EAAGjH,UAAU2H,YAAc,SAAUW,GACjClJ,KAAKmC,YAAY,GAAK+G,GAEnBrB,EAnHa,CAoHtBd,EAAMoC,KACR3H,EAAQqG,GAAKA,G,iCCrMb,IAAI9H,EAAaC,MAAQA,KAAKD,WAAe,WACzC,IAAIE,EAAgB,SAAUC,EAAGC,GAI7B,OAHAF,EAAgBG,OAAOC,gBAClB,CAAEC,UAAW,cAAgBC,OAAS,SAAUL,EAAGC,GAAKD,EAAEI,UAAYH,IACvE,SAAUD,EAAGC,GAAK,IAAK,IAAIK,KAAKL,EAAOA,EAAEM,eAAeD,KAAIN,EAAEM,GAAKL,EAAEK,MACpDN,EAAGC,IAE5B,OAAO,SAAUD,EAAGC,GAEhB,SAASO,IAAOV,KAAKW,YAAcT,EADnCD,EAAcC,EAAGC,GAEjBD,EAAEU,UAAkB,OAANT,EAAaC,OAAOS,OAAOV,IAAMO,EAAGE,UAAYT,EAAES,UAAW,IAAIF,IAV1C,GAa7Cc,EAAQC,YAAa,EACrB,IAAIsF,EAAQf,EAAQ,IAChBG,EAAeH,EAAQ,IACvBoD,EAAsB,SAAUzH,GAEhC,SAASyH,EAAKxH,EAAOyE,EAAgBvE,EAAOuH,GACxC,IAAItH,EAAQJ,EAAOL,KAAKtB,KAAM4B,EAAOyE,EAAgBvE,EAAOuH,IAAYrJ,KAgBxE,OAbA+B,EAAMuE,KAAO,WACT,IAAK3E,EAAOf,UAAUyE,gBAAgB/D,KAAKS,GACvC,MAAM,IAAIoE,EAAaI,iBAE3B,OAAOxE,EAAMuH,WAEjBvH,EAAM0E,IAAM,WACR,IAAK9E,EAAOf,UAAUyE,gBAAgB/D,KAAKS,GACvC,MAAM,IAAIoE,EAAaI,iBAE3B,OAAOxE,EAAMwH,UAEjBxH,EAAMgD,SAASjD,GACRC,EAKX,OAvBAhC,EAAUqJ,EAAMzH,GAuBTyH,EAxBe,CAyBxBrC,EAAMoC,KACR3H,EAAQ4H,KAAOA,G,iCC1Cf,IAAIrJ,EAAaC,MAAQA,KAAKD,WAAe,WACzC,IAAIE,EAAgB,SAAUC,EAAGC,GAI7B,OAHAF,EAAgBG,OAAOC,gBAClB,CAAEC,UAAW,cAAgBC,OAAS,SAAUL,EAAGC,GAAKD,EAAEI,UAAYH,IACvE,SAAUD,EAAGC,GAAK,IAAK,IAAIK,KAAKL,EAAOA,EAAEM,eAAeD,KAAIN,EAAEM,GAAKL,EAAEK,MACpDN,EAAGC,IAE5B,OAAO,SAAUD,EAAGC,GAEhB,SAASO,IAAOV,KAAKW,YAAcT,EADnCD,EAAcC,EAAGC,GAEjBD,EAAEU,UAAkB,OAANT,EAAaC,OAAOS,OAAOV,IAAMO,EAAGE,UAAYT,EAAES,UAAW,IAAIF,IAV1C,GAa7Cc,EAAQC,YAAa,EACrB,IAAI0E,EAAeH,EAAQ,IAEvBwD,EAAwB,SAAU7H,GAElC,SAAS6H,EAAO5H,EAAOC,EAAiBC,GACpC,IAAIC,EAAQJ,EAAOL,KAAKtB,KAAM4B,EAAOC,EAAiBC,IAAU9B,KAahE,OAZA+B,EAAMuE,KAAO,WACT,IAAK3E,EAAOf,UAAUyE,gBAAgB/D,KAAKS,GACvC,MAAM,IAAIoE,EAAaI,iBAE3B,OAAOxE,EAAMY,SAEjBZ,EAAM0E,IAAM,WACR,IAAK9E,EAAOf,UAAUyE,gBAAgB/D,KAAKS,GACvC,MAAM,IAAIoE,EAAaI,iBAE3B,OAAOxE,EAAMY,SAEVZ,EAEX,OAjBAhC,EAAUyJ,EAAQ7H,GAiBX6H,EAlBiB,CADdxD,EAAQ,IAoBZyD,OACVjI,EAAQgI,OAASA,EACjB,IAAIE,EAAM,IAAIF,EAAO,CACjBlG,MAAO,CACH,CAAEZ,GAAI,EAAGU,SAAS,GAClB,CAAEV,GAAI,EAAGU,SAAS,IAEtByF,MAAO,CACH,CAAEc,KAAM,EAAGC,GAAI,EAAGd,YAAa,IAAIe,IAAI,CAAC,CAAC,CAAEC,MAAO,IAAKlH,OAAQ,SAC/D,CAAE+G,KAAM,EAAGC,GAAI,EAAGd,YAAa,IAAIe,IAAI,CAAC,CAAC,CAAEC,MAAO,IAAKlH,OAAQ,WAEpE,CAAC,CAAEF,GAAI,EAAGU,SAAS,IAAU,IAChC4B,QAAQC,IAAIyE,EAAIrE,oB,iCC/ChB,IAAItF,EAAaC,MAAQA,KAAKD,WAAe,WACzC,IAAIE,EAAgB,SAAUC,EAAGC,GAI7B,OAHAF,EAAgBG,OAAOC,gBAClB,CAAEC,UAAW,cAAgBC,OAAS,SAAUL,EAAGC,GAAKD,EAAEI,UAAYH,IACvE,SAAUD,EAAGC,GAAK,IAAK,IAAIK,KAAKL,EAAOA,EAAEM,eAAeD,KAAIN,EAAEM,GAAKL,EAAEK,MACpDN,EAAGC,IAE5B,OAAO,SAAUD,EAAGC,GAEhB,SAASO,IAAOV,KAAKW,YAAcT,EADnCD,EAAcC,EAAGC,GAEjBD,EAAEU,UAAkB,OAANT,EAAaC,OAAOS,OAAOV,IAAMO,EAAGE,UAAYT,EAAES,UAAW,IAAIF,IAV1C,GAa7Cc,EAAQC,YAAa,EACrB,IAAI0E,EAAeH,EAAQ,IAEvB+D,EAAwB,SAAUpI,GAElC,SAASoI,EAAOnI,EAAOC,EAAiBC,GACpC,IAAIC,EAAQJ,EAAOL,KAAKtB,KAAM4B,EAAOC,EAAiBC,IAAU9B,KAahE,OAZA+B,EAAMuE,KAAO,WACT,IAAK3E,EAAOf,UAAUyE,gBAAgB/D,KAAKS,GACvC,MAAM,IAAIoE,EAAaI,iBAE3B,OAAOxE,EAAMY,SAEjBZ,EAAM0E,IAAM,WACR,IAAK9E,EAAOf,UAAUyE,gBAAgB/D,KAAKS,GACvC,MAAM,IAAIoE,EAAaI,iBAE3B,OAAOxE,EAAMY,SAEVZ,EAEX,OAjBAhC,EAAUgK,EAAQpI,GAiBXoI,EAlBiB,CADd/D,EAAQ,IAoBZgE,OACVxI,EAAQuI,OAASA,EACjB,IAAIL,EAAM,IAAIK,EAAO,CACjBzG,MAAO,CACH,CAAEZ,GAAI,EAAGU,SAAS,GAClB,CAAEV,GAAI,EAAGU,SAAS,GAClB,CAAEV,GAAI,EAAGU,SAAS,IAEtByF,MAAO,CACH,CAAEc,KAAM,EAAGC,GAAI,EAAGd,YAAa,IAAIe,IAAI,CAAC,CAAC,CAAEC,MAAO,SAClD,CAAEH,KAAM,EAAGC,GAAI,EAAGd,YAAa,IAAIe,IAAI,CAAC,CAAC,CAAEC,MAAO,WAEvD,CAAC,CAAEpH,GAAI,EAAGU,SAAS,IAAU,IAChC4B,QAAQC,IAAIyE,EAAIrE,oB,sEChDhB,IAAIvE,EAAYd,MAAQA,KAAKc,UAAa,WAStC,OARAA,EAAWV,OAAOW,QAAU,SAASC,GACjC,IAAK,IAAIC,EAAGC,EAAI,EAAGC,EAAIC,UAAUC,OAAQH,EAAIC,EAAGD,IAE5C,IAAK,IAAIV,KADTS,EAAIG,UAAUF,GACOd,OAAOQ,UAAUH,eAAea,KAAKL,EAAGT,KACzDQ,EAAER,GAAKS,EAAET,IAEjB,OAAOQ,IAEKO,MAAMvB,KAAMoB,YAEhCI,EAAQC,YAAa,EACrBD,EAAQyI,IAAM,CAAE7G,SAAS,EAAOQ,SAAU,EAAGlB,IAAK,GAClDlB,EAAQ0I,IAAM,UACd1I,EAAQ2I,OAAS,KACjB,IAAIlE,EAA0B,WAC1B,SAASA,EAASrE,EAAOC,GAErB,IAAIE,EAAQ/B,KACZA,KAAK8B,MAAQ,GACb9B,KAAK2E,SAAW,IAAIyF,IACpBpK,KAAKwC,WAAa,IAAI4H,IACtBpK,KAAK6B,gBAAkB,GACvB7B,KAAK6I,MAAQ,GACb7I,KAAKiC,aAAe,EACpBjC,KAAK8C,sBAAwB,EAC7B9C,KAAKkC,YAAc,GACnBlC,KAAK6C,WAAa,GAClB7C,KAAKmF,OAAS,GACdnF,KAAKqK,iBAAmB,SAAUC,GAC9B,MAAM,IAAI9F,MAAM,kBAEpBxE,KAAKuK,SAAW,WACZ,MAAM,IAAI/F,MAAM,mBAEpBxE,KAAKwK,YAAc,WACf,MAAM,IAAIhG,MAAM,mBAEpBxE,KAAKyK,aAAe,WAChB,MAAM,IAAIjG,MAAM,oBAEpBxE,KAAK0K,aAAe,WAChB,MAAM,IAAIlG,MAAM,oBAEpBxE,KAAK2K,YAAc,WACf,OAAO5I,EAAM6I,YAAYlI,IAE7Bd,EAAMiH,MACDgC,MAAK,SAAUC,EAAG3K,GAAK,OAAO2K,EAAEnB,KAAOxJ,EAAEwJ,QACzCvH,SAAQ,SAAUC,GAAS,OAAON,EAAM8G,MAAMvG,KAAK,CACpDwG,iBAAmCvE,IAAtBlC,EAAMyG,YAA4B,IAAIe,IAAI,CAAC,CAAC,CAAEC,MAAO,OAAUzH,EAAMyG,YAClFa,KAAMtH,EAAMsH,KACZC,GAAIvH,EAAMuH,GACVmB,WAAY,QAWhB,IATA,IAAIC,EAAU,SAAU9J,GACpB+J,EAAOpC,MAAM3H,GAAG6J,WAAa,GAC7BE,EAAOpC,MAAM3H,GAAG4H,YAAY1G,SAAQ,SAAUC,GAC1C,OAAOA,EAAMD,SAAQ,SAAUgD,GAAU,OAAOrD,EAAM8G,MAAM3H,GAAG6J,WAAWzI,KAAK8C,UAKnF6F,EAASjL,KACJkB,EAAI,EAAGA,EAAIlB,KAAK6I,MAAMxH,OAAQH,IACnC8J,EAAQ9J,GAEZlB,KAAKkL,uBACLlL,KAAKmL,uBAAuBvJ,EAAM0B,OAClCtD,KAAK6B,gBAAkBA,EACvB7B,KAAK4K,YAAc/I,EAAgB,GACnC7B,KAAKsD,MAAQ1B,EAAM0B,MACnBtD,KAAKoL,eAyET,OAvEAnF,EAASrF,UAAUsK,qBAAuB,WAGtC,IAFA,IAAInJ,EAAQ/B,KACRqL,EAAc,IAAIxB,IACbyB,EAAM,EAAGA,EAAMtL,KAAK6I,MAAMxH,OAAQiK,IACvCtL,KAAK6I,MAAMyC,GAAKP,WAAW3I,SAAQ,SAAUC,GACrB,KAAhBA,EAAMyH,OACNuB,EAAYE,IAAIlJ,EAAMyH,UAIlC,IAAI5I,EAAI,EACRmK,EAAYjJ,SAAQ,SAAUC,GACZ,KAAVA,IACAN,EAAM4C,SAAS6G,IAAInJ,EAAOnB,GAC1BA,SAIZ+E,EAASrF,UAAUuK,uBAAyB,SAAU7H,GAClD,IAAK,IAAIpC,EAAI,EAAGA,EAAIoC,EAAMjC,OAAQH,IAC9BlB,KAAKwC,WAAWgJ,IAAIlI,EAAMpC,GAAGwB,GAAI,CAC7BA,GAAIY,EAAMpC,GAAGwB,GACbU,QAASE,EAAMpC,GAAGkC,QAClBQ,QAAS1C,EACT0B,OAAQU,EAAMpC,GAAG0B,UAI7BqD,EAASrF,UAAUwK,aAAe,WAC9B,IAAK,IAAIlK,EAAI,EAAGA,EAAIlB,KAAKwC,WAAWiJ,KAAMvK,IAAK,CAC3ClB,KAAKmF,OAAOjE,GAAK,GACjB,IAAK,IAAIwK,EAAI,EAAGA,EAAI1L,KAAK2E,SAAS8G,KAAMC,IACpC1L,KAAKmF,OAAOjE,GAAGwK,GAAK,GAI5B,IAASxK,EAAI,EAAGA,EAAIlB,KAAK6I,MAAMxH,OAAQH,IACnC,KAAIyK,EAAgB3L,KAAKwC,WAAWC,IAAIzC,KAAK6I,MAAM3H,GAAGyI,MAClDiC,EAAc5L,KAAKwC,WAAWC,IAAIzC,KAAK6I,MAAM3H,GAAG0I,IACpD,IAAS8B,EAAI,EAAGA,EAAI1L,KAAK6I,MAAM3H,GAAG6J,WAAW1J,OAAQqK,IAAK,CACtD,IAAIG,EAAW7L,KAAK2E,SAASlC,IAAIzC,KAAK6I,MAAM3H,GAAG6J,WAAWW,GAAG5B,OAI7D,QAAiBvF,IAAbsH,EAAJ,CAGA7G,QAAQC,IAAI4G,GACZ7G,QAAQC,IAAIjF,KAAK6I,MAAM3H,GAAG6J,WAAWW,GAAG5B,OACxC,IAAIgC,EAAQ9L,KAAK6I,MAAM3H,GAAG6J,WAAWW,GAAG/F,UACpCoG,EAAQ/L,KAAK6I,MAAM3H,GAAG6J,WAAWW,GAAGrD,UACpC2D,EAAKhM,KAAK6I,MAAM3H,GAAG6J,WAAWW,GAAGxD,KACjCtF,OAAgD2B,IAAvCvE,KAAK6I,MAAM3H,GAAG6J,WAAWW,GAAG9I,OAAuBgJ,EAAYhJ,OAAS5C,KAAK6I,MAAM3H,GAAG6J,WAAWW,GAAG9I,YACnG2B,IAAVuH,QAAiCvH,IAAVwH,GAAiC,KAAVD,GAAiC,IAAjBC,EAAM1K,SACpEyK,EAAQtK,EAAQ0I,IAChB6B,EAAQ,CAACvK,EAAQ0I,MAGrBlK,KAAKmF,OAAOwG,EAAc/H,SAASiI,GAAUvJ,KAAKxB,EAASA,EAAS,GAAI8K,GAAc,CAAEjG,UAAWmG,EAAOzD,UAAW0D,EAAO7D,KAAM8D,EAAIpJ,OAAQA,OAGtJ5C,KAAK2E,SAASvC,SAAQ,SAAUC,EAAO6C,GAAO,OAAOF,QAAQC,IAAI5C,EAAO,IAAK6C,MAC7ElF,KAAKwC,WAAWJ,SAAQ,SAAUC,GAAS,OAAO2C,QAAQC,IAAI5C,MAC9DrC,KAAKmF,OAAO/C,SAAQ,SAAUC,GAC1B2C,QAAQC,MACR5C,EAAMD,SAAQ,SAAUgD,GAAU,OAAOJ,QAAQC,IAAIG,UAG7Da,EAASrF,UAAU+C,WAAa,SAAUzC,EAAGwK,GACzC,OAAO1L,KAAKmF,OAAOjE,GAAGwK,IAEnBzF,EAlImB,GAoI9BzE,EAAQyE,SAAWA,G,yHCnJnBzE,EAAQC,YAAa,EACrB,IAAIwK,EAAuB,WACvB,SAASA,EAAMC,QACM,IAAbA,IAAuBA,EAAWC,KACtCnM,KAAKkM,SAAWA,EAChBlM,KAAKiH,QAAU,GA0BnB,OAxBAgF,EAAMrL,UAAU0B,KAAO,SAAU8J,GAC7B,GAAIpM,KAAKyL,SAAWzL,KAAKkM,SACrB,MAAM1H,MAAM,6DAEhBxE,KAAKiH,QAAQ3E,KAAK8J,IAEtBH,EAAMrL,UAAUyL,IAAM,WAClB,OAAOrM,KAAKiH,QAAQoF,OAExBJ,EAAMrL,UAAU0L,KAAO,WACnB,OAAOtM,KAAKiH,QAAQjH,KAAKyL,OAAS,IAEtCQ,EAAMrL,UAAU6K,KAAO,WACnB,OAAOzL,KAAKiH,QAAQ5F,QAExB4K,EAAMrL,UAAUmF,WAAa,WACzB,IAAIwG,EAAO,GAEX,OADAvM,KAAKiH,QAAQ7E,SAAQ,SAAUC,GAAS,OAAOkK,EAAKjK,KAAKD,MAClDkK,GAEXN,EAAMrL,UAAU4L,MAAQ,SAAU1G,GAE9B,OADA9F,KAAKiH,QAAQ7E,SAAQ,SAAUC,GAAS,OAAOyD,EAAMxD,KAAKD,MACnDyD,GAEJmG,EA9BgB,GAgC3BzK,EAAQyK,MAAQA,G,uDCjChBzK,EAAQC,YAAa,G,sYCSfgL,E,4JAKF,WACI,MAAmEzM,KAAK0M,MAAjEC,EAAP,EAAOA,QAAS7C,EAAhB,EAAgBA,MAAO8C,EAAvB,EAAuBA,MAAOC,EAA9B,EAA8BA,UAAWC,EAAzC,EAAyCA,SAAaC,EAAtD,iBAEA,OACI,kBAACC,EAAA,EAAD,eAAOH,UAAS,yBAAoBF,EAAU,GAAK,WAAnC,YAAiDE,GAC1DI,QAAQ,WACRL,MAAOA,GACHG,GAEP,yBAAKF,UAAU,4BACX,6BACI,kBAACK,EAAA,EAAD,CAAYD,QAAQ,MACfnD,IAIT,yBAAK+C,UAAU,0BACVC,S,GAtBIK,IAAMC,WAA7BX,EACKY,aAAe,CAClBV,SAAS,GA4BFF,Q,6CC2FAa,E,kDAvGX,WAAYZ,GAA0B,IAAD,sCACjC,cAAMA,IAuBVa,cAAgB,SAACC,GACW,OAApB,EAAKd,MAAMe,OACX,EAAKf,MAAMgB,gBAAgB,EAAKhB,MAAMe,KAAK/K,GAAI8K,EAAMG,OAAOtL,OAC5D,EAAKuL,SAAS,CAAEC,MAAOL,EAAMG,OAAOtL,UA3BP,EA+BrCyL,iBAAmB,SAACN,GACQ,OAApB,EAAKd,MAAMe,OACX,EAAKf,MAAMqB,mBAAmB,EAAKrB,MAAMe,KAAK/K,GAAI8K,EAAMG,OAAOK,SAC/D,EAAKJ,SAAS,CAAExK,QAASoK,EAAMG,OAAOK,UAAW,kBAAM,EAAKtB,MAAMuB,sBAlCrC,EAsCrCC,mBAAqB,SAACV,GACM,OAApB,EAAKd,MAAMe,MAAkB,EAAKf,MAAMe,KAAKrK,UAC7C,EAAKsJ,MAAMyB,qBAAqB,EAAKzB,MAAMe,KAAK/K,GAAI8K,EAAMG,OAAOK,SACjE,EAAKJ,SAAS,CAAEQ,UAAWZ,EAAMG,OAAOK,UAAW,kBAAM,EAAKtB,MAAMuB,sBAzCvC,EA6CrCI,cAAgB,WACY,OAApB,EAAK3B,MAAMe,MACX,EAAKf,MAAM4B,WAAW,EAAK5B,MAAMe,KAAK/K,KA5C1C,EAAK6L,MAAQ,CACTC,WAAU,UAAE,EAAK9B,MAAMe,YAAb,aAAE,EAAiB/K,GAC7BmL,OAAO,YAAKnB,MAAMe,YAAX,eAAiBI,QAAS,GACjCzK,SAAS,YAAKsJ,MAAMe,YAAX,eAAiBrK,WAAW,EACrCgL,WAAW,YAAK1B,MAAMe,YAAX,eAAiBW,aAAa,GAPZ,E,sDAWrC,SAAmBK,EAAuCC,GAAwC,IAAD,EAC3C,SAA9C,UAAA1O,KAAK0M,MAAMe,YAAX,eAAiB/K,MAAOgM,EAAUF,YAClCxO,KAAK4N,SAAS,CACVC,OAAO,UAAA7N,KAAK0M,MAAMe,YAAX,eAAiBI,QAAS,GAGjCzK,SAAS,UAAApD,KAAK0M,MAAMe,YAAX,eAAiBrK,WAAW,EACrCgL,WAAW,UAAApO,KAAK0M,MAAMe,YAAX,eAAiBW,aAAa,EACzCI,WAAU,UAAExO,KAAK0M,MAAMe,YAAb,aAAE,EAAiB/K,O,oBAgCzC,WACI,OACI,kBAAC,EAAD,CAAgBoH,MAAM,yDAAY6C,QAA6B,OAApB3M,KAAK0M,MAAMe,MAClD,kBAACkB,EAAA,EAAD,KAEI,yBAAK9B,UAAU,sBACX,kBAAC+B,EAAA,EAAD,CACIf,MAAM,qBACNpC,KAAK,QACLpJ,MAAOrC,KAAKuO,MAAMV,MAClBgB,SAAU7O,KAAKuN,iBAIvB,yBAAKV,UAAU,sBACX,kBAACiC,EAAA,EAAD,CACIC,QACI,kBAACC,EAAA,EAAD,CACIhB,QAAShO,KAAKuO,MAAMH,UACpBS,SAAU7O,KAAKkO,qBAGvBL,MAAO,4DAIf,yBAAKhB,UAAU,sBACX,kBAACiC,EAAA,EAAD,CACIC,QACI,kBAACC,EAAA,EAAD,CACIhB,QAAShO,KAAKuO,MAAMnL,QACpByL,SAAU7O,KAAK8N,mBAGvBD,MAAM,wEAId,yBAAKhB,UAAU,sBACX,kBAACoC,EAAA,EAAD,CACIC,QAASlP,KAAKqO,eADlB,qD,GA3FElB,IAAMC,W,yDCnB1B+B,EAAc,SAACC,GAAD,OAAqB,SAAC/M,GAAD,OAAmBA,IAAU6H,MAAMkF,EAAU/M,IAEhFgN,EAAe,SAACD,GAAD,OAAqB,SAACE,GACvC,OAAOA,EAAOzL,KAAI,SAAAC,GAAC,OAAKqL,EAAYC,EAAZD,CAAqBrL,MAAIyL,KAAK,OAGpDC,EAAQ,SAACnN,GAAD,OAA2B,IAAVA,EAAc,IAAM,KAEtCoN,EAAqB,SAAC3G,EAAsC4G,GAqBrE,IApBA,IAAMC,EAAY,WACd,IAAIC,EAAc,EAalB,YAZoBrL,IAAhBuE,GACAA,EAAY1G,SAAQ,SAAAC,GAChBA,EAAMD,SAAQ,SAAAgD,GACV,QAAyBb,IAArBa,EAAOO,gBAAgDpB,IAArBa,EAAOiD,UAAyB,CAClE,IAAMwH,EAAcC,KAAKF,IAAL,MAAAE,KAAI,YAAQ1K,EAAOiD,UAAUxE,KAAI,SAAAkM,GAAC,OAAIA,IAAM7F,MAAM,EAAI6F,EAAE1O,WAApD,QAA6D,KAC/E2O,EAAc5K,EAAO0E,QAAUI,MAAM,EAAI9E,EAAO0E,MAAMzI,OACtD4O,EAAc7K,EAAOO,YAAcuE,MAAM,EAAI9E,EAAOO,UAAUtE,OACpEuO,EAAME,KAAKF,IAAL,MAAAE,KAAI,YAAQ,CAACD,EAAKG,EAAKC,EAAKL,GAAK/L,KAAI,SAAAkM,GAAC,OAAIA,MAAtC,QAA0C,YAK7DH,GAGPM,EAAM,GAGDhP,EAAI,EAAGA,EAFD,EAEKyO,IAAuBzO,IACvCgP,GAAO,IAGX,IAAMC,EAAWhB,EAAY,UACvBiB,EAAYf,EAAa,UAI3BgB,EAAM,IAFVH,EAAe,OAATR,EAAgB,UAAYQ,GAsClC,YAnCoB3L,IAAhBuE,IACa,OAAT4G,EACA5G,EAAY1G,SAAQ,SAAAC,GAChBA,EAAMD,SAAQ,SAAC0B,QACSS,IAAhBT,EAAE6B,gBAA2CpB,IAAhBT,EAAEuE,gBAAsC9D,IAAXT,EAAEoE,OAC5DmI,GAAOF,EAASrM,EAAE6B,WAAa,MAAQyK,EAAUtM,EAAEuE,WAAa,IAAMmH,EAAM1L,EAAEoE,MAAQ,KAAOgI,SAIzF,QAATR,GAA2B,SAATA,EACzB5G,EAAY1G,SAAQ,SAAAC,GAChBA,EAAMD,SAAQ,SAAC0B,QACKS,IAAZT,EAAEgG,OAAuBhG,EAAEgG,MAAMzI,OAAS,QAAqBkD,IAAhBT,EAAE6B,WAA2B7B,EAAE6B,UAAUtE,OAAS,QAAqBkD,IAAhBT,EAAEuE,WAA2BvE,EAAEuE,UAAUhH,OAAS,IACxJgP,GAAOF,EAASrM,EAAEgG,OAAS,KAAOqG,EAASrM,EAAE6B,WAAa,MAAQyK,EAAUtM,EAAEuE,WAAvE8H,MAAiGD,SAIpG,QAATR,GAA2B,QAATA,GAA2B,YAATA,GAA+B,UAATA,GAA6B,WAATA,EACrF5G,EAAY1G,SAAQ,SAAAC,GAChBA,EAAMD,SAAQ,SAAC0B,QACKS,IAAZT,EAAEgG,OAAuBhG,EAAEgG,MAAMzI,OAAS,IAC1CgP,GAAOF,EAASrM,EAAEgG,OAAXqG,MAAiCD,SAIpC,UAATR,GAA6B,WAATA,GAC3B5G,EAAY1G,SAAQ,SAAAC,GAChBA,EAAMD,SAAQ,SAAC0B,QACKS,IAAZT,EAAEgG,OAAuBhG,EAAEgG,MAAMzI,OAAS,QAAkBkD,IAAbT,EAAElB,SACjDyN,GAAOF,EAASrM,EAAEgG,OAAS,MAAQhG,EAAElB,OAAS,KAAOsN,UAMlEG,GAIEC,EAAuB,SAACxH,EAAsC4G,GACvE,IAAMS,EAAWhB,EAAY,OACvBiB,EAAYf,EAAa,OAE3BgB,EAAM,GAqCV,YApCoB9L,IAAhBuE,IACa,OAAT4G,EACA5G,EAAY1G,SAAQ,SAAAC,GAChBA,EAAMD,SAAQ,SAAC0B,QACSS,IAAhBT,EAAE6B,gBAA2CpB,IAAhBT,EAAEuE,gBAAsC9D,IAAXT,EAAEoE,OAC5DmI,GAAOF,EAASrM,EAAE6B,WAAa,MAAQyK,EAAUtM,EAAEuE,WAAa,IAAMmH,EAAM1L,EAAEoE,MAAQ,aAIlF,QAATwH,GAA2B,SAATA,EACzB5G,EAAY1G,SAAQ,SAAAC,GAChBA,EAAMD,SAAQ,SAAC0B,QACKS,IAAZT,EAAEgG,OAAuBhG,EAAEgG,MAAMzI,OAAS,QAAqBkD,IAAhBT,EAAE6B,WAA2B7B,EAAE6B,UAAUtE,OAAS,QAAqBkD,IAAhBT,EAAEuE,WAA2BvE,EAAEuE,UAAUhH,OAAS,IACxJgP,GAAOF,EAASrM,EAAEgG,OAAS,KAAOqG,EAASrM,EAAE6B,WAAa,MAAQyK,EAAUtM,EAAEuE,WAAa,aAIvF,QAATqH,GAA2B,QAATA,GAA2B,YAATA,GAA+B,UAATA,GAA6B,WAATA,EACrF5G,EAAY1G,SAAQ,SAAAC,GAChBA,EAAMD,SAAQ,SAAC0B,QACKS,IAAZT,EAAEgG,OAAuBhG,EAAEgG,MAAMzI,OAAS,IAC1CgP,GAAOF,EAASrM,EAAEgG,OAAS,aAIvB,UAAT4F,GAA6B,WAATA,GAC3B5G,EAAY1G,SAAQ,SAAAC,GAChBA,EAAMD,SAAQ,SAAC0B,QACKS,IAAZT,EAAEgG,OAAuBhG,EAAEgG,MAAMzI,OAAS,QAAkBkD,IAAbT,EAAElB,SACjDyN,GAAOF,EAASrM,EAAEgG,OAAS,MAAQhG,EAAElB,OAAS,cAO3DyN,GAgDEE,EAAkB,SAAC3O,GAC5B,IAAIuC,EAAgB,CAACb,MAAO,IAAIkN,IAAuB3H,MAAO,IAAI2H,KASlE,OAPA5O,EAAM0B,MAAMlB,SAAQ,SAACqL,GACjBtJ,EAAIb,MAAMiI,IAAIkC,MAElB7L,EAAMiH,MAAMzG,SAAQ,SAACqO,GACjBtM,EAAI0E,MAAM0C,IAAIkF,MAGXtM,GAGEuM,EAAkB,SAACC,GAC5B,IAAIxM,EAAa,CAACb,MAAO,GAAIuF,MAAO,IASpC,OAPA8H,EAASrN,MAAMlB,SAAQ,SAACqL,GACpBtJ,EAAIb,MAAMhB,KAAKmL,MAEnBkD,EAAS9H,MAAMzG,SAAQ,SAACqO,GACpBtM,EAAI0E,MAAMvG,KAAKmO,MAGZtM,GAiBEyM,EAAoD,CAC7DC,IAAK,CACDC,KAAM,qBACNC,YAAa,+XACbC,QAAS,UACTC,aAAc,CACV3N,MAAO,CACH,CAACZ,GAAI,EAAGwO,EAAG,EAAGC,EAAG,GAAItD,MAAO,KAAMzK,SAAS,EAAOgL,WAAW,EAAMgD,WAAW,GAC9E,CAAC1O,GAAI,EAAGwO,EAAG,IAAKC,EAAG,EAAGtD,MAAO,KAAMzK,SAAS,EAAOgL,WAAW,EAAOgD,WAAW,IAIpFvI,MAAO,CACH,CAACc,KAAM,EAAGC,GAAI,EAAGd,YAAa,IAAIe,IAAI,CAAC,CAAC,CAACC,MAAO,YAW5DJ,IAAK,CACDoH,KAAM,qBACNC,YAAa,wSACbC,QAAS,UACTC,aAAc,CACV3N,MAAO,CACH,CAACZ,GAAI,EAAGwO,EAAG,EAAGC,EAAG,EAAGtD,MAAO,KAAMzK,SAAS,EAAOgL,WAAW,EAAMgD,WAAW,GAC7E,CAAC1O,GAAI,EAAGwO,EAAG,IAAKC,EAAG,IAAKtD,MAAO,KAAMzK,SAAS,EAAOgL,WAAW,EAAOgD,WAAW,GAClF,CAAC1O,GAAI,EAAGwO,EAAG,IAAKC,EAAG,IAAKtD,MAAO,KAAMzK,SAAS,EAAOgL,WAAW,EAAOgD,WAAW,GAClF,CAAC1O,GAAI,EAAGwO,EAAG,IAAKC,EAAG,IAAKtD,MAAO,KAAMzK,SAAS,EAAMgL,WAAW,EAAOgD,WAAW,IAErFvI,MAAO,CACH,CAACc,KAAM,EAAGC,GAAI,EAAGd,YAAa,IAAIe,IAAI,CAAC,CAAC,CAACC,MAAO,KAAM,CAACA,MAAO,SAG9D,CAACH,KAAM,EAAGC,GAAI,EAAGd,YAAa,IAAIe,IAAI,CAAC,CAAC,CAACC,MAAO,SAChD,CAACH,KAAM,EAAGC,GAAI,EAAGd,YAAa,IAAIe,IAAI,CAAC,CAAC,CAACC,MAAO,SAChD,CAACH,KAAM,EAAGC,GAAI,EAAGd,YAAa,IAAIe,IAAI,CAAC,CAAC,CAACC,MAAO,SAEhD,CAACH,KAAM,EAAGC,GAAI,EAAGd,YAAa,IAAIe,IAAI,CAAC,CAAC,CAACC,MAAO,YAK5D,UAAW,CACPgH,KAAM,4BACNC,YAAa,sQACbC,QAAS,cACTC,aAAc,CACV3N,MAAO,CACH,CAACZ,GAAI,EAAGwO,EAAG,EAAGC,EAAG,IAAKtD,MAAO,IAAKzK,SAAS,EAAOgL,WAAW,EAAMgD,WAAW,GAC9E,CAAC1O,GAAI,EAAGwO,EAAG,IAAKC,EAAG,IAAKtD,MAAO,KAAMzK,SAAS,EAAOgL,WAAW,EAAOgD,WAAW,GAClF,CAAC1O,GAAI,EAAGwO,EAAG,IAAKC,EAAG,IAAKtD,MAAO,KAAMzK,SAAS,EAAOgL,WAAW,EAAOgD,WAAW,GAClF,CAAC1O,GAAI,EAAGwO,EAAG,IAAKC,EAAG,IAAKtD,MAAO,KAAMzK,SAAS,EAAOgL,WAAW,EAAOgD,WAAW,GAClF,CAAC1O,GAAI,EAAGwO,EAAG,IAAKC,EAAG,IAAKtD,MAAO,KAAMzK,SAAS,EAAOgL,WAAW,EAAOgD,WAAW,GAClF,CAAC1O,GAAI,EAAGwO,EAAG,IAAKC,EAAG,IAAKtD,MAAO,KAAMzK,SAAS,EAAMgL,WAAW,EAAOgD,WAAW,GACjF,CAAC1O,GAAI,EAAGwO,EAAG,IAAKC,EAAG,IAAKtD,MAAO,KAAMzK,SAAS,EAAOgL,WAAW,EAAOgD,WAAW,GAClF,CAAC1O,GAAI,EAAGwO,EAAG,IAAKC,EAAG,IAAKtD,MAAO,KAAMzK,SAAS,EAAOgL,WAAW,EAAOgD,WAAW,GAClF,CAAC1O,GAAI,EAAGwO,EAAG,IAAKC,EAAG,IAAKtD,MAAO,KAAMzK,SAAS,EAAMgL,WAAW,EAAOgD,WAAW,IAGrFvI,MAAO,CACH,CAACc,KAAM,EAAGC,GAAI,EAAGd,YAAa,IAAIe,IAAI,CAAC,CAAC,CAACC,MAAO,KAAM,CAACA,MAAO,SAE9D,CAACH,KAAM,EAAGC,GAAI,EAAGd,YAAa,IAAIe,IAAI,CAAC,CAAC,CAACC,MAAOI,WAChD,CAACP,KAAM,EAAGC,GAAI,EAAGd,YAAa,IAAIe,IAAI,CAAC,CAAC,CAACC,MAAOI,WAChD,CAACP,KAAM,EAAGC,GAAI,EAAGd,YAAa,IAAIe,IAAI,CAAC,CAAC,CAACC,MAAO,SAChD,CAACH,KAAM,EAAGC,GAAI,EAAGd,YAAa,IAAIe,IAAI,CAAC,CAAC,CAACC,MAAO,SAChD,CAACH,KAAM,EAAGC,GAAI,EAAGd,YAAa,IAAIe,IAAI,CAAC,CAAC,CAACC,MAAO,SAChD,CAACH,KAAM,EAAGC,GAAI,EAAGd,YAAa,IAAIe,IAAI,CAAC,CAAC,CAACC,MAAO,SAChD,CAACH,KAAM,EAAGC,GAAI,EAAGd,YAAa,IAAIe,IAAI,CAAC,CAAC,CAACC,MAAO,SAChD,CAACH,KAAM,EAAGC,GAAI,EAAGd,YAAa,IAAIe,IAAI,CAAC,CAAC,CAACC,MAAO,SAEhD,CAACH,KAAM,EAAGC,GAAI,EAAGd,YAAa,IAAIe,IAAI,CAAC,CAAC,CAACC,MAAO,KAAM,CAACA,MAAO,SAE9D,CAACH,KAAM,EAAGC,GAAI,EAAGd,YAAa,IAAIe,IAAI,CAAC,CAAC,CAACC,MAAO,KAAM,CAACA,MAAO,YAK1EuH,IAAK,CACDP,KAAM,4JACNC,YAAa,mNACbC,QAAS,UACTC,aAAc,CACV3N,MAAO,CACH,CAACZ,GAAI,EAAGwO,EAAG,EAAGC,EAAG,EAAGtD,MAAO,KAAMzK,SAAS,EAAOgL,WAAW,EAAMgD,WAAW,GAC7E,CAAC1O,GAAI,EAAGwO,EAAG,IAAKC,EAAG,EAAGtD,MAAO,KAAMzK,SAAS,EAAOgL,WAAW,EAAOgD,WAAW,GAChF,CAAC1O,GAAI,EAAGwO,EAAG,IAAKC,EAAG,EAAGtD,MAAO,KAAMzK,SAAS,EAAOgL,WAAW,EAAOgD,WAAW,IAEpFvI,MAAO,CACH,CACIc,KAAM,EAAGC,GAAI,EAAGd,YAAa,IAAIe,IAAI,CACjC,CACI,CAACC,MAAO,IAAKnE,UAAW,KAAM0C,UAAW,CAAC,IAAK,OAC/C,CAACyB,MAAO,IAAKnE,UAAW,KAAM0C,UAAW,CAAC,IAAK,OAC/C,CAACyB,MAAO,IAAKnE,UAAW,IAAK0C,UAAW,CAAC,IAAK,MAC9C,CAACyB,MAAO,IAAKnE,UAAW,IAAK0C,UAAW,CAAC,IAAK,MAC9C,CAACyB,MAAO,IAAKnE,UAAW,IAAK0C,UAAW,CAAC,IAAK,MAC9C,CAACyB,MAAO,IAAKnE,UAAW,IAAK0C,UAAW,CAAC,IAAK,UAU1D,CACIsB,KAAM,EAAGC,GAAI,EAAGd,YAAa,IAAIe,IAAI,CACjC,CACI,CAACC,MAAOI,MAAKvE,UAAW,KAAM0C,UAAW,CAAC,OAC1C,CAACyB,MAAOI,MAAKvE,UAAW,IAAK0C,UAAW,CAAC,MACzC,CAACyB,MAAOI,MAAKvE,UAAW,IAAK0C,UAAW,CAAC,UAMrD,CACIsB,KAAM,EAAGC,GAAI,EAAGd,YAAa,IAAIe,IAAI,CACjC,CACI,CAACC,MAAO,IAAKnE,UAAW,IAAK0C,UAAW,CAAC6B,QACzC,CAACJ,MAAO,IAAKnE,UAAW,IAAK0C,UAAW,CAAC6B,YAKrD,CAACP,KAAM,EAAGC,GAAI,EAAGd,YAAa,IAAIe,IAAI,CAAC,CAAC,CAACC,MAAOI,MAAKvE,UAAW,KAAM0C,UAAW,CAAC6B,eAK9FoH,KAAM,CACFR,KAAM,mQACNC,YAAa,mNACbC,QAAS,UACTC,aAAc,CACV3N,MAAO,CACH,CAACZ,GAAI,EAAGwO,EAAG,EAAGC,EAAG,EAAGtD,MAAO,KAAMzK,SAAS,EAAOgL,WAAW,EAAMgD,WAAW,IAGjFvI,MAAO,CACH,CACIc,KAAM,EAAGC,GAAI,EAAGd,YAAa,IAAIe,IAAI,CAAC,CAAC,CAACC,MAAO,IAAKnE,UAAW,KAAM0C,UAAW,CAAC,IAAK,cAKtGkJ,GAAI,CACAT,KAAM,wFACNC,YAAa,IACbC,QAAS,SACTC,aAAc,CACV3N,MAAO,CACH,CAACZ,GAAI,EAAGwO,EAAG,EAAGC,EAAG,EAAGtD,MAAO,KAAMzK,SAAS,EAAOgL,WAAW,EAAMgD,WAAW,GAC7E,CAAC1O,GAAI,EAAGwO,EAAG,IAAKC,EAAG,EAAGtD,MAAO,KAAMzK,SAAS,EAAOgL,WAAW,EAAOgD,WAAW,GAChF,CAAC1O,GAAI,EAAGwO,EAAG,EAAGC,EAAG,IAAKtD,MAAO,KAAMzK,SAAS,EAAMgL,WAAW,EAAOgD,WAAW,GAC/E,CAAC1O,GAAI,EAAGwO,EAAG,IAAKC,EAAG,IAAKtD,MAAO,KAAMzK,SAAS,EAAMgL,WAAW,EAAOgD,WAAW,IAErFvI,MAAO,CACH,CAAEc,KAAM,EAAGC,GAAI,EAAGd,YAAa,IAAIe,IAAI,CAAC,CAAC,CAACC,MAAOI,MAAKvE,UAAW,IAAK0C,UAAW,CAAC,KAAMH,KAAMC,OAAKC,GAAI,CAAC0B,MAAOI,MAAKvE,UAAW,IAAK0C,UAAW,CAAC,KAAMH,KAAMC,OAAKC,OACjK,CAAEuB,KAAM,EAAGC,GAAI,EAAGd,YAAa,IAAIe,IAAI,CAAC,CAAC,CAACC,MAAOI,MAAKvE,UAAW,IAAK0C,UAAW,CAAC,KAAMH,KAAMC,OAAKG,OACnG,CAAEqB,KAAM,EAAGC,GAAI,EAAGd,YAAa,IAAIe,IAAI,CAAC,CAAC,CAACC,MAAOI,MAAKvE,UAAW,IAAK0C,UAAW,CAAC,KAAMH,KAAMC,OAAKG,OACnG,CAAEqB,KAAM,EAAGC,GAAI,EAAGd,YAAa,IAAIe,IAAI,CAAC,CAAC,CAACC,MAAOI,MAAKvE,UAAW,IAAK0C,UAAW,CAAC,KAAMH,KAAMC,OAAKG,OACnG,CAAEqB,KAAM,EAAGC,GAAI,EAAGd,YAAa,IAAIe,IAAI,CAAC,CAAC,CAACC,MAAOI,MAAKvE,UAAW,IAAK0C,UAAW,CAAC,KAAMH,KAAMC,OAAKG,UAI/GkJ,MAAO,CACHV,KAAM,sEACNE,QAAS,YACTD,YAAa,IACbE,aAAc,CACV3N,MAAO,CACH,CAAE4N,EAAG,EAAGC,EAAG,EAAGzO,GAAI,EAAGU,SAAS,EAAOgO,WAAW,EAAOhD,WAAW,EAAMP,MAAO,SAC/E,CAAEqD,EAAG,IAAKC,GAAI,IAAKzO,GAAI,EAAGU,SAAS,EAAOgO,WAAW,EAAOhD,WAAW,EAAOP,MAAO,SACrF,CAAEqD,EAAG,IAAKC,GAAI,IAAKzO,GAAI,EAAGU,SAAS,EAAOgO,WAAW,EAAOhD,WAAW,EAAOP,MAAO,UACrF,CAAEqD,GAAI,IAAKC,GAAI,IAAKzO,GAAI,EAAGU,SAAS,EAAOgO,WAAW,EAAOhD,WAAW,EAAOP,MAAO,WAE1FhF,MAAO,CACH,CAAEc,KAAM,EAAGC,GAAI,EAAGd,YAAa,IAAIe,IAAI,CAAC,CAAC,CAAEC,MAAO,IAAKlH,OAAQ,SAC/D,CAAE+G,KAAM,EAAGC,GAAI,EAAGd,YAAa,IAAIe,IAAI,CAAC,CAAC,CAAEC,MAAO,IAAKlH,OAAQ,SAC/D,CAAE+G,KAAM,EAAGC,GAAI,EAAGd,YAAa,IAAIe,IAAI,CAAC,CAAC,CAAEC,MAAO,IAAKlH,OAAQ,SAC/D,CAAE+G,KAAM,EAAGC,GAAI,EAAGd,YAAa,IAAIe,IAAI,CAAC,CAAC,CAAEC,MAAO,IAAKlH,OAAQ,SAC/D,CAAE+G,KAAM,EAAGC,GAAI,EAAGd,YAAa,IAAIe,IAAI,CAAC,CAAC,CAAEC,MAAO,IAAKlH,OAAQ,KAAO,CAAEkH,MAAO,IAAKlH,OAAQ,SAC5F,CAAE+G,KAAM,EAAGC,GAAI,EAAGd,YAAa,IAAIe,IAAI,CAAC,CAAC,CAAEC,MAAO,IAAKlH,OAAQ,SAC/D,CAAE+G,KAAM,EAAGC,GAAI,EAAGd,YAAa,IAAIe,IAAI,CAAC,CAAC,CAAEC,MAAO,IAAKlH,OAAQ,YAsB3E6O,OAAQ,CACJX,KAAM,6KACNE,QAAS,YACTD,YAAa,IACbE,aAAc,CACV3N,MAAO,CACH,CAAE4N,EAAG,EAAGC,EAAG,EAAGzO,GAAI,EAAGU,SAAS,EAAOgO,WAAW,EAAOhD,WAAW,EAAMP,MAAO,SAG/E,CAAEqD,GAAI,IAAKC,GAAI,IAAKzO,GAAI,EAAGU,SAAS,EAAOgO,WAAW,EAAOhD,WAAW,EAAOP,MAAO,WAE1FhF,MAAO,CACH,CAAEc,KAAM,EAAGC,GAAI,EAAGd,YAAa,IAAIe,IAAI,CAAC,CAAC,CAAEC,MAAO,IAAKlH,OAAQ,SAC/D,CAAE+G,KAAM,EAAGC,GAAI,EAAGd,YAAa,IAAIe,IAAI,CAAC,CAAC,CAAEC,MAAO,IAAKlH,OAAQ,YA2B3E8O,MAAO,CACHZ,KAAM,sEACNC,YAAa,IACbC,QAAS,YACTC,aAAc,CACV3N,MAAO,CACH,CAAE4N,EAAG,EAAGC,EAAG,EAAGzO,GAAI,EAAGU,SAAS,EAAOgO,WAAW,EAAOhD,WAAW,EAAMP,MAAO,UAC/E,CAAEqD,EAAG,IAAKC,EAAG,EAAGzO,GAAI,EAAGU,SAAS,EAAOgO,WAAW,EAAOhD,WAAW,EAAOP,MAAO,UAClF,CAAEqD,EAAG,IAAKC,EAAG,IAAKzO,GAAI,EAAGU,SAAS,EAAOgO,WAAW,EAAOhD,WAAW,EAAOP,MAAO,WAGxFhF,MAAO,CACH,CAAEc,KAAM,EAAGC,GAAI,EAAGd,YAAa,IAAIe,IAAI,CAAC,CAAC,CAAEC,MAAO,SAClD,CAAEH,KAAM,EAAGC,GAAI,EAAGd,YAAa,IAAIe,IAAI,CAAC,CAAC,CAAEC,MAAO,SAElD,CAAEH,KAAM,EAAGC,GAAI,EAAGd,YAAa,IAAIe,IAAI,CAAC,CAAC,CAAEC,MAAO,SAClD,CAAEH,KAAM,EAAGC,GAAI,EAAGd,YAAa,IAAIe,IAAI,CAAC,CAAC,CAAEC,MAAO,SAElD,CAAEH,KAAM,EAAGC,GAAI,EAAGd,YAAa,IAAIe,IAAI,CAAC,CAAC,CAAEC,MAAO,SAClD,CAAEH,KAAM,EAAGC,GAAI,EAAGd,YAAa,IAAIe,IAAI,CAAC,CAAC,CAAEC,MAAO,YAI9D6H,OAAQ,CACJb,KAAM,6KACNC,YAAa,IACbC,QAAS,YACTC,aAAc,CACV3N,MAAO,CACH,CAAE4N,EAAG,EAAGC,EAAG,EAAGzO,GAAI,EAAGU,SAAS,EAAOgO,WAAW,EAAOhD,WAAW,EAAMP,MAAO,UAC/E,CAAEqD,EAAG,IAAKC,EAAG,EAAGzO,GAAI,EAAGU,SAAS,EAAOgO,WAAW,EAAOhD,WAAW,EAAOP,MAAO,UAClF,CAAEqD,EAAG,IAAKC,EAAG,IAAKzO,GAAI,EAAGU,SAAS,EAAOgO,WAAW,EAAOhD,WAAW,EAAOP,MAAO,WAGxFhF,MAAO,CACH,CAAEc,KAAM,EAAGC,GAAI,EAAGd,YAAa,IAAIe,IAAI,CAAC,CAAC,CAAEC,MAAO,SAClD,CAAEH,KAAM,EAAGC,GAAI,EAAGd,YAAa,IAAIe,IAAI,CAAC,CAAC,CAAEC,MAAO,SAElD,CAAEH,KAAM,EAAGC,GAAI,EAAGd,YAAa,IAAIe,IAAI,CAAC,CAAC,CAAEC,MAAO,SAClD,CAAEH,KAAM,EAAGC,GAAI,EAAGd,YAAa,IAAIe,IAAI,CAAC,CAAC,CAAEC,MAAO,SAElD,CAAEH,KAAM,EAAGC,GAAI,EAAGd,YAAa,IAAIe,IAAI,CAAC,CAAC,CAAEC,MAAO,SAClD,CAAEH,KAAM,EAAGC,GAAI,EAAGd,YAAa,IAAIe,IAAI,CAAC,CAAC,CAAEC,MAAO,aAsBrD8H,EAAY,SAACd,GAAkB,IAAD,EAEjCe,EADK,YAAQC,SAASC,QACRC,MAAN,YAAiBlB,EAAjB,MACd,GAAqB,IAAjBe,EAAMxQ,OAAc,iBAAOwQ,EAAMxF,aAAb,aAAO,EAAa2F,MAAM,KAAKC,S,2BCrhB9CC,EAAmB,SAAC9E,GAAD,OAC5B,SAACV,GAAD,OACI,kBAACyF,GAAoBC,SAArB,MACM,SAAAC,GAAO,OAAI,kBAACjF,EAAD,eAAWkF,aAAcD,GAAa3F,SC8VhDwF,I,kDA5TX,WAAYxF,GAA0B,IAAD,sCACjC,cAAMA,IA8BV6F,iBAAmB,SAACC,GACZ,EAAKjE,MAAMkE,mBAAqBD,EAChC,EAAK5E,SAAS,CAAC6E,iBAAkB,OAEjC,EAAK7E,SAAS,CAAC6E,iBAAkBD,KAnCJ,EAuCrCE,kBAvCqC,uCAuCjB,WAAOlF,GAAP,qBAAA1C,EAAA,sDACVzI,EAAQmL,EAAMG,OAAOtL,MAC3B,EAAKuL,SAAS,CAAC+E,gBAAiBtQ,IAE5BuQ,EAI8B,GAC9BzO,EAA0B,GAEE,OAA5B,EAAKuI,MAAM4F,cACX,EAAK/D,MAAMoE,gBACNX,MAAM,IACNa,QAAO,SAAA3B,GAAC,MAAU,MAANA,GAAmB,OAANA,KACzB3B,KAAK,IACLyC,MAAM,KACN5P,SAAQ,SAAAC,GACL,IAIIyQ,EAJAC,EAAM1Q,EAAM2P,MAAM,IAClBgB,EAAMD,EAAId,QAEVgB,EADJF,EAAMA,EAAIxD,KAAK,IAAIyC,MAAM,KAIrBkB,EAAQH,EAAIxD,KAAK,IAAIyC,MAAM,KAC/BkB,EAAMC,UACNL,EAAMI,EAAMjB,QACZiB,EAAMC,UACNF,EAAMC,EAENN,EAAYtQ,KAAK,CAAE0Q,IAAK9I,MAAKkJ,IAAKJ,EAAKC,IAAKA,EAAI1D,KAAK,KAAMuD,IAAKA,OAiB5C,UAA5B,EAAKpG,MAAM4F,cAAwD,WAA5B,EAAK5F,MAAM4F,cAClD,EAAK/D,MAAMoE,gBACVX,MAAM,IACNa,QAAO,SAAA3B,GAAC,MAAU,MAANA,GAAmB,OAANA,KACzB3B,KAAK,IACLyC,MAAM,KACN5P,SAAQ,SAAAC,GACL,IAAI0Q,EAAM1Q,EAAM2P,MAAM,KAClBgB,EAAMD,EAAId,QACVmB,EAAML,EAAId,QACdW,EAAYtQ,KAAK,CAAE0Q,IAAKA,EAAKI,IAAKA,EAAKH,SAAK1O,EAAWuO,SAAKvO,OAGhEqO,EAAYxQ,SAAQ,SAAAC,QACEkC,IAAdlC,EAAM2Q,KACN7O,EAAI7B,KACA,CACIwH,MAAqB,QAAdzH,EAAM2Q,IAAgB9I,MAAM7H,EAAM2Q,IACzCpQ,OAAQP,EAAM+Q,WAO9B,EAAK7E,MAAMoE,gBACNX,MAAM,IACNa,QAAO,SAAA3B,GAAC,MAAU,MAANA,GAAmB,OAANA,KACzB3B,KAAK,IACLyC,MAAM,KACN5P,SAAQ,SAAAC,GACL,IAAI0Q,EAAM1Q,EAAM2P,MAAM,KAClBgB,EAAMD,EAAId,QAEVmB,GADJL,EAAMA,EAAIxD,KAAK,IAAIyC,MAAM,MACXC,QACVgB,EAAMF,EACVH,EAAYtQ,KAAK,CAAE0Q,IAAKA,EAAKI,IAAKA,EAAKH,IAAKA,EAAI1D,KAAK,KAAMuD,SAAKvO,OAGxEqO,EAAYxQ,SAAQ,SAAAC,GACc,IAAD,OAAXkC,IAAdlC,EAAM2Q,KACN7O,EAAI7B,KACA,CACIwH,MAAqB,QAAdzH,EAAM2Q,IAAgB9I,MAAM7H,EAAM2Q,IACzCrN,UAAyB,QAAdtD,EAAM+Q,IAAgBlJ,MAAM7H,EAAM+Q,IAC7C/K,UAAS,UAAEhG,EAAM4Q,WAAR,aAAE,EAAWjB,MAAM,KAAKnO,KAAI,SAAAxB,GAAK,MAAc,QAAVA,EAAkB6H,MAAM7H,KACtE6F,KAAoB,MAAd7F,EAAMyQ,IAAc3K,OAAKG,EAAkB,MAAdjG,EAAMyQ,IAAc3K,OAAKC,OAAI7D,QAQhFuE,EAAuC,IAAIe,IAAwB,CAAC1F,IAExE,EAAKuI,MAAM2G,sBAAsB,EAAK3G,MAAM+D,KAAM/N,GAAKoG,GACvD9D,QAAQC,IAAI,UAIZ,EAAK2I,SAAS,CAAC+E,gBAAiBtQ,EAC1ByG,YAAaA,IAChB,kBAAM,EAAK4D,MAAMuB,oBA9GJ,4CAvCiB,wDAwJrCqF,WAxJqC,sBAwJxB,sBAAAxI,EAAA,6DACe,OAApB,EAAK4B,MAAM+D,MACX,EAAK/D,MAAM4G,WAAW,EAAK5G,MAAM+D,KAAK/N,IAFjC,SAIH,EAAKgK,MAAMuB,iBAJR,2CAxJwB,EAqKrCsF,eAAiB,WACZ,EAAK3F,SAAS,CAAC4F,UAAW,EAAKjF,MAAMiF,WACrC,EAAKC,qBAvK2B,EA2KrCA,kBA3KqC,sBA2KjB,gCAAA3I,EAAA,6DACZ8H,EAMG,GAEyB,OAA5B,EAAKlG,MAAM4F,cACX,EAAK/D,MAAMoE,gBACNX,MAAM,IACNa,QAAO,SAAA3B,GAAC,MAAU,MAANA,GAAmB,OAANA,KACzB3B,KAAK,IACLyC,MAAM,KACN5P,SAAQ,SAAAC,GACL,IAIIyQ,EAJAC,EAAM1Q,EAAM2P,MAAM,IAClBgB,EAAMD,EAAId,QAEVgB,EADJF,EAAMA,EAAIxD,KAAK,IAAIyC,MAAM,KAIrBkB,EAAQH,EAAIxD,KAAK,IAAIyC,MAAM,KAC/BkB,EAAMC,UACNL,EAAMI,EAAMjB,QACZiB,EAAMC,UACNF,EAAMC,EACNlO,QAAQC,IAAI,OACZD,QAAQC,IAAIiO,GAEZN,EAAYtQ,KAAK,CAAE0Q,IAAK9I,MAAKkJ,IAAKJ,EAAKC,IAAKA,EAAI1D,KAAK,KAAMuD,IAAKA,EAAKY,SAAKnP,OAItD,UAA5B,EAAKmI,MAAM4F,cAAwD,WAA5B,EAAK5F,MAAM4F,aAClD,EAAK/D,MAAMoE,gBACVX,MAAM,IACNa,QAAO,SAAA3B,GAAC,MAAU,MAANA,GAAmB,OAANA,KACzB3B,KAAK,IACLyC,MAAM,KACN5P,SAAQ,SAAAC,GACL,IAAI0Q,EAAM1Q,EAAM2P,MAAM,KAClBgB,EAAMD,EAAId,QACVmB,EAAML,EAAId,QACdW,EAAYtQ,KAAK,CAAE0Q,IAAKA,EAAKI,SAAK7O,EAAW0O,SAAK1O,EAAWuO,SAAKvO,EAAWmP,IAAKN,OAItF,EAAK7E,MAAMoE,gBACNX,MAAM,IACNa,QAAO,SAAA3B,GAAC,MAAU,MAANA,GAAmB,OAANA,KACzB3B,KAAK,IACLyC,MAAM,KACN5P,SAAQ,SAAAC,GACL,IAAI0Q,EAAM1Q,EAAM2P,MAAM,KAClBgB,EAAMD,EAAId,QAEVmB,GADJL,EAAMA,EAAIxD,KAAK,IAAIyC,MAAM,MACXC,QACVgB,EAAMF,EACVH,EAAYtQ,KAAK,CAAE0Q,IAAKA,EAAKI,IAAKA,EAAKH,IAAKA,EAAI1D,KAAK,KAAMuD,SAAKvO,EAAWmP,SAAKnP,OAKxFJ,EAA0B,GAC9ByO,EAAYxQ,SAAQ,SAAAC,GACc,IAAD,OAAXkC,IAAdlC,EAAM2Q,KACN7O,EAAI7B,KACA,CACIwH,MAAqB,QAAdzH,EAAM2Q,IAAgB9I,MAAM7H,EAAM2Q,IACzCrN,UAAyB,QAAdtD,EAAM+Q,IAAgBlJ,MAAM7H,EAAM+Q,IAC7C/K,UAAS,UAAEhG,EAAM4Q,WAAR,aAAE,EAAWjB,MAAM,KAAKnO,KAAI,SAAAxB,GAAK,MAAc,QAAVA,EAAkB6H,MAAM7H,KACtE6F,KAAoB,MAAd7F,EAAMyQ,IAAc3K,OAAKG,EAAkB,MAAdjG,EAAMyQ,IAAc3K,OAAKC,OAAI7D,EAChE3B,OAAQP,EAAMqR,SAO1B5K,EAAuC,IAAIe,IAAwB,CAAC1F,IAExE,EAAKyJ,SAAS,CACV+E,gBAAiBrC,EAAqBxH,EAAa,EAAK4D,MAAM4F,cAC9DxJ,YAAaA,IApFD,SAuFV,EAAK4D,MAAMuB,iBAvFD,2CA3KiB,EAsQrC0F,iBAAmB,WACf,GAAwB,OAApB,EAAKjH,MAAM+D,MAAiD,OAAhC,EAAKlC,MAAMkE,iBAA2B,CAClE,IAAM3J,EAAc,EAAKyF,MAAMzF,YAC/BA,EAAY8K,OAAO,EAAKrF,MAAMkE,kBAE9B,EAAK/F,MAAM2G,sBAAsB,EAAK3G,MAAM+D,KAAK/N,GAAKoG,GACtD,EAAK8E,SAAS,CAAC9E,YAAaA,EAAa6J,gBAAiBrC,EAAqBxH,EAAa,EAAK4D,MAAM4F,kBAzQ3G,EAAK/D,MAAQ,CACTsF,WAAU,UAAE,EAAKnH,MAAM+D,YAAb,aAAE,EAAiB/N,GAC7BoG,aAAa,YAAK4D,MAAM+D,YAAX,eAAiB3H,cAAe,IAAIe,IACjD8I,gBAAiBrC,GAAqB,YAAK5D,MAAM+D,YAAX,eAAiB3H,cAAe,IAAIe,IAA2B,EAAK6C,MAAM4F,cAChHwB,wBAAyBxD,GAAqB,YAAK5D,MAAM+D,YAAX,eAAiB3H,cAAe,IAAIe,IAA2B,EAAK6C,MAAM4F,cACxHG,iBAAkB,KAClBe,UAAU,EACVO,WAAY,EACZC,MAAO,CACH,CAACtR,GAAI,EAAGL,MAAO,OAZU,E,sDAiBrC,SAAmBoM,EAAuCC,GAAwC,IAAD,EAC3C,OAA9C,UAAA1O,KAAK0M,MAAM+D,YAAX,eAAiB/N,MAAOgM,EAAUmF,YAElC7T,KAAK4N,SAAS,CACV9E,aAAa,UAAA9I,KAAK0M,MAAM+D,YAAX,eAAiB3H,cAAe,IAAIe,IACjDgK,WAAU,UAAE7T,KAAK0M,MAAM+D,YAAb,aAAE,EAAiB/N,GAC7BiQ,gBAAiBrC,GAAqB,UAAAtQ,KAAK0M,MAAM+D,YAAX,eAAiB3H,cAAe,IAAIe,IAA2B7J,KAAK0M,MAAM4F,cAChHG,iBAAkB,KAClBe,UAAU,M,4BAuItB,SAAuBnR,GACnB,IAAI4R,EAAS,CAACvR,GAAI1C,KAAKuO,MAAMyF,MAAM3S,OAAQgB,MAAOA,GAClDrC,KAAK4N,SAAS,CAACoG,MAAOhU,KAAKuO,MAAMyF,MAAME,OAAOD,O,oBAgHlD,WACI,OACI,kBAAC,EAAD,CAAgBnK,MAAM,6CAAU6C,QAA6B,OAApB3M,KAAK0M,MAAM+D,MAChD,yBAAK5D,UAAU,2BACX,yBAAKA,UAAU,gDAEH,kBAAC+B,EAAA,EAAD,CACIlM,GAAG,0BACHyR,WAAS,EACTC,KAAM,EACNnH,QAAQ,WACRY,MAAM,mDACNpC,KAAK,QACLpJ,MAAOrC,KAAKuO,MAAMoE,gBAClB9D,SAAU7O,KAAK0S,kBACf2B,YAAYrU,KAAK0M,MAAM4F,aAA+C,4LACtEgC,OAAQtU,KAAKyT,oBAIzB,yBAAK5G,UAAU,iCACVqC,QAASlP,KAAKuT,gBACf,kBAAC,IAAD,QAMR,yBAAK1G,UAAU,sBACX,kBAACoC,EAAA,EAAD,CACIC,QAASlP,KAAKsT,YADlB,qD,GAhTEnG,IAAMC,Y,kKC2nBjB8E,K,kDArlBX,WAAYxF,GAAyB,IAAD,8BAChC,cAAMA,IAHV6H,cAAgBpH,IAAMqH,YAEc,EAiDpCC,wBAA0B,SAACC,EAAaC,GAkCpC,OAnBQD,EAAK7L,MAAMxH,SAAWsT,EAAQ9L,MAAMxH,QAIjCqT,EAAK7L,MAAM+L,MAAK,SAACF,EAAMG,GAC1B,IAAMpN,EAAOkN,EAAQ9L,MAAMgM,GAC3B,OAAOH,EAAKhS,KAAO+E,EAAK/E,IACpBgS,EAAK/K,OAASlC,EAAKkC,MACnB+K,EAAK9K,KAAOnC,EAAKmC,KAChBkL,kBAAQrN,EAAKqB,YAAa4L,EAAK5L,iBAtBpC4L,EAAKpR,MAAMjC,SAAWsT,EAAQrR,MAAMjC,QAIjCqT,EAAKpR,MAAMsR,MAAK,SAACF,EAAMG,GAC1B,IAAMpN,EAAOkN,EAAQrR,MAAMuR,GAC3B,OAAOH,EAAKhS,KAAO+E,EAAK/E,IACpBgS,EAAKtR,UAAYqE,EAAKrE,SACtBsR,EAAKtG,YAAc3G,EAAK2G,cA3DJ,EAsFpC2G,YAAc,SAACzC,EAA4B1Q,EAAcoT,EAAqBlT,GAC1E,OAAQwQ,GACJ,IAAK,MACD,IACI,OAAO,IAAIlM,MAAIxE,EAAOoT,EAAalT,GACrC,MAAOmT,GACL,OAER,IAAK,MACD,OAAO,IAAIrO,MAAIhF,EAAOoT,EAAalT,GACvC,IAAK,UACD,OAAO,IAAI6E,aAAW/E,EAAOoT,EAAalT,GAC9C,IAAK,MACD,OAAO,IAAIqH,MAAIvH,EAAOoT,EAAalT,EAAO,EAAKyM,MAAM2G,cACzD,IAAK,OACD,OAAO,IAAI9L,QAAKxH,EAAOoT,EAAalT,EAAO,EAAKyM,MAAM2G,cAC1D,IAAK,KACD,OAAO,IAAIrN,KAAGjG,EAAOoT,EAAalT,GACtC,IAAK,QACD,OAAO,IAAI2H,SAAM7H,EAAOoT,EAAalT,GACzC,IAAK,SACD,OAAO,IAAI0H,UAAO5H,EAAOoT,EAAalT,GAC1C,IAAK,QACD,OAAO,IAAIkI,SAAMpI,EAAOoT,EAAalT,GACzC,IAAK,SACD,OAAO,IAAIiI,UAAOnI,EAAOoT,EAAalT,KA/Gd,EAoHpCqT,mBAAqB,WACjBnQ,QAAQoQ,KAAK,2BAEb,EAAKxH,SAAS,CAAEyH,UAAW3E,EAAgB,EAAKhE,MAAMiE,YAAa,WAC/D,IAAMqE,EAAsBtE,EAAgB,EAAKhE,MAAMiE,UAAUrN,MAAMuP,QAAO,SAAApF,GAAI,OAAIA,EAAKW,aACrFtM,EAAQ,EAAKyM,MAAMzM,MAAMkQ,MAAM,SAEjBzN,IAAhByQ,GAKJhQ,QAAQC,IAAI,8DACZD,QAAQC,IAAI,EAAKsJ,MAAM8G,WAEvB,EAAKzH,SAAS,CACV0H,SAAU,EAAKP,YAAY,EAAKrI,MAAM4F,aAAc,EAAK/D,MAAM8G,UAAWL,EAAalT,GACvFyT,YAAQhR,KATRS,QAAQoQ,KAAK,iEAarBpQ,QAAQC,IAAI,2BACZ,EAAKyH,MAAMiE,SAAS9H,MAAMzG,SAAQ,SAAC0B,GAC/BkB,QAAQC,IAAInB,EAAE6F,KAAO,OAAS7F,EAAE8F,IAChC9F,EAAEgF,YAAY1G,SAAQ,SAAApB,GAAC,OAAIgE,QAAQC,IAAIjE,UA5IX,EAgJpCwU,eAAiB,SAAChI,GAAgD,IAAD,EACvD1L,EAAQ0L,EAAMG,OAAOtL,MAE3B,EAAK+E,QACL,YAAKmH,MAAM+G,gBAAX,SAAqBvQ,SAASjD,EAAMkQ,MAAM,KAE1C,EAAKpE,SAAS,CAAE9L,MAAOA,KAtJS,EA2JpCwE,KAAO,WACH,QAA4B/B,IAAxB,EAAKgK,MAAM+G,UAaf,GARA,EAAK5I,MAAM+I,mBAAkB,GAGzB,EAAKlH,MAAMmH,WACX,EAAK9H,SAAS,CAAE8H,UAAU,IAC1B,EAAKtO,UAGL,EAAKmH,MAAMoH,oBAAsB,EAAKpH,MAAMzM,MAAMT,OAAS,GAAiC,OAA5B,EAAKqL,MAAM4F,qBACrD/N,IAAtB,EAAKgK,MAAMgH,SAA0D,IAAlC,EAAKhH,MAAMoH,mBAAwD,OAA5B,EAAKjJ,MAAM4F,cAEzF,IAEI,IAAMsD,EAAmB,EAAKrH,MAAM+G,SAAShP,OAE7C,GAAgC,IAA5BsP,EAAWtS,MAAMjC,OAAc,OAEnC,EAAKqL,MAAMmJ,qBAAqBD,EAAWtS,MAAMO,KAAI,SAAA4J,GAAI,OAAIA,EAAK/K,OAAK,GACvE,EAAKgK,MAAMoJ,OAAOF,EAAWpN,OAAQoN,EAAW1O,SAEhD,IAAIqO,OAAShR,EACTqR,EAAW1S,UAAY,EAAKqL,MAAMzM,MAAMT,OACxCkU,EAASK,EAAWxS,QACb,EAAKmL,MAAMoH,kBAAoB,IAAMC,EAAW1S,UACvDqS,GAAS,GAGb,IAKMQ,EALQH,EAAWtS,MACpBO,KAAI,SAAAmS,GAAQ,OAAI,EAAKzH,MAAM8G,UAAU/R,MAAM2S,MAAK,SAAAxI,GAAI,OAAIA,EAAK/K,IAAMsT,EAAStT,SAC5EmQ,QAAO,SAACpF,GAAD,YAAiClJ,IAATkJ,KAGf5J,KAAI,SAACoR,EAAG/T,GACzB,IAAM4E,EAAQ8P,EAAWtS,MAAMpC,GAAG4E,MAClC,MAAO,CACHgF,EAAGmK,EACH9U,OAAaoE,IAAVuB,EACGA,EAAMqN,eACgB5O,IAAtBqR,EAAWhT,OACPgT,EAAWhT,YACX2B,MAIlB,GAAgC,UAA5B,EAAKmI,MAAM4F,cAAmD,IAAvBsD,EAAW1S,QAAe,CACjE,IAAMgT,EAAoD,CAAC,CACvDpL,EAAG,EAAKyD,MAAM8G,UAAU/R,MAAMuP,QAAO,SAAApF,GAAI,OAAIA,EAAK/K,KAAO,EAAK6L,MAAM+G,SAAU3K,iBAAe,GAC7FxK,EAAG,CAAC,OAER6E,QAAQC,IAAIiR,GACZ,EAAKtI,SAAS,CACVsI,UAAW,EAAK3H,MAAM8G,UAAU/R,MAAMuP,QAAO,SAAApF,GAAI,OAAIA,EAAK/K,KAAO,EAAK6L,MAAM+G,SAAU3K,iBAAe,KAK7G,EAAKiD,SAAS,CACV2H,OAAQA,EACRI,kBAAmB,EAAKpH,MAAMoH,kBAAoB,EAClDxS,QAAQ,GAAD,mBAAM,EAAKoL,MAAMpL,SAAjB,CAA0B4S,IACjCvN,OAAQoN,EAAWpN,SAEpB,oCAAM,EAAK+L,qBAAX,iBAAM,EAAoBI,eAA1B,aAAM,EAA6BwB,eAAe,CAAEC,SAAU,cAEnE,MAAOnB,GACDA,aAAa1O,qBACb,EAAKmG,MAAM2J,uBAAsB,GACjCrR,QAAQsR,MAAM,sCACdtR,QAAQC,IAAI,qBAGZD,QAAQC,IAAIgQ,SA3EhBjQ,QAAQsR,MAAM,oCA7Jc,EA8OpClP,MAAQ,WAAa,IAAD,IAChB,YAAKmH,MAAM+G,gBAAX,SAAqBtT,UACrB,EAAK0K,MAAMmJ,qBAAqB,IAAI,GACpC,EAAKjI,SAAS,CACV2H,YAAQhR,EACRoR,mBAAoB,EACpBxS,QAAS,KAGT,kBAAM,EAAKgS,wBAEf,YAAK5G,MAAM+G,gBAAX,SAAqBvQ,SAAS,EAAKwJ,MAAMzM,MAAMkQ,MAAM,KACrD,EAAKtF,MAAM+I,mBAAkB,IA1PG,EA+PpChP,IA/PoC,sBA+P9B,4BAAAqE,EAAA,8DAC0BvG,IAAxB,EAAKgK,MAAM+G,SADb,uBAEEtQ,QAAQsR,MAAM,mCAFhB,0CAMI,EAAKlP,QANT,OAQF,IACUmO,EAAS,EAAKhH,MAAM+G,SAAS7O,MAEnC,EAAKmH,SAAS,CAAE2H,OAAQA,EAAOnS,QAASuS,mBAAoB,EAAGxS,QAAS,KACxE,EAAKyK,SAAS,CAAE8H,UAAU,IAC5B,MAAOT,GACDA,aAAa1O,sBACb,EAAKmG,MAAM2J,uBAAsB,GACjCrR,QAAQsR,MAAM,sCACdtR,QAAQC,IAAI,qBAjBlB,2CA/P8B,EAqRpCsF,SAAW,WACP,IAAMA,EAAW,EAAKgE,MAAM+G,SAAU/K,WAShC8K,EAAY,CACd/R,MATUiH,EAASjH,MAAMO,KAAI,SAACC,EAAGyS,GAAJ,MAAY,CACzC7T,GAAIoB,EAAEpB,GACNU,QAASU,EAAEV,QACXyK,MAAO/J,EAAEpB,GAAG8T,WACZpI,UAAkB,IAAPmI,EACXnF,WAAW,MAKXvI,MAHU0B,EAAS1B,OAMvB,EAAK+E,SAAS,CACVyH,UAAWA,IACZ,WACC,EAAK3I,MAAM+J,eAAelG,EAAgB8E,IAC1C,EAAK3I,MAAMgK,gBAAgB,WAxSC,EA4SpCC,aAAe,WACX,IAAMC,EAAa,EAAKrI,MAAM2G,aAC9B,EAAKtH,SAAS,CAAEsH,cAAe0B,IAC/B,EAAKlK,MAAMmK,iBAAiBD,GAC5B,EAAKrI,MAAM+G,SAAUjL,kBAAkBuM,GACvC,EAAKxP,SAjT2B,EAoTpCoD,YAAc,WACV,EAAK2K,qBACL,EAAK/N,QAEL,IACI,IAAM0P,EAAqB,EAAKvI,MAAM+G,SAAU9K,cAS1C6K,EAAY,CACd/R,MATUwT,EAAQC,UAAUzT,MAAMO,KAAI,SAACC,GAAD,MAAQ,CAC9CpB,GAAIoB,EAAEpB,GACNU,QAASU,EAAEV,QACXyK,MAAO,IAAM/J,EAAEpB,GAAG8T,WAClBpI,UAAWtK,EAAEpB,KAAOoU,EAAQE,MAAMtU,GAClC0O,WAAW,MAKXvI,MAHUiO,EAAQC,UAAUlO,OAMhC,EAAK+E,SAAS,CACVyH,UAAWA,IACZ,WACC,EAAK3I,MAAM+J,eAAelG,EAAgB8E,OAEhD,MAAOJ,GACDA,aAAagC,oBACb,EAAKvK,MAAMwK,qBAAoB,GAC/BlS,QAAQsR,MAAM,sCACdtR,QAAQC,IAAI,uBAhVY,EAqVpCwF,aAAe,WACX,EAAK0K,qBACL,EAAK/N,QAEL,IAAMoK,EAA6B,EAAKjD,MAAM+G,SAAU7K,eAElD0M,EAAS3F,EAAMwF,MAAMnT,KAAI,SAACC,GAAD,OAAOA,EAAEpB,MAUlC2S,EAAY,CACd/R,MATUkO,EAAMuF,UAAUzT,MAAMO,KAAI,SAACC,GAAD,MAAQ,CAC5CpB,GAAIoB,EAAEpB,GACNU,QAASU,EAAEV,QACXyK,MAAO,IAAM/J,EAAEpB,GAAG8T,WAClBpI,UAAW+I,EAAOC,SAAStT,EAAEpB,IAC7B0O,WAAW,MAKXvI,MAHU2I,EAAMuF,UAAUlO,OAK9B,EAAK+E,SAAS,CACVyH,UAAWA,IACZ,WACC,EAAK3I,MAAM+J,eAAelG,EAAgB8E,IAC1C,EAAK3I,MAAMgK,gBAAgB,aA7WC,EAiXpChM,aAAe,WACX,EAAKyK,qBACL,EAAK/N,QAEL,IAAM0P,EAA+B,EAAKvI,MAAM+G,SAAU5K,eAEpDyM,EAASL,EAAQE,MAAMnT,KAAI,SAAAC,GAAC,OAAIA,EAAEpB,MAYlC2S,EAAY,CACd/R,MATUwT,EAAQC,UAAUzT,MAAMO,KAAI,SAACC,GAAD,MAAQ,CAC9CpB,GAAIoB,EAAEpB,GACNU,QAASU,EAAEV,QACXyK,MAAO,IAAM/J,EAAEpB,GAAG8T,WAAa,MAAQ1S,EAAElB,OACzCwL,UAAW+I,EAAOC,SAAStT,EAAEpB,IAC7B0O,WAAW,MAKXvI,MAHUiO,EAAQC,UAAUlO,OAKhC,EAAK+E,SAAS,CACVyH,UAAWA,IACZ,WACC,EAAK3I,MAAM+J,eAAelG,EAAgB8E,IAC1C,EAAK3I,MAAMgK,gBAAgB,aAxY/B,EAAKnI,MAAQ,CACTzM,MAAO,GACPyT,YAAQhR,EACR+Q,cAAU/Q,EACViP,UAAU,EACVmC,mBAAoB,EACpBxS,QAAS,GACT+R,cAAc,EACdQ,UAAU,EACVlN,YAAQjE,EACR8Q,UAAW3E,EAAgB,EAAKhE,MAAMiE,UACtCuF,eAAW3R,GAdiB,E,qDAoBpC,WAAqB,IAAD,OAChBvE,KAAK0M,MAAM2K,SAAQ,WACf,IAAIC,GAAY,EAMhB,GALA,EAAK5K,MAAMiE,SAAS9H,MAAMzG,SAAQ,SAAAqO,GACX,KAAfA,EAAK5C,QACLyJ,GAAY,OAGfA,EACD,OAAO,EAAKnC,wBAGpBnV,KAAK0M,MAAM6K,YAAYvX,KAAKuK,UAC5BvK,KAAK0M,MAAM8K,eAAexX,KAAKwK,aAC/BxK,KAAK0M,MAAM+K,gBAAgBzX,KAAKyK,cAChCzK,KAAK0M,MAAMgL,gBAAgB1X,KAAK0K,cAChC1K,KAAK0M,MAAMiL,kBAAkB3X,KAAK2W,cAClC3W,KAAK0M,MAAMkL,OAAO5X,KAAKyG,KACvBzG,KAAK0M,MAAMmL,QAAQ7X,KAAKsG,MACxBtG,KAAK0M,MAAMoL,SAAS9X,KAAKoH,OACzBpH,KAAKmV,uB,gCAGT,SAAmB1G,EAAsCC,EAAsCqJ,GACvF/X,KAAKyU,wBAAwB/D,EAAgBjC,EAAUkC,UAAWD,EAAgB1Q,KAAK0M,MAAMiE,YAC7F3Q,KAAKmV,uB,oBAkWb,WAAU,IAAD,OACL,OACI,kBAAC,EAAD,CAAgBrL,MAAO,wCACnB,6BAEI,yBAAK+C,UAAU,6CAEP7M,KAAKuO,MAAMiF,SAEP,kBAAC5E,EAAA,EAAD,CACIf,MAAM,kFACNpC,KAAK,QACLpJ,MAAOrC,KAAKuO,MAAMzM,MAClB+M,SAAU7O,KAAKwV,eACflB,OAAQ,WACJ,EAAK/F,MAAMzM,MAAMT,QAAU,EAAKuM,SAAS,CAAE4F,UAAU,IAAS,kBAAM,EAAK2B,2BAIjF,yBACItI,UAAU,2BACVqC,QAAS,WACL,EAAKtB,SAAS,CAAE4F,UAAU,MAI1BjT,MAAMoJ,KAAK3J,KAAKuO,MAAMzM,OAAO+B,KAAI,SAACmU,EAAMnD,GAAP,OAC7B,0BACIhI,UAAW,4BAA8B,EAAK0B,MAAMoH,oBAAsBd,EAAQ,YAAc,IAChG3P,IAAK2P,GAEJmD,OAOzB,yBAAKnL,UAAU,4BAEetI,IAAtBvE,KAAKuO,MAAMgH,OAAuB,KAC9BvV,KAAKuO,MAAMgH,OACL,kBAAC,IAAD,CAAU3I,MAAO,CAAEqL,MAAO,qBAC1B,kBAAC,IAAD,CAAWrL,MAAO,CAAEqL,MAAO,0BAMjD,yBAAKpL,UAAU,0CACX,yBAAKA,UAAU,uBACX,kBAACoC,EAAA,EAAD,CACIhC,QAAQ,WACRiC,QAASlP,KAAKsG,MAFlB,uBAS4B,OAA5BtG,KAAK0M,MAAM4F,aAEP,yBAAKzF,UAAU,uBACX,kBAACoC,EAAA,EAAD,CACIhC,QAAQ,WACRiC,QAASlP,KAAKyG,KAFlB,yCAOF,qCAGV,yBAAKoG,UAAU,uBACX,kBAACoC,EAAA,EAAD,CACIhC,QAAQ,WACRiC,QAASlP,KAAKoH,OAFlB,sDA4DR,yBAAKyF,UAAU,0CACX,yBAAKA,UAAU,gCACX,kBAACK,EAAA,EAAD,CAAYD,QAAQ,MAApB,+CAG8B,IAA9BjN,KAAKuO,MAAMpL,QAAQ9B,OACf,yBAAKwL,UAAU,qCAIkBtI,IAAzBvE,KAAKuO,MAAM2H,UAEP,yBAAKrJ,UAAU,4BAA4B3H,IAAK,GAC5C,0BAAM2H,UAAU,+BAA+B,GAE3C,kBAACqL,EAAA,EAAD,CACIpO,MAAO,kBAACoD,EAAA,EAAD,CAAYL,UAAU,qBAAqB,MAClD,yBACIA,UAAU,6BACVD,MAAO,CAAEuL,OAAO,GAAD,OAAKnY,KAAKuO,MAAM2H,UAAW9H,UAAY,UAAYpO,KAAKuO,MAAM2H,UAAW9S,QAAU,UAAY,UAA/F,gBAEdpD,KAAKuO,MAAM2H,UAAWrI,SAKrC,8BAIN7N,KAAKuO,MAAMpL,QAAQU,KAAI,SAACP,EAAOuR,GAAR,OACnB,yBAAKhI,UAAU,4BAA4B3H,IAAK2P,GAC5C,0BAAMhI,UAAU,+BAA+BgI,EAAQ,GAEnDvR,EAAMO,KAAI,SAAC4J,EAAMoH,GAAP,OACN,kBAACqD,EAAA,EAAD,CACIpO,MAAO,kBAACoD,EAAA,EAAD,CAAYL,UAAU,0BAAgCtI,IAAXkJ,EAAKtN,EAAkBsN,EAAKtN,EAAEoP,KAAK,MAAQ,KAC7F,yBACI1C,UAAU,6BACVD,MAAO,CAAEuL,OAAO,GAAD,OAAK1K,EAAK3C,EAAEsD,UAAY,UAAYX,EAAK3C,EAAE1H,QAAU,UAAY,UAAjE,gBAEdqK,EAAK3C,EAAE+C,eAQpC,yBAAK9K,IAAK/C,KAAKuU,iBAGnB,yBAAK1H,UAAU,qCAAf,8T,GA7kBPM,IAAMC,Y,SCnEVgL,I,mGACjB,WACI,IAAIC,EAAQD,EAAoBE,WAEhC,OAAO,IAAIC,SAAoB,SAAUC,GACjCA,EAAQH,Q,qBAKpB,SAAQI,GACJ,IAEIC,EAFQN,EAAoBE,WAEfrC,MAAK,SAAAyC,GAAI,OAAIA,EAAKhW,IAAM+V,EAAS/V,MAElD,OAAO,IAAI6V,SAAQ,SAAUC,GACzBA,EAAQE,GAAQ,W,kBAIxB,SAAK5H,EAAclP,EAAc+W,GAC7B,IAAKC,aACD,MAAM,IAAIpU,MAAM,oBAGpB,IAAM6T,EAAQD,EAAoBE,WAC5BO,EAAU/I,KAAKF,IAAL,MAAAE,KAAI,YAAQuI,EAAMxU,KAAI,SAAA6U,GAAI,OAAIA,EAAKhW,QAAO,EACpDoW,EAAaT,EAAMU,WAAU,SAAAL,GAAI,OAAIA,EAAK5H,MAAQA,KAClD4H,EAAO,CAAChW,GAAI,EAAGoO,KAAMA,EAAM4H,KAAM,CAAC9W,MAAOA,EAAO+W,KAAMA,GAAOK,QAAS,UAEzD,GAAfF,GACAJ,EAAKhW,GAAKmW,EACVR,EAAM/V,KAAKoW,KAEXA,EAAKhW,GAAK2V,EAAMS,GAAYpW,GAC5B2V,EAAMS,GAAcJ,GAGxB,IAAIO,EAAaC,KAAKC,UAAUd,GAAO,SAACnT,EAAK7C,GAAN,OAAgBA,aAAiBwH,IAAMtJ,MAAMoJ,KAAKtH,GAASA,KAIlG,OAFAuW,aAAaQ,QA1CJ,QA0CsBH,GAExB,IAAIV,SAAQ,SAAUC,GACzBA,U,uBAIR,WACI,IAAKI,aACD,MAAM,IAAIpU,MAAM,oBAGpB,IAAI6T,EAAgB,GAEpB,IACIA,EAAQa,KAAKG,MAAMT,aAAaU,QAzD3B,UAyDgD,IACvD,MAAOhD,GAEL,OADAtR,QAAQoQ,KAAK,mCAAqCkB,GAC3C,GAGX,OAAO+B,M,MCjEFkB,GAAW,IAAIC,IAAI,oBAKzB,SAASC,KACZ,IAAMC,EAAU,IAAIC,QAKpB,OAHAD,EAAQlO,IAAI,KAAM,KAClBkO,EAAQlO,IAAI,IAAKoG,EAAU,UAAY,IAEhC8H,EAGJ,SAASE,GAAUF,GACtB,MAAO,CACHG,OAAQ,MACRH,QAASA,GCXF,SAASpB,GAASwB,GAC7B,OAAO,IAAIvB,SAAQ,SAAUC,EAASuB,GAClC,IAAMC,EAAMT,GACZS,EAAIC,KDNc,OCOlBD,EAAIE,SAAW,SAEf,IACMC,EAASP,GADCH,MAGhBW,MAAMJ,EAAIK,KAAMF,GACXG,MAAK,SAAAC,GAIF,GAHuB,KAAnBA,EAASC,QACTV,KAECS,EAASE,GACV,MAAM,IAAIjW,MAAM+V,EAASC,OAASD,EAASG,YAG/C,OAAOH,EAASI,UAEnBL,MAAK,SAAAK,GAAI,OAAInC,EAAQmC,MACrBC,OAAM,SAAAtE,GAAK,OAAIyD,EAAOzD,SCtBpB,SAASoC,GAAKmC,EAAsBf,GAC/C,OAAO,IAAIvB,SAAQ,SAAUC,EAASuB,GAClC,IAAMC,EAAMT,GACZS,EAAIC,KFLc,OEMlBD,EAAIE,SAAW,SAEf,IAAMY,EAAO5B,KAAKC,UAAU0B,GAEtBV,EFQP,SAAoBT,EAAkBoB,GAGzC,OAFApB,EAAQlO,IAAI,eAAgB,oBAErB,CACHqO,OAAQ,OACRH,QAASA,EACToB,KAAMA,GEdSC,CADCtB,KACmBqB,GAEnCV,MAAMJ,EAAIK,KAAMF,GACXG,MAAK,SAAAC,GAIF,GAHuB,KAAnBA,EAASC,QACTV,KAECS,EAASE,GACV,MAAM,IAAIjW,MAAM+V,EAASC,OAASD,EAASG,YAG/ClC,OAEHoC,OAAM,SAAAtE,GAAK,OAAIyD,EAAOzD,SCdpB,SAAS0E,GAAQH,EAAyBf,GACrD,OAAO,IAAIvB,SAAQ,SAAUC,EAASuB,GAClC,IAAMC,EAAMT,GACZS,EAAIC,KHZc,OGalBD,EAAIE,SAAW,SACfF,EAAIE,UAAY,IAAMW,EAAQnY,GAE9B,IACMyX,EAASP,GADCH,MAGhBW,MAAMJ,EAAIK,KAAMF,GACXG,MAAK,SAAAC,GAIF,GAHuB,KAAnBA,EAASC,QACTV,KAECS,EAASE,GACV,MAAM,IAAIjW,MAAM+V,EAASC,OAASD,EAASG,YAG/C,OAAOH,EAASI,UAEnBL,MAAK,SAAAK,GAAI,OAAInC,EAAQmC,MACrBC,OAAM,SAAAtE,GAAK,OAAIyD,EAAOzD,S,IC5Bd2E,G,WAGjB,WAAYnB,GAA2B,yBAFtBA,kBAEqB,EAClC9Z,KAAK8Z,aAAeA,E,kFAGxB,WAAcrB,GAAd,mBAAA3N,EAAA,6DACU+P,EAA0B,CAC5BnY,GAAI+V,EAAS/V,IAGbgW,EAAO,KALf,kBAQ+BsC,GAAQH,EAAS7a,KAAK8Z,cARrD,OAQcS,EARd,OAUQ7B,EAAO,CACHhW,GAAI6X,EAAS7X,GACboO,KAAMyJ,EAASzJ,KACf4H,KAAMQ,KAAKG,MAAMkB,EAAS7B,MAC1BM,QAASuB,EAASvB,SAd9B,gDAiBQhU,QAAQsR,MAAR,MAjBR,iCAoBWoC,GApBX,yD,wHAuBA,4BAAA5N,EAAA,6DACQuN,EAA0B,GADlC,kBAIsBC,GAAStY,KAAK8Z,cAJpC,OAIQzB,EAJR,uDAMQrT,QAAQsR,MAAR,MANR,iCASW+B,GATX,yD,+GAYA,WAAWvH,EAAclP,EAAc+W,GAAvC,iBAAA7N,EAAA,6DACUoQ,EAAkBhC,KAAKC,UAAU,CACnCvX,MAAOA,EACP+W,KAAMA,IACP,SAACzT,EAAK7C,GAAN,OAAgBA,aAAiBwH,IAAMtJ,MAAMoJ,KAAKtH,GAASA,KAExDwY,EAAuB,CACzB/J,KAAMA,EACN4H,KAAMwC,GARd,kBAYcC,GAAQN,EAAS7a,KAAK8Z,cAZpC,uDAcQ9U,QAAQsR,MAAR,MAdR,yD,0LC6LW8E,GA/M2D,SAAC,GAMhE,IAJHC,EAIE,EAJFA,KACAC,EAGE,EAHFA,QACAxB,EAEE,EAFFA,aACAyB,EACE,EADFA,mBAEEC,EAAsB,IAAIpD,GAC1BqD,EAAoB,IAAIR,GAAkBnB,GAY1C4B,EAAsB,uCAAG,WAAOjD,GAAP,eAAA3N,EAAA,sEACR2Q,EAAkBT,QAAQvC,GADlB,QACrBC,EADqB,UAIvB6C,EAAmB7C,EAAKA,KAAKC,KAAMD,EAAKA,KAAK9W,OAC7C0Z,KALuB,2CAAH,sDAStBK,EAAwB,uCAAG,WAAOlD,GAAP,eAAA3N,EAAA,sEACV0Q,EAAoBR,QAAQvC,GADlB,QACvBC,EADuB,UAIzB6C,EAAmB7C,EAAKA,KAAKC,KAAMD,EAAKA,KAAK9W,OAC7C0Z,KALyB,2CAAH,sDASxBM,EAAoB,uCAAG,4BAAA9Q,EAAA,6DACzB+Q,GAAyB,GADA,SAGDJ,EAAkBK,eAHjB,OAGnBC,EAHmB,OAIzBC,EAAkBD,GAElBF,GAAyB,GANA,2CAAH,qDASpBI,EAAsB,uCAAG,4BAAAnR,EAAA,sEACH0Q,EAAoBM,eADjB,OACrBC,EADqB,OAE3BG,EAAoBH,GAFO,2CAAH,qDAK5B,EAA4CI,mBAAqB,IAAjE,oBAAOC,EAAP,KAAuBJ,EAAvB,KACA,EAAgDG,mBAAqB,IAArE,oBAAOE,EAAP,KAAyBH,EAAzB,KACA,EAA0DC,oBAAS,GAAnE,oBAAOG,EAAP,KAA8BT,EAA9B,KAUA,OARAU,qBAAU,WACFlB,IACAY,IACAL,OAEL,CAACP,IAIA,kBAACmB,GAAA,EAAD,CAAQnB,KAAMA,EAAMC,QAASA,EAASmB,SAAS,KAAKC,WAAS,GACzD,kBAACC,GAAA,EAAD,KACI,6IAGJ,kBAACC,GAAA,EAAD,KACI,kBAAC5P,EAAA,EAAD,CACIH,UAAU,uBACVI,QAAQ,YAER,kBAAC4P,GAAA,EAAD,CAAMC,OAAK,GAEuB,IAA1BV,EAAe/a,OACX,kBAAC0b,GAAA,EAAD,4JAGE,KAINT,EAEI,yBAAKzP,UAAU,wCACX,kBAACmQ,GAAA,EAAD,CACInQ,UAAU,kDACVoQ,UAAU,OACVhQ,QAAQ,cACRiQ,OAAQ,KAGZ,kBAACF,GAAA,EAAD,CACInQ,UAAU,kDACVoQ,UAAU,OACVhQ,QAAQ,cACRiQ,OAAQ,KAGZ,kBAACF,GAAA,EAAD,CACInQ,UAAU,kDACVoQ,UAAU,OACVhQ,QAAQ,cACRiQ,OAAQ,MAIU,IAA1Bd,EAAe/a,OACX+a,EAAevY,KAAI,SAAA4U,GAAQ,OACvB,kBAAC0E,GAAA,EAAD,CACIjY,IAAKuT,EAAS/V,GACd0a,gBACI,kBAACnO,EAAA,EAAD,CACIhC,QAAQ,YACRxB,KAAK,QACLyD,QAAS,kBAAMwM,EAAuBjD,KAH1C,+CASJ,kBAAC4E,GAAA,EAAD,KACK5E,EAAS3H,UAIpB,KAIkB,IAA5BuL,EAAiBhb,OACb,kBAAC0b,GAAA,EAAD,wKAGE,KAIsB,IAA5BV,EAAiBhb,OACbgb,EAAiBxY,KAAI,SAAA4U,GAAQ,OACzB,kBAAC0E,GAAA,EAAD,CACIjY,IAAKuT,EAAS/V,GACd0a,gBACI,kBAACnO,EAAA,EAAD,CACIhC,QAAQ,YACRxB,KAAK,QACLyD,QAAS,kBAAMyM,EAAyBlD,KAH5C,+CASJ,kBAAC4E,GAAA,EAAD,KACK5E,EAAS3H,UAIpB,KAGV,kBAACiM,GAAA,EAAD,qJAII3c,OAAOkd,QAAQ1M,GAAe/M,KAAI,SAAA0Z,GAAK,OACnC,kBAACJ,GAAA,EAAD,CACIjY,IAAKqY,EAAM,GAAGzM,KACdsM,gBACI,6BACI,kBAACnO,EAAA,EAAD,CACIpC,UAAU,sCACVI,QAAQ,OACRxB,KAAK,QACLyD,QAAS,kBAjKvByJ,EAiKkD4E,EAAM,GAhKlFhC,EAAmB5C,EAAM,CAACrV,MAAO,GAAIuF,MAAO,UAC5CyS,IAFyB,IAAC3C,IA6JU,mFAQA,kBAAC1J,EAAA,EAAD,CACIhC,QAAQ,YACRxB,KAAK,QACLyD,QAAS,kBA7KpByJ,EA6KkD4E,EAAM,GA5KrFhC,EAAmB5C,EAAM,WACzB2C,IAF4B,IAAC3C,IA0KO,gDAUR,kBAAC0E,GAAA,EAAD,CAAcG,QAASD,EAAM,GAAGzM,KAAM2M,UAAWF,EAAM,GAAGxM,oBAO9E,yBAAKlE,UAAU,0BACX,kBAAC6Q,GAAA,EAAD,CAAYrD,KAAK,qDACb,kBAAC,KAAD,CAAYxN,UAAU,qC,wCCR/B8Q,I,OA5LyD,SAAC,GAQ9D,IANHtC,EAME,EANFA,KACAC,EAKE,EALFA,QACAsC,EAIE,EAJFA,QACA9D,EAGE,EAHFA,aACAlY,EAEE,EAFFA,MACA0Q,EACE,EADFA,aAgCEuL,EAAW,uCAAG,4BAAA/S,EAAA,sDAChBgT,GAAoB,GAEhB/B,EAAwB,GAHZ,KAKRgC,EALQ,OAMP,UANO,OASP,YATO,uCAOUtC,EAAkBK,eAP5B,cAORC,EAPQ,oDAUUP,EAAoBM,eAV9B,eAURC,EAVQ,2CAaRiC,EAAa,IAbL,6BAiBhBA,EAAajC,GACb+B,GAAoB,GAlBJ,4CAAH,qDAyBjB,EAA8B3B,mBAA8B,IAAI/D,IAAzDoD,EAAP,qBACA,EAA4BW,mBAA4B,IAAIlB,GAAkBnB,IAAvE2B,EAAP,qBACA,EAAsCU,mBAAiByB,EAAU,QAAU,WAA3E,oBAAOG,EAAP,KAAoBE,EAApB,KACA,EAAkC9B,mBAAqB,IAAvD,oBAAOJ,EAAP,KAAkBiC,EAAlB,KACA,EAAgD7B,oBAAkB,GAAlE,oBAAO+B,EAAP,KAAyBJ,EAAzB,KACA,EAAgC3B,mBAAiB,IAAjD,oBAAOgC,EAAP,KAAiBC,EAAjB,KAkBA,OAhBA7B,qBAAU,WACFlB,IAXJ4C,EAAeL,EAAU,QAAU,WAa/BC,OAEL,CAACxC,IAEJkB,qBAAU,WACNsB,MACD,CAACE,IAEJxB,qBAAU,WACN6B,EAAY,MACb,CAACL,EAAa1C,IAIb,kBAACmB,GAAA,EAAD,CAAQnB,KAAMA,EAAMC,QAASA,GACzB,kBAACqB,GAAA,EAAD,KACI,4FAGJ,kBAACC,GAAA,EAAD,KACI,yBAAK/P,UAAU,uBACX,yBAAKA,UAAU,gCACX,kBAACwR,GAAA,EAAD,CACIC,YAAY,WACZC,WAAS,EACTlc,MAAO0b,EACPlP,SA3FK,SAAC2P,EAAkCnc,GAE5D4b,EADA5b,EAAQA,GAAS0b,KA4FG,kBAACU,GAAA,EAAD,CAAcpc,MAAM,QAAQqc,UAAWd,GAAvC,wCACA,kBAACa,GAAA,EAAD,CAAcpc,MAAM,WAApB,gDAIR,yBAAKwK,UAAU,6BACX,kBAACG,EAAA,EAAD,CACIH,UAAU,mCACVI,QAAQ,YAGJiR,EAEI,yBAAKrR,UAAU,uCACX,kBAACmQ,GAAA,EAAD,CACInQ,UAAU,2CACVoQ,UAAU,OACVhQ,QAAQ,cACRiQ,OAAO,OAGX,kBAACF,GAAA,EAAD,CACInQ,UAAU,2CACVoQ,UAAU,OACVhQ,QAAQ,cACRiQ,OAAO,OAGX,kBAACF,GAAA,EAAD,CACInQ,UAAU,2CACVoQ,UAAU,OACVhQ,QAAQ,cACRiQ,OAAO,QAIf,kBAACL,GAAA,EAAD,CAAMC,OAAK,GAEHf,EAAUlY,KAAI,SAAA4U,GAAQ,OAClB,kBAAC0E,GAAA,EAAD,CACIjY,IAAKuT,EAAS/V,GACdic,gBAAc,GAEd,kBAACC,GAAA,EAAD,CAAgB1P,QAAS,SAAA+F,GAAC,OAnIhD,SAACuJ,EAAqC/F,GAC5D2F,EAAY3F,EAAS3H,MAkIqD+N,CAAkB5J,EAAGwD,KAC/C,kBAAC4E,GAAA,EAAD,CAAcG,QAAS/E,EAAS3H,gBAYxE,kBAAClC,EAAA,EAAD,CACI/B,UAAU,iCACVI,QAAQ,WACRxB,KAAK,QACLoC,MAAM,kFACNxL,MAAO8b,EACPtP,SAlJU,SAACrB,GACvB,IAAMnL,EAAQmL,EAAMG,OAAOtL,MAC3B+b,EAAY/b,MAmJJ,kBAACyc,GAAA,EAAD,KACI,kBAAC7P,EAAA,EAAD,CACIgJ,MAAM,UACN/I,QAnJE,SAACsP,GACnB,OAAQT,GACJ,IAAK,QACDtC,EAAkB/C,KAAKyF,EAAUvc,EAAO0Q,GACxC,MACJ,IAAK,UACDkJ,EAAoB9C,KAAKyF,EAAUvc,EAAO0Q,GAMlDuL,IACAvC,MAoIY,0DAOA,kBAACrM,EAAA,EAAD,CACIgJ,MAAM,UACN/I,QAASoM,GAFb,6C,8CC7KLyD,I,OA5BuC,SAAC,GAAwB,IAAvBnS,EAAsB,EAAtBA,MAAOC,EAAe,EAAfA,UAOrD0B,EZ4gBqB,SAAClN,GAI5B,IAHA,IAAIkU,EAAS,GACPyJ,EAAa,iEACbC,EAAmBD,EAAW3d,OAC3BH,EAAI,EAAGA,EAAIG,EAAQH,IACxBqU,GAAUyJ,EAAWE,OAAOpP,KAAKqP,MAAMrP,KAAKsP,SAAWH,IAE3D,OAAO1J,EYnhBO8J,CAAgB,IAE9BvN,SAASC,OAAT,gBAA2BxD,EAA3B,kCAEA,IAAM+Q,EAAQ,UAVC,+CAUD,wBATM,UASN,sBARI,2EAQJ,yBAPO,mDAOP,0BANQ,OAMR,kBALA,iDAKA,kBAAmJ/Q,GAEjK,OACI,yBAAK1B,UAAS,8BAAyBA,GAAaD,MAAK,gBAAMA,IAC3D,0BAAMC,UAAU,4BAA4BgN,OAAO,OAAO0F,OAAQD,GAC9D,4BAAQzS,UAAU,8BAA8B8L,KAAK,SAAStW,MAAM,8BAChE,yBAAKwK,UAAU,4BAA4B2S,IAAK,kCAAmCC,IAAI,cAClFC,eAAA,IACL,uBAAG7S,UAAU,6BAAb,4BCXL8S,GAVuB,SAAC,GACnC,OAD2C,gBAEvC,yBAAK9S,UAAU,cACX,yBAAKA,UAAU,oBACX,kBAAC,GAAD,SCLV+E,I,OAAY,SAACd,GAAkB,IAAD,EAChC9L,QAAQC,IAAI6M,SAASC,QACrB,IACMF,EADK,YAAQC,SAASC,QACRC,MAAN,YAAiBlB,EAAjB,MACd,GAAqB,IAAjBe,EAAMxQ,OAAc,iBAAOwQ,EAAMxF,aAAb,aAAO,EAAa2F,MAAM,KAAKC,UAkC5C2N,GA/BqB,SAAC,GAAQ,gBACzC,MAAwBzD,mBAAS,WAAjC,oBAAO0D,EAAP,KAAaC,EAAb,KAuBA,OApBAvD,qBAAU,WACN,IAEMwD,EAA0B,CAC5BrG,QAAS,IAAIC,QAAQ,CACjB,GAAM,IACN,EAAK/H,GAAU,aAIR,uCAAG,8BAAA9G,EAAA,sEACSsP,MAVP,6BAU0B2F,GAD5B,cACRxF,EADQ,gBAEKA,EAASyF,OAFd,OAERA,EAFQ,OAIdF,EAAQE,GAJM,2CAAH,qDAOfC,GAAYrF,OAAM,SAAAsF,GAAG,OAAIlb,QAAQC,IAAIib,SAIrC,yBAAKrT,UAAU,aACVgT,ICtBEM,I,OATmC,SAAC,GAC/C,OADuD,gBAEnD,yBAAKtT,UAAU,qBACX,4CACA,kBAAC,KAAD,CAAMjD,GAAG,UAAT,iB,oBC2DGwW,I,OAtDmD,SAAC,GAMxD,IAJHC,EAIE,EAJFA,oBACAC,EAGE,EAHFA,oBACAC,EAEE,EAFFA,sBACA3C,EACE,EADFA,QAEEza,EAAUqd,eAYhB,OACI,kBAACC,GAAA,EAAD,CAAQhd,SAAS,UACb,kBAACid,GAAA,EAAD,CAASzT,QAAQ,SACb,yBAAKJ,UAAU,qBACX,kBAACoC,EAAA,EAAD,CACIpC,UAAU,sBACVoL,MAAM,UACN/I,QAASmR,GAHb,4BAQA,kBAACpR,EAAA,EAAD,CACIpC,UAAU,sBACVoL,MAAM,UACN/I,QAASoR,GAHb,2DASJ,yBAAKzT,UAAU,sBACX,kBAACoC,EAAA,EAAD,CACIpC,UAAU,sBACVoL,MAAM,UACN/I,QAAS0O,EA/BE,WAC3B9L,SAASC,OAAS,4CAClBwO,KAN0B,WAC1Bpd,EAAQb,KAAK,YAoCIsb,EAAU,iCAAU,uCCrD9B,SAAS+C,GAAW9F,GAC/B,OAAO,IAAItC,SAAQ,SAAUC,EAASuB,GAClC,IAAMC,EAAMT,GACZS,EAAIC,KZVa,OYWjBD,EAAIE,SAAW,eACfF,EAAIE,UAAY,IAAMW,EAAQtM,MAE9B6L,MAAMJ,EAAIK,MACLC,MAAK,SAAAC,GACF,IAAKA,EAASE,GACV,MAAM,IAAIjW,MAAM+V,EAASC,OAASD,EAASG,YAG/C,OAAOH,EAASI,UAEnBL,MAAK,SAAAK,GAAI,OAAInC,EAAQmC,MACrBC,OAAM,SAAAtE,GAAK,OAAIyD,EAAOzD,S,WCkBpBsK,GA9BiE,SAAC,GAAqB,IAApBC,EAAmB,EAAnBA,cACxEC,EAAU,uCAAG,8BAAAhW,EAAA,6DACTyD,EAAQqD,EAAU,UAAY,GAEhC2I,EAAW,KAHA,kBAMMoG,GAAW,CAACpS,MAAOA,IANzB,OAMXgM,EANW,OAOXsG,IAPW,uDASX7b,QAAQsR,MAAR,MATW,2BAafxE,SAASC,OAAT,gBAA2BwI,EAASlY,MAApC,mCACAc,EAAQb,KAAK,KAdE,yDAAH,qDAiBhBia,qBAAU,WACNuE,MACD,IAEH,IAAM3d,EAAUqd,eAEhB,OACI,+B,UCZKO,GAAa,SAACrU,GAEvB,MAA8ByP,mBAAS6E,iBAAuB,OAA9D,oBAAOC,EAAP,KAEA,GAFA,KAE8B9E,mBAAkB,CAC5CtT,MAAO,CACHqY,OAAQ,CACJC,SAAS,EACTxI,KAAM,WACNyI,UAAW,IASfnJ,MAAO,UACPoJ,MAAO,GACPC,OAAQ,CACJ1X,GAAI,CACAuX,SAAS,EACTI,YAAa,KAGrBlgB,OAAQ,KAEZmgB,aAAc,CACVL,SAAS,EACTM,QAAS,SAASC,EAAcC,GAC5BC,MAAM,uBAIdC,OAAQ,CAACC,gBAAe,GACxBxe,MAAO,CACHye,gBAAiB,CACbC,eAAe,GAEnBC,MAAO,SACPC,KAAM,oBACNC,oBAAoB,EACpB1W,KAAM,GACN2W,YAAc,EACdnK,MAAO,CACHoK,WAAY,UACZlK,OAAQ,UACRmK,UAAW,CACPnK,OAAQ,UACRkK,WAAY,aAKxBE,QAAS,CACLpB,SAAS,MApDjB,oBAAOqB,EAAP,KAwDA,GAxDA,KAwD0BrG,mBAAS,KAAnC,oBAEA,GAFA,UAEgCA,mBAAgB,CAAEtT,MAAO,GAAIvF,MAAO,MAApE,oBAEA,GAFA,UAEsC6J,IAAMgP,SAA4C,OAAxF,oBAAOsG,EAAP,KAAoBC,EAApB,KAEMC,EAAoB,SAACnV,GACvBA,EAAMoV,iBACNF,EACoB,OAAhBD,EACM,CACEI,OAAQrV,EAAMsV,QAAU,EACxBC,OAAQvV,EAAMwV,QAAU,GAK5B,OAINC,EAAc,WAChBP,EAAe,OAGnBnG,qBAAU,WAENzK,SAASoR,iBAAiB,WAAW,SAAC1V,GAC9Bd,EAAMyW,QAAQxO,SACVnH,EAAM4V,SACN1W,EAAMyW,QAAQxO,QAAQ0O,iBAKlCvR,SAASoR,iBAAiB,SAAS,SAAC1V,GAC5Bd,EAAMyW,QAAQxO,SACdjI,EAAMyW,QAAQxO,QAAQ2O,wBAKlCC,2BAAgB,WAERtC,EAAQtM,UACRjI,EAAMyW,QAAQxO,QAAU,IAAI6O,IAAQvC,EAAQtM,QAASjI,EAAM+W,KAAMjB,IAGrEkB,OAAOR,iBAAiB,eAAe,SAAAjO,GAAC,OAAIA,EAAE2N,oBAgB1ClW,EAAMyW,QAAQxO,UACdjI,EAAMyW,QAAQxO,QAAQgP,GAAG,cAAejX,EAAMkX,eAC9ClX,EAAMyW,QAAQxO,QAAQgP,GAAG,QAASjX,EAAMmX,UACxCnX,EAAMyW,QAAQxO,QAAQgP,GAAG,QAASjX,EAAMoX,UACxCpX,EAAMyW,QAAQxO,QAAQgP,GAAG,QAASjX,EAAMqX,UACxCrX,EAAMyW,QAAQxO,QAAQgP,GAAG,QAASjX,EAAMsX,aAO7C,CAAC/C,EAASvU,EAAMyW,QAASzW,EAAM+W,KAAMjB,IAExC,IAAMyB,EAAe,WACjB,OACI,yBACIrX,MAAO,CACHsQ,OAAQ,OACRmE,MAAO,QAEXte,IAAKke,KAKjB,YAC0B1c,IAAtBmI,EAAM+V,YAEEwB,IAEA,yBAAKC,cAAevB,EACf/V,MAAO,CACHsQ,OAAQ,OACRmE,MAAO,SAEX4C,IACD,kBAACE,GAAA,EAAD,CACI9I,KAAsB,OAAhBoH,EACNnH,QAAS2H,EACTmB,gBAAgB,iBAChBC,eACoB,OAAhB5B,EACM,CAAE6B,IAAK7B,EAAYM,OAAQwB,KAAM9B,EAAYI,aAC7Cte,GAGTmI,EAAM+V,YAAYQ,EAAaN,M,oBC/LlD/V,GAAQ,CACVnJ,SAAU,WACV6gB,IAAK,MACLC,KAAM,MACNC,UAAW,wBACXnD,MAAO,IACPoD,QAAS,mBACTtM,OAAQ,iBACRuM,UAAW,GACXlkB,EAAG,GAGMmkB,GAAwB,SAACjY,GAClC,MAAwBS,YAAe,GAAvC,oBAAOkO,EAAP,KAAauJ,EAAb,KAUA,OAPArI,qBAAU,WACF7P,EAAMmY,qBACND,EAAQlY,EAAMmY,oBACdnY,EAAM2J,uBAAsB,OAKhC,2BACI,gBAACyO,GAAA,EAAD,CACIzJ,KAAMA,EACNC,QAbQ,kBAAMsJ,GAAQ,IActBG,kBAAgB,oBAChBC,mBAAiB,2BAEjB,gBAACC,GAAA,EAAD,CAAKC,GAAItY,IACL,gBAACM,EAAA,EAAD,CAAYxK,GAAG,oBAAoBuK,QAAQ,KAAKkY,UAAU,MAA1D,wCAGA,gBAACjY,EAAA,EAAD,CAAYxK,GAAG,0BAA0BwiB,GAAI,CAAEE,GAAI,IAAnD,sFASPC,GAAsB,SAAC3Y,GAChC,MAAwBS,YAAe,GAAvC,oBAAOkO,EAAP,KAAauJ,EAAb,KAUA,OAPArI,qBAAU,WACF7P,EAAM4Y,mBACNV,EAAQlY,EAAM4Y,kBACd5Y,EAAMwK,qBAAoB,OAK9B,2BACI,gBAAC4N,GAAA,EAAD,CACIzJ,KAAMA,EACNC,QAbQ,kBAAMsJ,GAAQ,IActBG,kBAAgB,oBAChBC,mBAAiB,2BAEjB,gBAACC,GAAA,EAAD,CAAKC,GAAItY,IACL,gBAACM,EAAA,EAAD,CAAYxK,GAAG,oBAAoBuK,QAAQ,KAAKkY,UAAU,MAA1D,wCAGA,gBAACjY,EAAA,EAAD,CAAYxK,GAAG,0BAA0BwiB,GAAI,CAAEE,GAAI,IAAnD,mJCLPjT,GAAsBhF,IAAMoY,cAAmC,MAE/DC,GAAiB,CAC1Bje,KAAO,aACPgD,SAAW,aACXC,YAAc,aACdC,aAAe,aACfC,aAAe,cAGN+a,GAAgB,CACzBC,eAAiB,aACjBjf,IAAM,aACNH,KAAO,aACPc,MAAQ,cAoBCue,GAAS,SAACjZ,GAAwB,IAAD,EACpCkZ,EAASzY,IAAMqH,YACrB,MAC2B,OAAvB9H,EAAM4F,cAAyB5F,EAAMmZ,oBAEjC,yBAAKhZ,UAAU,mBAAf,UAEQH,EAAM5E,WAFd,aAEQ,EAAWjE,KAAI,SAACxB,EAAOwS,GAAR,aACX,yBACIhI,UAAU,gBACVD,MAAO,CAAEuL,OAAO,GAAD,OAAKtD,IAAUnI,EAAMoZ,IAAM,UAAY,UAAvC,gBAEdhW,KAAKiW,IAAIjW,KAAKiW,IAAIlR,GAAS/E,KAAKiW,IAAIrZ,EAAMoZ,OAAU,EAC/C,yBAAK/iB,IAAK6iB,IACV,8BAELvjB,EARL,OASKujB,QATL,IASKA,GATL,UASKA,EAAQjR,eATb,aASK,EAAiBwB,eAAe,CAAEC,SAAU,gBAK3D,+BAkqBC4P,G,kDAzpBX,WAAYtZ,GAAkB,IAAD,8BACzB,cAAMA,IAJVkZ,OAASzY,IAAMqH,YAGc,EAF7B2O,QAAUhW,IAAMqH,YAEa,EAmD7B6B,sBAAwB,SAACvS,GAAD,OAAgB,EAAK8J,SAAS,CAAEqY,sBAAuBniB,KAnDlD,EAqD7BoT,oBAAsB,SAACpT,GAAD,OAAgB,EAAK8J,SAAS,CAAEsY,oBAAqBpiB,KArD9C,EA6D7BqiB,WAAa,EA7DgB,EAgE7BC,qBAAuB,WACnBtU,SAASoR,iBAAiB,WAAW,SAAC1V,GAIhB,MAAdA,EAAMtI,KAAesI,EAAM4V,UAC3B5V,EAAMoV,iBACN,EAAKyD,sBAvEY,EAkF7BA,eAAiB,WACb,EAAKzY,SAAS,CAAE0Y,gBAAgB,KAnFP,EAsF7BC,gBAAkB,WACd,EAAK3Y,SAAS,CAAE0Y,gBAAgB,KAvFP,EA0F7BE,kBAAoB,WAChB,EAAK5Y,SAAS,CAAE6Y,mBAAmB,KA3FV,EA8F7BC,mBAAqB,WACjB,EAAK9Y,SAAS,CAAE6Y,mBAAmB,KA/FV,EAkG7BE,MAAQ,WACJ,EAAK/Y,SAAS,CAAEgQ,SAAS,KAnGA,EAsG7BgJ,OAAS,WACL,EAAKhZ,SAAS,CAAEgQ,SAAS,KAvGA,EA0G7BiJ,aAAe,SAACC,GACZ,EAAKlZ,SAAS,CAAEkZ,OAAQA,KA3GC,EA+G7BC,YAAc,WrBnHW,IAACpW,EAAoBjB,EAApBiB,EqBoHR,EAAKpC,MAAMoC,SrBpHiBjB,EqBoHP,EAAKnB,MAAM+D,arBnHlD3B,EAAS9H,MAAMzG,SAAQ,SAACqO,GACpBE,EAAS9H,MAAMme,OAAO,CAClBtkB,GAAI+N,EAAK/N,GACTmL,MAAO4B,EAAmBgB,EAAK3H,YAAa4G,QAIpDiB,EAASrN,MAAMlB,SAAQ,SAACqL,GACpB,IAAMwZ,EACFxZ,EAAKI,MACAmE,MAAM,IACNa,QAAO,SAAA3B,GAAC,MAAU,MAANA,GAAmB,OAANA,KACzB3B,KAAK,IACLyC,MAAM,KACTpP,OAA4B2B,IAAnB0iB,EAAY,GAAmBA,EAAY,QAAK1iB,EAC/DkJ,EAAK7K,OAASA,EAEd,IAAMuV,EAAS1K,EAAKW,UAAY,UAAYX,EAAKrK,QAAU,UAAY,UACjEif,EAAa5U,EAAK2D,UAAY,UAAY,UAC1CgR,EACO,IADPA,EAEO,EAFPA,EAGS,EAGfzR,EAASrN,MAAM0jB,OAAO,CAClBtkB,GAAI+K,EAAK/K,GAGTuV,MAAO,CACHoK,WAAYA,EACZlK,OAAQA,EACRmK,UAAW,CACPnK,OAAQA,EACRkK,WAAYA,IAGpBD,YAAa3U,EAAKW,WAAaX,EAAKrK,QAAUgf,EAAsBA,EACpE8E,oBAAqB9E,QqBnCA,EAmH7B1U,gBAAkB,SAAChL,EAAYmL,GAC3B,EAAKU,MAAMoC,SAASrN,MAAMlB,SAAQ,SAACqL,GAC/B,GAAIA,EAAK/K,KAAOA,EAAI,CAChB,IAAMukB,EACFpZ,EACKmE,MAAM,IACNa,QAAO,SAAA3B,GAAC,MAAU,MAANA,GAAmB,OAANA,KACzB3B,KAAK,IACLyC,MAAM,KACTpP,OAA4B2B,IAAnB0iB,EAAY,GAAmBA,EAAY,GAAK,GAC/D,EAAK1Y,MAAMoC,SAASrN,MAAM0jB,OAAO,CAC7BtkB,GAAI+K,EAAK/K,GACTmL,MAAOA,EACPjL,OAAQA,QAIpB,EAAKmkB,eApIoB,EAwI7BhZ,mBAAqB,SAACrL,EAAYU,GAC9B,EAAKmL,MAAMoC,SAASrN,MAAMlB,SAAQ,SAACqL,GAC3BA,EAAK/K,KAAOA,GACZ,EAAK6L,MAAMoC,SAASrN,MAAM0jB,OAAO,CAC7BtkB,GAAI+K,EAAK/K,GACTU,QAASA,OAIrB,EAAK2jB,eAjJoB,EAoJ7B5Y,qBAAuB,SAACzL,EAAY0L,GAChC,EAAKG,MAAMoC,SAASrN,MAAMlB,SAAQ,SAACqL,GAC3BA,EAAK/K,KAAOA,GACZ,EAAK6L,MAAMoC,SAASrN,MAAM0jB,OAAO,CAC7BtkB,GAAI+K,EAAK/K,GACT0L,UAAWA,OAIvB,EAAK2Y,eA7JoB,EAiK7BlR,qBAAuB,SAACsR,EAAe/V,GACnC,EAAK7C,MAAMoC,SAASrN,MAAMlB,SAAQ,SAACqL,GAC3BA,EAAK2D,WACL,EAAK7C,MAAMoC,SAASrN,MAAM0jB,OAAO,CAC7BtkB,GAAI+K,EAAK/K,GACT0O,WAAW,OAIvB,EAAK7C,MAAMoC,SAASrN,MAAMlB,SAAQ,SAACqL,GAC3B0Z,EAAI/P,SAAS3J,EAAK/K,KAClB,EAAK6L,MAAMoC,SAASrN,MAAM0jB,OAAO,CAC7BtkB,GAAI+K,EAAK/K,GACT0O,UAAWA,OAIvB,EAAK2V,eAlLoB,EAqL7BK,WAAa,SAACnS,GACV,EAAKkR,aACL,IAAM1Y,EAAO,CACT/K,GAAI,EAAKyjB,WACTtY,MAAO,IAAO,EAAKsY,WACnBjV,EAAG+D,EAAE/N,QAAQmgB,OAAOnW,EACpBC,EAAG8D,EAAE/N,QAAQmgB,OAAOlW,EACpB/N,SAAS,EACTgL,WAAW,EACXgD,WAAW,GAEf,EAAK7C,MAAMoC,SAASrN,MAAMiI,IAAIkC,IAhML,EAmM7B6Z,WAAa,SAACrS,GACV,IAAMsS,EAAqBtS,EAAE3R,MACvBkkB,EAAgB,EAAKjZ,MAAMoC,SAASrN,MAAMb,IAAI8kB,GACpD,EAAK3Z,SAAS,CAAE6Z,aAAcD,EAAc,MAtMnB,EA0M7BE,aAAe,SAACzS,GAEY,IADGA,EAAE3R,MAChBjC,QACT,EAAKuM,SAAS,CAAE6Z,aAAc,QA7MT,EAiN7BnZ,WAAa,SAAC5L,GACV,EAAK6L,MAAMoC,SAASrN,MAAMqkB,OAAOjlB,GAEjC,IAAIklB,EAAoB,GACxB,EAAKrZ,MAAMoC,SAAS9H,MAAMzG,SAAQ,SAACqO,GAC3BA,EAAK9G,OAASjH,GAAM+N,EAAK7G,KAAOlH,GAChCklB,EAAQtlB,KAAKmO,EAAK/N,OAG1B,EAAK6L,MAAMoC,SAAS9H,MAAM8e,OAAOC,IA1NR,EA6N7BC,WAAa,SAAC5S,GACV,IAAM6S,EAAqB7S,EAAEpM,MACvBkf,EAAgB,EAAKxZ,MAAMoC,SAAS9H,MAAMpG,IAAIqlB,GACpD,EAAKla,SAAS,CAAEoa,aAAcD,EAAc,MAhOnB,EAmO7BE,aAAe,SAAChT,GAEY,IADGA,EAAEpM,MAChBxH,QACT,EAAKuM,SAAS,CAAEoa,aAAc,QAtOT,EA2O7BE,qBAAuB,SAACxlB,EAAYoG,GAChC,EAAKyF,MAAMoC,SAAS9H,MAAMme,OAAO,CAC7BtkB,GAAIA,EACJmL,MAAO4B,EAAmB3G,EAAa,EAAKyF,MAAM+D,cAClDxJ,YAAaA,KA/OQ,EAmP7BwK,WAAa,SAAC5Q,GACV,EAAK6L,MAAMoC,SAAS9H,MAAM8e,OAAOjlB,IApPR,EAuP7BoT,OAAS,SAAChO,EAAege,GACrB,EAAKlY,SAAS,CAAE9F,IAAKA,EAAKge,IAAKA,KAxPN,EA2P7BqC,eAAiB,SAACxF,EAAwBM,GACtC,OACI,yBAAKiB,cAAevB,GAChB,yBAAKzT,QAAS+T,GACV,4BACIpW,UAAW,sBACXqC,QAASuW,GAAcnf,MAEtB,uBAGT,yBAAK4I,QAAS+T,GACV,4BACIpW,UAAW,sBACXqC,QAASuW,GAAchf,KAEtB,yCAGT,yBAAKyI,QAAS+T,GACV,4BACIpW,UAAW,sBACXqC,QAASuW,GAAcre,OAEtB,mCAGT,yBAAK8H,QAAS+T,GACV,4BACIpW,UAAW,sBACXqC,QAASsW,GAAejb,UAEvB,6CA3RQ,EAoS7B6d,eAAiB,SAACzF,EAAwBM,GACtC,OACI,yBAAKiB,cAAevB,GAChB,yBAAKzT,QAAS+T,GACV,4BACIpW,UAAW,sBACXqC,QAASuW,GAAcnf,MAEtB,uBAGT,yBAAK4I,QAAS+T,GACV,4BACIpW,UAAW,sBACXqC,QAASuW,GAAchf,KAEtB,yCAGT,yBAAKyI,QAAS+T,GACV,4BACIpW,UAAW,sBACXqC,QAASuW,GAAcre,OAEtB,mCAGT,yBAAK8H,QAAS+T,GACV,4BACIpW,UAAW,sBACXqC,QAASsW,GAAehb,aAEvB,qFApUQ,EA2U7B6d,iBAAmB,SAAC1F,EAAwBM,GACxC,OACI,yBAAKiB,cAAevB,GAChB,yBAAKzT,QAAS+T,GACV,4BACIpW,UAAW,sBACXqC,QAASuW,GAAcnf,MAEtB,uBAGT,yBAAK4I,QAAS+T,GACV,4BACIpW,UAAW,sBACXqC,QAASuW,GAAchf,KAEtB,yCAGT,yBAAKyI,QAAS+T,GACV,4BACIpW,UAAW,sBACXqC,QAASuW,GAAcre,OAEtB,mCAGT,yBAAK8H,QAAS+T,GACV,4BACIpW,UAAW,sBACXqC,QAASsW,GAAe9a,cAEvB,yBA3WQ,EAkX7B4d,iBAAmB,SAAC3F,EAAwBM,GACxC,OACI,yBAAKiB,cAAevB,GAChB,yBAAKzT,QAAS+T,GACV,4BACIpW,UAAW,sBACXqC,QAASuW,GAAcnf,MAEtB,uBAGT,yBAAK4I,QAAS+T,GACV,4BACIpW,UAAW,sBACXqC,QAASuW,GAAchf,KAEtB,yCAGT,yBAAKyI,QAAS+T,GACV,4BACIpW,UAAW,sBACXqC,QAASuW,GAAcre,OAEtB,mCAGT,yBAAK8H,QAAS+T,GACV,4BACIpW,UAAW,sBACXqC,QAASsW,GAAe/a,cAEvB,+BAlZQ,EAyZ7B8d,eAAiB,SAAC5F,EAAwBM,GACtC,OACI,yBAAKiB,cAAevB,GAChB,yBAAKzT,QAAS+T,GACV,4BACIpW,UAAW,sBACXqC,QAASuW,GAAcnf,MAEtB,uBAGT,yBAAK4I,QAAS+T,GACV,4BACIpW,UAAW,sBACXqC,QAASuW,GAAchf,KAEtB,yCAGT,yBAAKyI,QAAS+T,GACV,4BACIpW,UAAW,sBACXqC,QAASuW,GAAcre,OAEtB,mCAGT,yBAAK8H,QAAS+T,GACV,4BACIpW,UAAW,sBACXqC,QAASuW,GAAcC,gBAGtB,EAAKnX,MAAM2G,aAAe,8CAAa,0EA1b/B,EAic7BsT,mBAAqB,SAAC7F,EAAwBM,GAC1C,OACI,yBAAKiB,cAAevB,GAChB,yBAAKzT,QAAS+T,GACV,4BACIpW,UAAW,sBACXqC,QAASuW,GAAcnf,MAEtB,uBAGT,yBAAK4I,QAAS+T,GACV,4BACIpW,UAAW,sBACXqC,QAASuW,GAAchf,KAEtB,yCAGT,yBAAKyI,QAAS+T,GACV,4BACIpW,UAAW,sBACXqC,QAASuW,GAAcre,OAEtB,qCAzdQ,EAue7BqhB,YAAc,SAACnW,GACX,OAAQA,GACJ,IAAK,MACL,IAAK,UACD,OAAO,EAAK6V,eAEhB,IAAK,MACD,OAAO,EAAKC,eAEhB,IAAK,QACL,IAAK,SACD,OAAO,EAAKC,iBAEhB,IAAK,QACL,IAAK,SACD,OAAO,EAAKC,iBAEhB,IAAK,MACL,IAAK,OACD,OAAO,EAAKC,eAEhB,QACI,OAAO,EAAKC,qBA1fpB,EAAKja,MAAQ,CACT+D,aAAc,KAEdmV,aAAc,KACdO,aAAc,KACdU,YAAY,EACZ/X,SAAU,CAAErN,MAAO,IAAIkN,IAAiB3H,MAAO,IAAI2H,KACnDgS,QAAS,CACL3Z,MAAO,CACHqY,OAAQ,CACJC,SAAS,EACTxI,KAAM,WACNyI,UAAW,IAEf/f,OAAQ,KAEZiC,MAAO,CACH2e,MAAO,MACPC,KAAM,oBACNC,oBAAoB,EACpBwG,gBAAiB,GACjB1Q,MAAO,MACP2Q,iBAAkB,IAEtBrG,QAAS,CACLpB,SAAS,IAGjB0H,qBAAqB,EACrB/B,OAAQ,KACRR,gBAAgB,EAChBG,mBAAmB,EACnB7I,SAAS,EACT9V,SAAKvD,EACLuhB,SAAKvhB,EACLshB,qBAAqB,EACrB3Q,cAAc,EAEd+Q,uBAAuB,EACvBC,qBAAqB,GA1CA,E,qDAuD7B,WACIlmB,KAAK+mB,cAEL/mB,KAAKwmB,sB,oBAwcT,WAAU,IAAD,OACL,OACI,kBAAC,KAAD,KACI,kBAAC,KAAD,KACI,kBAAC,KAAD,CAAOsC,KAAK,UACR,kBAAC,GAAD,OAEJ,kBAAC,KAAD,CAAOA,KAAK,SACR,kBAAC,GAAD,OAEJ,kBAAC,KAAD,CAAOA,KAAK,iBACR,kBAAC,GAAD,OAEJ,kBAAC,KAAD,CAAOA,KAAK,kBACR,kBAAC,GAAD,CAAkBjI,cAAe7gB,KAAK2mB,SAE1C,kBAAC,KAAD,CAAOmC,KAAK,KACR,kBAAC3W,GAAoB4W,SAArB,CAA8B1mB,MAAOrC,KAAKuO,MAAM+D,cAC5C,yBAAKzF,UAAU,OACX,kBAAC,GAAD,CACIwO,KAAMrb,KAAKuO,MAAMkY,kBACjBnL,QAAStb,KAAK0mB,mBACd5M,aAAc9Z,KAAK4mB,OACnBrL,mBAAoB,SAACjJ,EAAc1Q,GAE/B,IAAMqP,EAAerP,GAASgP,EAAc0B,GAAerB,aAE3DjM,QAAQC,IAAIgM,GACZjM,QAAQC,IAAIgM,EAAY,OACxBV,EAAgBU,GAAc3N,MAAMlB,SAAQ,SAAC0B,GAAD,OAAOkB,QAAQC,IAAInB,MAE/D,EAAKqiB,WAAalV,EAAa3N,MAAMjC,OACrC,EAAKuM,SAAS,CACV0E,aAAcA,EACd3B,SAAUJ,EAAgBU,KAExB,kBAAM,EAAK8V,oBAKxB/mB,KAAKuO,MAAMuY,OAEZ,kBAAC,GAAD,CAAczL,KAAMrb,KAAKuO,MAAM+X,eAC3BhL,QAAStb,KAAKumB,gBACd3I,QAAS5d,KAAKuO,MAAMqP,QACpB9D,aAAc9Z,KAAK4mB,OACnBhlB,MAAO8O,EAAgB1Q,KAAKuO,MAAMoC,UAClC2B,aAActS,KAAKuO,MAAM+D,eAE7B,yBAAKzF,UAAU,kBACX,kBAACG,EAAA,EAAD,CAAOH,UAAU,OAAOI,QAAQ,YAAhC,mHAGA,kBAACD,EAAA,EAAD,CAAOH,UAAU,OAAOI,QAAQ,YAAhC,oLAGA,kBAACD,EAAA,EAAD,CAAOH,UAAU,OAAOI,QAAQ,YAAhC,8MAGA,kBAACD,EAAA,EAAD,CAAOH,UAAU,OAAOI,QAAQ,YAAhC,6LAIJ,kBAAC,GAAD,CACI4X,mBAAoB7kB,KAAKuO,MAAM0X,sBAC/B5P,sBAAuBrW,KAAKqW,wBAEhC,kBAAC,GAAD,CACIiP,iBAAkBtlB,KAAKuO,MAAM2X,oBAC7BhP,oBAAqBlX,KAAKkX,sBAE9B,kBAAC,GAAD,CACI5E,aAActS,KAAKuO,MAAM+D,aACzBuT,oBAAqB7lB,KAAKuO,MAAMsX,oBAChC/d,IAAK9H,KAAKuO,MAAMzG,IAChBge,IAAK9lB,KAAKuO,MAAMuX,MAGpB,kBAAC,GAAD,CACIzF,oBAAqBrgB,KAAKwmB,kBAC1BlG,oBAAqBtgB,KAAKqmB,eAC1B9F,sBAAuBvgB,KAAK4mB,OAC5BhJ,QAAS5d,KAAKuO,MAAMqP,UAIxB,yBAAK/Q,UAAU,oBACX,kBAAC,GAAD,CACIvJ,MAAOtD,KAAKuO,MAAMoC,SAASrN,MAC3BuF,MAAO7I,KAAKuO,MAAMoC,SAAS9H,MAC3B4a,KAAMzjB,KAAKuO,MAAMoC,SACjBiT,cAAe5jB,KAAKonB,WACpBvD,SAAU7jB,KAAK6nB,WACf/D,SAAU9jB,KAAKsnB,WACfvD,SAAU/jB,KAAK0nB,aACf1D,SAAUhkB,KAAKioB,aACf9E,QAASnjB,KAAKmjB,QACdV,YAAaziB,KAAKyoB,YAAYzoB,KAAKuO,MAAM+D,iBAIjD,yBAAKzF,UAAU,mBACX,kBAAC,EAAD,CACIY,KAAMzN,KAAKuO,MAAMkZ,aACjB/Z,gBAAiB1N,KAAK0N,gBACtBK,mBAAoB/N,KAAK+N,mBACzBI,qBAAsBnO,KAAKmO,qBAC3BG,WAAYtO,KAAKsO,WACjBL,eAAgBuX,GAAeje,OAEnC,kBAAC,EAAD,CACIkJ,KAAMzQ,KAAKuO,MAAMyZ,aACjB3U,sBAAuBrT,KAAKkoB,qBAC5B5U,WAAYtT,KAAKsT,WACjBhB,aAActS,KAAKuO,MAAM+D,aACzBrE,eAAgBuX,GAAeje,OAEnC,kBAAC,GAAD,CACIuO,OAAQ9V,KAAK8V,OACbnF,SAAU3Q,KAAKuO,MAAMoC,SACrBkF,qBAAsB7V,KAAK6V,qBAC3BsN,QAASnjB,KAAKmjB,QACd9L,QAAS,SAAC2R,GAAD,OAAmBxD,GAAeje,KAAOyhB,GAClDzR,YAAa,SAACyR,GAAD,OAAmBxD,GAAejb,SAAWye,GAC1DxR,eAAgB,SAACwR,GAAD,OAAmBxD,GAAehb,YAAcwe,GAChEvR,gBAAiB,SAACuR,GAAD,OAAmBxD,GAAe/a,aAAeue,GAClEtR,gBAAiB,SAACsR,GAAD,OAAmBxD,GAAe9a,aAAese,GAClEvS,eAAgB,SAAC9F,GAAD,OAAwB,EAAK/C,SAAS,CAAE+C,SAAUA,IAAY,kBAAM,EAAKoW,kBACzFrQ,gBAAiB,SAACiC,GAAD,OAA+B,EAAK/K,SAAS,CAAE0E,aAAcqG,KAC9ElD,kBAAmB,SAAC+E,GAAD,OAAqB,EAAK5M,SAAS,CAAEiY,oBAAqBrL,KAC7E3D,gBAAiB,SAAC3B,GAAD,OAA2B,EAAKtH,SAAS,CAAEsH,aAAcA,KAC1EyC,kBAAmB,SAACqR,GAAD,OAAmBvD,GAAcC,eAAiBsD,GACrEpR,OAAQ,SAACoR,GAAD,OAAmBvD,GAAchf,IAAMuiB,GAC/CnR,QAAS,SAACmR,GAAD,OAAmBvD,GAAcnf,KAAO0iB,GACjDlR,SAAU,SAACkR,GAAD,OAAmBvD,GAAcre,MAAQ4hB,GACnD3S,sBAAuBrW,KAAKqW,sBAC5Ba,oBAAqBlX,KAAKkX,gC,GAhpBhD/J,IAAMC,WC7HxB6b,IAASC,OACL,kBAAC,IAAMC,WAAP,KACI,kBAAC,GAAD,OAGJrX,SAASsX,eAAe,U,gCCR5B5nB,EAAQC,YAAa,EAErB,SAAW0G,GACPA,EAAKA,EAAI,EAAQ,GAAK,IACtBA,EAAKA,EAAI,EAAQ,GAAK,IAF1B,CAGU3G,EAAQ2G,OAAS3G,EAAQ2G,KAAO,M,gCCL1C,IAAIpI,EAAaC,MAAQA,KAAKD,WAAe,WACzC,IAAIE,EAAgB,SAAUC,EAAGC,GAI7B,OAHAF,EAAgBG,OAAOC,gBAClB,CAAEC,UAAW,cAAgBC,OAAS,SAAUL,EAAGC,GAAKD,EAAEI,UAAYH,IACvE,SAAUD,EAAGC,GAAK,IAAK,IAAIK,KAAKL,EAAOA,EAAEM,eAAeD,KAAIN,EAAEM,GAAKL,EAAEK,MACpDN,EAAGC,IAE5B,OAAO,SAAUD,EAAGC,GAEhB,SAASO,IAAOV,KAAKW,YAAcT,EADnCD,EAAcC,EAAGC,GAEjBD,EAAEU,UAAkB,OAANT,EAAaC,OAAOS,OAAOV,IAAMO,EAAGE,UAAYT,EAAES,UAAW,IAAIF,IAV1C,GAa7Cc,EAAQC,YAAa,EACrB,IAAI8E,EAAkC,SAAU5E,GAE5C,SAAS4E,IACL,IAAIxE,EAAQJ,EAAOL,KAAKtB,OAASA,KAGjC,OAFA+B,EAAM+O,KAAO,mBACb1Q,OAAOC,eAAe0B,EAAOwE,EAAiB3F,WACvCmB,EAEX,OAPAhC,EAAUwG,EAAkB5E,GAOrB4E,EAR2B,CASpC/B,OACFhD,EAAQ+E,iBAAmBA,EAC3B,IAAI0Q,EAAgC,SAAUtV,GAE1C,SAASsV,IACL,IAAIlV,EAAQJ,EAAOL,KAAKtB,OAASA,KAGjC,OAFA+B,EAAM+O,KAAO,iBACb1Q,OAAOC,eAAe0B,EAAOkV,EAAerW,WACrCmB,EAEX,OAPAhC,EAAUkX,EAAgBtV,GAOnBsV,EARyB,CASlCzS,OACFhD,EAAQyV,eAAiBA,G,gCCnCzB,IAAIlX,EAAaC,MAAQA,KAAKD,WAAe,WACzC,IAAIE,EAAgB,SAAUC,EAAGC,GAI7B,OAHAF,EAAgBG,OAAOC,gBAClB,CAAEC,UAAW,cAAgBC,OAAS,SAAUL,EAAGC,GAAKD,EAAEI,UAAYH,IACvE,SAAUD,EAAGC,GAAK,IAAK,IAAIK,KAAKL,EAAOA,EAAEM,eAAeD,KAAIN,EAAEM,GAAKL,EAAEK,MACpDN,EAAGC,IAE5B,OAAO,SAAUD,EAAGC,GAEhB,SAASO,IAAOV,KAAKW,YAAcT,EADnCD,EAAcC,EAAGC,GAEjBD,EAAEU,UAAkB,OAANT,EAAaC,OAAOS,OAAOV,IAAMO,EAAGE,UAAYT,EAAES,UAAW,IAAIF,IAV1C,GAazCI,EAAYd,MAAQA,KAAKc,UAAa,WAStC,OARAA,EAAWV,OAAOW,QAAU,SAASC,GACjC,IAAK,IAAIC,EAAGC,EAAI,EAAGC,EAAIC,UAAUC,OAAQH,EAAIC,EAAGD,IAE5C,IAAK,IAAIV,KADTS,EAAIG,UAAUF,GACOd,OAAOQ,UAAUH,eAAea,KAAKL,EAAGT,KACzDQ,EAAER,GAAKS,EAAET,IAEjB,OAAOQ,IAEKO,MAAMvB,KAAMoB,YAEhCI,EAAQC,YAAa,EACrB,IAAI4nB,EAAarjB,EAAQ,IACrBsjB,EAAUtjB,EAAQ,KAClBujB,EAAWvjB,EAAQ,IACnBG,EAAeH,EAAQ,IACvBmD,EAAqB,SAAUxH,GAkB/B,SAASwH,EAAIvH,EAAOC,EAAiBC,EAAOuH,GACxC,IAAItH,EAAQJ,EAAOL,KAAKtB,KAAM4B,EAAOC,IAAoB7B,KAuZzD,OArZA+B,EAAM+D,MAAQ,IAAIwjB,EAAQrd,MAC1BlK,EAAMgD,SAAW,SAAUjD,GACvBC,EAAMD,MAAQ,GACdA,EAAMM,SAAQ,SAAUC,GACpBN,EAAMD,MAAMQ,KAAK,CAAEsB,QAAS7B,EAAM4C,SAASlC,IAAIJ,GAAQA,MAAOA,OAElEN,EAAMC,WAEVD,EAAMsI,iBAAmB,SAAUC,GAC/BvI,EAAMynB,kBAAoBlf,GAE9BvI,EAAMuH,QAAU,WACZ,IAAI7E,EACAa,EAAMvD,EAAMkB,MAAMlB,EAAME,aAAcF,EAAM4C,SAASlC,IAA+C,QAA1CgC,EAAK1C,EAAMD,MAAMC,EAAME,qBAAkC,IAAPwC,OAAgB,EAASA,EAAGpC,OAAQN,EAAMG,aAO1J,OANAH,EAAME,aAAeqD,EAAIpC,QACzBnB,EAAMG,YAAcoD,EAAInC,QACxB6B,QAAQC,IAAI,eACZK,EAAInC,QAAQf,SAAQ,SAAUC,GAAS,OAAOA,EAAMiB,MAAMlB,SAAQ,SAAUgD,GAAU,OAAOJ,QAAQC,IAAIG,EAAOU,aAChHd,QAAQC,IAAI,gBACZD,QAAQC,IAAIK,EAAIlC,SACTkC,GAEXvD,EAAMwH,OAAS,WACXxH,EAAMc,WAAa,GACnBd,EAAMe,sBAAwB,EAC9B,IAAK,IAAI5B,EAAI,EAAGA,EAAIa,EAAMD,MAAMT,OAAS,EAAGH,IAAK,CAC7C,IAAI6R,EAAMhR,EAAMkB,MAAMlB,EAAMe,sBAAuBf,EAAM4C,SAASlC,IAAIV,EAAMD,MAAMC,EAAMe,uBAAuBT,OAAQN,EAAMc,YAC7Hd,EAAMe,sBAAwBiQ,EAAI7P,QAClCnB,EAAMc,WAAakQ,EAAI5P,QAE3B,OAAOpB,EAAMkB,MAAMlB,EAAMe,sBAAuBf,EAAM4C,SAASlC,IAAIV,EAAMD,MAAMC,EAAMe,uBAAuBT,OAAQN,EAAMc,aAE9Hd,EAAMuE,KAAOvE,EAAMuH,QACnBvH,EAAM0E,IAAM1E,EAAMwH,OAClBxH,EAAMkB,MAAQ,SAAUC,EAAS8E,EAAIC,GACjC,IAAIwhB,EAAY,GACZC,EAAY,WACZ3nB,EAAMI,YAAc,GACpBsnB,EAAUrnB,SAAQ,SAAUC,GAAS,OAAON,EAAMI,YAAYG,KAAKD,MACnEonB,EAAY,IAEZE,EAAU,WACV5nB,EAAMI,YAAYC,SAAQ,SAAUC,GAChC,IAAIoC,EACAmlB,EAAO7nB,EAAM8nB,YAAYxnB,EAAME,KAAKqB,QAAgC,QAAtBa,EAAKpC,EAAMyD,aAA0B,IAAPrB,OAAgB,EAASA,EAAG6H,OAAQjK,EAAMyD,OACjH,OAAT8jB,QAA0B,IAATA,GAA2BA,EAAKxnB,SAAQ,SAAUgD,GAAU,OAAOqkB,EAAUnnB,KAAK8C,UASvG0kB,EAAe,WACf,IAAIC,EAAS,IAAI3f,IACbpG,EAAY,GAChBjC,EAAMI,YAAYC,SAAQ,SAAUC,QACUkC,IAAtCwlB,EAAOtnB,IAAIyW,KAAKC,UAAU9W,MAC1B2B,EAAU1B,KAAKD,GACf0nB,EAAOve,IAAI0N,KAAKC,UAAU9W,GAAQA,OAG1CN,EAAMI,YAAc,GACpB6B,EAAU5B,SAAQ,SAAUC,GAAS,OAAON,EAAMI,YAAYG,KAAKD,OAMvE,YAJoBkC,IAAhBxC,EAAMioB,QACNL,IACAD,KAEAxmB,EAAUnB,EAAMD,MAAMT,QArBtBU,EAAMI,YAAYC,SAAQ,SAAUC,GACrBN,EAAMkoB,WAAWjiB,EAAI3F,EAAME,KAAKqB,QAASvB,EAAMyD,MAAMwG,OAAQjK,EAAMyD,OACzE1D,SAAQ,SAAUgD,GAAU,OAAOqkB,EAAUnnB,KAAK8C,SAqB3DskB,SACoBnlB,IAAhBxC,EAAMioB,QACNL,IACAD,KAkBRI,IAOA7hB,EAAQ3F,KAAK,CAAEgB,MAAOvB,EAAMwB,QAAQxB,EAAMI,aAAcuB,GAAI3B,EAAMD,MAAMoB,GAASb,QACjFa,IACO,CACHI,MAAOvB,EAAMwB,QAAQxB,EAAMI,aAC3Be,QAASA,EACTE,QAASrB,EAAMsB,cAActB,EAAMI,aACnCgB,QAAS8E,KA3BT6hB,IAOO,CACHxmB,MAAOvB,EAAMwB,QAAQxB,EAAMI,aAC3Be,QAASA,EACTE,QAASrB,EAAMsB,cAActB,EAAMI,aACnCgB,QAAS8E,KAmBrBlG,EAAMC,QAAU,WACZD,EAAME,aAAe,EACrBF,EAAMG,YAAc,GACpBH,EAAMI,YAAc,GACpBJ,EAAMF,gBAAgBO,SAAQ,SAAUC,GACpC,IAAIyD,EAAQ,IAAIwjB,EAAQrd,MACxBnG,EAAMxD,KAAK+mB,EAAWlf,QACtBpI,EAAMI,YAAYG,KAAK,CACnBC,KAAMR,EAAMS,WAAWC,IAAIJ,EAAMK,IACjCoD,MAAOA,QAKnB/D,EAAMwI,SAAW,WACb,IAGI2f,EAAqB,SAAUlmB,EAAWN,GAC1C,IAAIS,EAAM,GAMV,OALAH,EAAUH,KAAI,SAAUC,GACpB,OANe,SAAUL,EAAUC,GACvC,OAAO3B,EAAM4B,WAAWF,EAASlB,KAAKqB,QAASF,GAAIG,KAAI,SAAUC,GAAK,MAAQ,CAAEvB,KAAMuB,MAK3EN,CAAiBM,EAAGJ,MAC5BtB,SAAQ,SAAU+nB,GACjB,OAAOA,EAAG/nB,SAAQ,SAAU5B,GAAK,OAAO2D,EAAI7B,KAAK9B,SAE9C2D,GAuBP7B,EAAO,SAAUwB,GACjBgC,EAAMxD,KAAKwB,IAEXgC,EAAQ,GACRskB,EAAQ,GACR5e,EAAM,IAAI6e,EACVC,EAAWvoB,EAAMI,YACrBJ,EAAMC,UACNM,EAAKgoB,GAqCL,IApCA,IAAItf,EAAU,WACV,IAAIuf,EAXuBzkB,EAAMmM,QAY7B9N,EAAM,GACV,YAAaI,IAATgmB,GAAsC,IAAhBA,EAAKlpB,OACpB,QAEPmK,EAAIgf,IAAID,GACD,YAEX/e,EAAID,IAAIgf,EAAK1mB,KAAI,SAAUC,GAAK,MAAQ,CACpCvB,KAAM,CACFG,GAAIoB,EAAEvB,KAAKG,GACXkB,QAASE,EAAEvB,KAAKqB,QAChBR,QAASU,EAAEvB,KAAKa,SAEpB0C,WAAOvB,OAEXxC,EAAM4C,SAASvC,SAAQ,SAAUC,GAC7B,GAAIA,IAAUN,EAAMioB,MAAO,CACvB,IAAIpgB,EAjDQ,SAAU5F,EAAWN,GACzC,IAAI+mB,EAAW,SAAUzmB,GACrB,QAAoBO,IAAhBxC,EAAMioB,MACN,OAAOhmB,EAEX,IAAIG,EAAM,GACNumB,EAAU,IAAIpB,EAAQrd,MAC1Bye,EAAQpoB,KAAK+mB,EAAWnf,KACxBlG,EAAU5B,SAAQ,SAAUqB,GACxB,IAAIsP,EAAMhR,EAAM8nB,YAAYpmB,EAASlB,KAAKqB,QAASylB,EAAWnf,IAAKwgB,QACvDnmB,IAARwO,GACA5O,EAAI7B,KAAKyQ,MAGjB,IAAI4X,EAAU,GAEd,OADAxmB,EAAI/B,SAAQ,SAAU+nB,GAAM,OAAOA,EAAG/nB,SAAQ,SAAU5B,GAAK,OAAOmqB,EAAQroB,KAAK9B,SAC1EmqB,GAEX,OAAOF,EAASP,EAAmBO,EAASzmB,GAAYN,IA+BvCK,CAAkBwmB,EAAMloB,GAC7BuoB,EAAMhhB,EAAG/F,KAAI,SAAUC,GAAK,MAAQ,CACpCvB,KAAM,CACFG,GAAIoB,EAAEvB,KAAKG,GACXkB,QAASE,EAAEvB,KAAKqB,QAChBR,QAASU,EAAEvB,KAAKa,SAEpB0C,WAAOvB,MAEXJ,EAAI7B,KAAKsoB,GACLhhB,EAAGvI,OAAS,IAAMmK,EAAIgf,IAAI5gB,KAAQ4B,EAAIgf,IAAII,IAC1CtoB,EAAKsoB,YAIjBR,EAAM9nB,KAAK6B,KAER2B,EAAMzE,OAAS,GAAG,CAErB,GAAgB,UADF2J,IAEV,MAER,IAAI6f,EAAS,GACbT,EAAMhoB,SAAQ,SAAU+nB,EAAIxgB,GACxB5H,EAAM4C,SAASvC,SAAQ,SAAU4F,EAAI8iB,GAC7B9iB,IAAOjG,EAAMioB,OAA2B,IAAlBG,EAAGniB,GAAI3G,SAC7B2D,QAAQC,IAAIklB,EAAGniB,IACfhD,QAAQC,IAAI0E,EAAM6B,EAAIuf,QAAQZ,EAAGniB,KACjC6iB,EAAOvoB,KAAK,CACRqH,KAAMA,EACNC,GAAI4B,EAAIuf,QAAQZ,EAAGniB,IACnBc,YAAa,IAAIe,IAAI,CAAC,CAAC,CAAEC,MAAOghB,eAKhD,IAAIxnB,EAAQkI,EAAIzF,aAAalC,KAAI,SAAUC,GAAK,MAAQ,CACpDpB,GAAI8I,EAAIuf,QAAQjnB,GAChBV,QAASrB,EAAMsB,cAAcS,OAE7B+E,EAAQ,GACZgiB,EAAOhgB,MAAK,SAAUC,EAAG3K,GAAK,OAAO2K,EAAEnB,KAAOxJ,EAAEwJ,MAAQmB,EAAElB,GAAKzJ,EAAEyJ,MACjE,IAAK,IAAI1I,EAAI,EAAGA,EAAI2pB,EAAOxpB,OAAQH,IAAK,CAGpC,IAFA,IAAIiD,EAAM,GACN6mB,EAAQ,EACHtf,EAAIxK,EAAGwK,EAAImf,EAAOxpB,OAAQqK,IAC3Bmf,EAAO3pB,GAAGyI,OAASkhB,EAAOnf,GAAG/B,MAAQkhB,EAAO3pB,GAAG0I,KAAOihB,EAAOnf,GAAG9B,KAChEzF,EAAI7B,KAAK/B,MAAMoJ,KAAKkhB,EAAOnf,GAAG5C,aAAa,GAAG,IAC9CkiB,KAGRniB,EAAMvG,KAAK,CACPqH,KAAMkhB,EAAO3pB,GAAGyI,KAChBC,GAAIihB,EAAO3pB,GAAG0I,GACdd,YAAa,IAAIe,IAAI,CAAC1F,MAE1BjD,GAAK8pB,EAAQ,EAEjB,MAAO,CAAE1nB,MAAOA,EAAOuF,MAAOA,IAGlC9G,EAAMyI,YAAc,WAChBzI,EAAMC,UACN,IAAIipB,EAAUlpB,EAAMI,YAAY,GAAGI,KAAKqB,QASpCsnB,EAAW,SAAUd,GAAS,OAAO,SAAU1mB,GAAM,OAAO,SAAUhB,GACtE,OAAO0nB,EAAM1mB,GAAIhB,MAuCjBoD,EAAQ,GAERxD,EAAO,SAAUwB,GAAK,OAAOgC,EAAMxD,KAAKwB,IACxCqnB,EAAO,GACPC,EAAQ,GACRC,EAAS,GACbtpB,EAAMS,WAAWJ,SAAQ,SAAUkpB,GAC/B,IAAIC,EAAU,CAAEC,QAAS,EAAG/d,KAAM,CAAE7J,SAAU,EAAGlB,IAAK,EAAGU,SAAS,IAC9DkoB,EAAUloB,SACVmoB,EAAU,CAAEC,OAAQ,EAAG/d,KAAM6d,GAC7BF,EAAM9oB,KAAKipB,KAGXA,EAAU,CAAEC,OAAQ,EAAG/d,KAAM6d,GAC7BD,EAAO/oB,KAAKipB,IAEhBJ,EAAK7oB,KAAKipB,MAEd,IAAIE,EAAgB1pB,EAAMoD,OAAOjB,QAAO,SAAUC,EAAKoB,GACnD,OAAOpB,GAAOoB,EAAKrB,QAAO,SAAUwnB,EAASlmB,GAAS,OAAOkmB,GAAWlmB,EAAMnE,OAAS,IAAM8C,MAC9F,GACH,GAAIinB,EAAM/pB,OAAS,IAAMoqB,EAErB,MADAzmB,QAAQC,IAAI,WACN,IAAIkB,EAAa8Q,eAG3B,IAAI0U,EAAS,GACbA,EAAOrpB,KAAK8oB,GACZO,EAAOrpB,KAAK+oB,GACZ,IAAIjB,EAlEe,SAAUe,GACzB,IAPoBS,EAOhBvkB,GAPgBukB,EAOCT,EAPe,SAAUzoB,GAC9C,OAAOkpB,EAAMlpB,KAOT0nB,EAAQ,GASZ,OARAroB,EAAM4C,SAASvC,SAAQ,SAAU4F,GAC7B,IAAI7D,EAAM,IAfN,SAAUT,GAClB,IAAIS,EAAM,GAEV,OADApC,EAAMoD,OAAO/C,SAAQ,SAAUoc,EAAGjI,GAAM,OAAOpS,EAAI7B,KAAKP,EAAM4B,WAAW4S,EAAI7S,GAAI,OAC1ES,GAaU0nB,CAAM7jB,GACZ5F,SAAQ,SAAU0pB,GACrB3nB,EAAI7B,KAAK+E,EAAOykB,EAAKloB,aAEzBwmB,EAAM9nB,KAAK6B,MAERimB,EAuDC2B,CAAaZ,GACzBppB,EAAM4C,SAASvC,SAAQ,SAAU4F,GAC7B2jB,EAAOvpB,SAAQ,SAAUG,GAAQ,OAAOD,EAAKC,MAG7C,IAFA,IAAIypB,EAAUd,EAASd,EAATc,CAAgBljB,GAC1BikB,EAzDqC,SAAUN,GAAU,OAAO,SAAUK,GAAW,OAAO,SAAUJ,GAC1G,IAAIM,EAASF,EAAQJ,EAAM,GAAGne,KAAK7J,SAAS4nB,OACxCW,EAAS,GACTC,EAAYT,EAAOtqB,OAAS,EAC5BgrB,EAAO,GACXT,EAAMxpB,SAAQ,SAAUC,EAAOwS,GACvBmX,EAAQ3pB,EAAMoL,KAAK7J,SAAS4nB,SAAWU,IACvC7pB,EAAMmpB,OAASY,EACfC,EAAK/pB,KAAKD,EAAMoL,KAAK7J,SACrBuoB,EAAO7pB,KAAKD,OAGpB,IAAK,IAAInB,EAAI,EAAGA,EAAI0qB,EAAMvqB,OAAQH,IAC1BmrB,EAAKjV,SAASwU,EAAM1qB,GAAGuM,KAAK7J,WAC5BgoB,EAAMU,OAAOprB,EAAG,GAChBA,KAGR,OAAIirB,EAAO9qB,OAAS,GAChBsqB,EAAOrpB,KAAK6pB,GACL,CAAEnZ,IAAK4Y,EAAOxY,IAAK+Y,IAEvB,CAAEnZ,IAAK,GAAII,IAAK,MAmCJmZ,CAAoBZ,EAApBY,CAA4BP,GACxClmB,EAAMzE,OAAS,GAAG,CACrB,IAAIkpB,EAlCmBzkB,EAAMmM,QAmC7B,QAAa1N,IAATgmB,EACA,MAEJ,IAAI4B,EAASF,EAAa1B,GACtB4B,EAAOnZ,IAAI3R,OAAS,IACpBiB,EAAK6pB,EAAOnZ,KACZ1Q,EAAK6pB,EAAO/Y,UAIxB,IAAIoZ,EAAc,SAAUZ,GAAS,OAAOA,EAAM/nB,KAAI,SAAU4oB,GAAK,MAAQ,CAAElqB,KAAMkqB,EAAEhf,UAEnFnK,EAAQqoB,EAAO9nB,KAAI,SAAU+nB,GAAS,MAAQ,CAAElpB,GAAIkpB,EAAM,GAAGJ,OAAQpoB,QAASrB,EAAMsB,cAAcmpB,EAAYZ,QAC9G/iB,EAAQ8iB,EAAOznB,QAAO,SAAUC,EAAKsoB,GAQrC,OAPA1qB,EAAM4C,SAASvC,SAAQ,SAAU4F,EAAI8iB,GAHvB,IAAUc,EAAOloB,EAI3BS,EAAI7B,KAAK,CACLqH,KAAM8iB,EAAE,GAAGjB,OACX5hB,IANgBgiB,EAMAa,EANO/oB,EAMJsE,EANiBkjB,EAASd,EAATc,CAAgBxnB,EAAhBwnB,CAAoBU,EAAM,GAAGne,KAAK7J,SAAS4nB,QAO/E1iB,YAAa,IAAIe,IAAI,CAAC,CAAC,CAAEC,MAAOghB,WAGjC3mB,IACR,IAOH,OANAa,QAAQC,IAAI3B,GAML,CAAEyT,UAAW,CAAEzT,MAAOA,EAAOuF,MAAOA,GAASmO,MADxC1T,EAJGqoB,EAAO9Y,QAAO,SAAU4Z,GAEnC,OADWA,EAAE5oB,KAAI,SAAUC,GAAK,OAAOA,EAAE2J,KAAK7J,WAClCwT,SAAS6T,MAEE,GAAG,GAAGO,OAAS,KAG9CzpB,EAAMynB,kBAAoBngB,EAC1BtH,EAAMioB,MAAQjoB,EAAM4C,SAASlC,IAAI4mB,EAAWnf,KAW5CnI,EAAM+D,MAAMxD,KAAK+mB,EAAWlf,QAC5BpI,EAAMI,YAAc,GACpBN,EAAgBO,SAAQ,SAAUC,GAC9B,IAAIyD,EAAQ,IAAIwjB,EAAQrd,MACxBnG,EAAMxD,KAAK+mB,EAAWlf,QACtBpI,EAAMI,YAAYG,KAAK,CACnBC,KAAMR,EAAMS,WAAWC,IAAIJ,EAAMK,IACjCoD,MAAOA,OAGf/D,EAAMgD,SAASjD,GACXC,EAAMioB,OACNjoB,EAAMI,YAAYC,SAAQ,SAAUC,GAChCN,EAAM2qB,SAASrqB,EAAME,KAAKqB,QAASvB,EAAMyD,UAIjDd,QAAQC,IAAI,6BACZD,QAAQC,IAAIlD,EAAMsD,mBAClBL,QAAQC,IAAI,UACZlD,EAAM4C,SAASvC,SAAQ,SAAUC,EAAO6C,GAAO,OAAOF,QAAQC,IAAI5C,EAAO6C,MACzEF,QAAQC,IAAI,SACZlD,EAAMS,WAAWJ,SAAQ,SAAUC,GAAS,OAAO2C,QAAQC,IAAI5C,MAC/D2C,QAAQC,IAAI,OACZlD,EAAMoD,OAAO/C,SAAQ,SAAUC,GAC3B2C,QAAQC,MACR5C,EAAMD,SAAQ,SAAUgD,GAAU,OAAOJ,QAAQC,IAAIG,SAEzDJ,QAAQC,IAAI,6BACLlD,EAiRX,OA1rBAhC,EAAUoJ,EAAKxH,GA2afwH,EAAIvI,UAAU+rB,aAAe,SAAUtqB,GACnC,IAAIoC,EACAmoB,EAAM,GAEV,OAD2B,QAA1BnoB,EAAKpC,EAAMgG,iBAA8B,IAAP5D,GAAyBA,EAAGrC,SAAQ,SAAUC,GAAS,OAAOuqB,EAAItqB,KAAKD,MACnGuqB,GAEXzjB,EAAIvI,UAAUisB,YAAc,SAAUC,EAAUhnB,GAC5CgnB,EAAS3Z,UAAU/Q,SAAQ,SAAUC,GACjCyD,EAAMxD,KAAKD,OAGnB8G,EAAIvI,UAAUmsB,mBAAqB,SAAUC,EAAU3qB,GACnD2qB,EAAS3gB,MACT,IAAIygB,EAAW9sB,KAAK2sB,aAAatqB,GACjCrC,KAAK6sB,YAAYC,EAAUE,IAE/B7jB,EAAI8jB,SAAW,SAAUC,GACrB,IAAIC,EAAI5D,EAAS6D,UAAUF,GAa3BC,EAAIA,EAAEtiB,MAZN,SAAaC,EAAG3K,GACZ,OAAI2K,EAAEnF,WAAaxF,EAAEwF,UACbmF,EAAEnF,UAAYxF,EAAEwF,WACR,EAERmF,EAAEnF,UAAYxF,EAAEwF,UACT,EAEJ,EAEJ,KAMX,IAHA,IAAIoN,EAAM,GACNsa,EAAO,GACPC,EAAMH,EAAE,GAAGxnB,UACNzE,EAAI,EAAGA,EAAIisB,EAAE9rB,OAAQH,IACtBisB,EAAEjsB,GAAGyE,YAAc2nB,EACnBD,EAAK/qB,KAAK6qB,EAAEjsB,KAGZ6R,EAAIzQ,KAAK+qB,GACTC,EAAMH,EAAEjsB,GAAGyE,WACX0nB,EAAO,IACF/qB,KAAK6qB,EAAEjsB,KAGpB6R,EAAIzQ,KAAK+qB,GACT,IAAI/nB,EAAM,GAcV,OAbc,SAAVioB,EAAoBC,EAAKC,EAAKtpB,GAC9B,GAAIqpB,EAAMza,EAAI1R,OACV,IAAK,IAAIH,EAAI,EAAGA,EAAI6R,EAAIya,GAAKnsB,OAAQH,IAAK,CACtC,IAAI4J,EAAIye,EAAS6D,UAAUjpB,GAC3B2G,EAAExI,KAAKyQ,EAAIya,GAAKtsB,IAChBqsB,EAAQC,EAAM,EAAGtsB,EAAG4J,QAIxBxF,EAAIhD,KAAK6B,GAGjBopB,CAAQ,EAAG,EAAG,IACPjoB,GAEX6D,EAAIukB,QAAU,SAAUR,GAOpB,IANA,IAIIS,EACAntB,EALAa,EAAS6rB,EAAY7rB,OACrBkU,EAAS,CAAC2X,EAAYU,SACtBC,EAAI,IAAIttB,MAAMc,GAAQysB,KAAK,GAC3B5sB,EAAI,EAGDA,EAAIG,GACHwsB,EAAE3sB,GAAKA,GACPysB,EAAIzsB,EAAI,GAAK2sB,EAAE3sB,GACfV,EAAI0sB,EAAYhsB,GAChBgsB,EAAYhsB,GAAKgsB,EAAYS,GAC7BT,EAAYS,GAAKntB,EACjBqtB,EAAE3sB,KACFA,EAAI,EACJqU,EAAOjT,KAAK4qB,EAAYU,WAGxBC,EAAE3sB,GAAK,EACPA,KAGR,OAAOqU,GAEXpM,EAAIvI,UAAUmtB,cAAgB,SAAUhE,EAAQ1nB,EAAO2B,EAAWJ,EAASopB,GACvE,IAA2BgB,IAGX9U,KAAKC,UAAU9W,QAFCkC,IAArBwlB,EAAOtnB,IAAIurB,KAGlBhqB,EAAU1B,KAAK,CAAEC,KAAMvC,KAAKwC,WAAWC,IAAImB,GAAUkC,MAAOknB,IAC5DjD,EAAOve,IAAI0N,KAAKC,UAAU,CAAE5W,KAAMvC,KAAKwC,WAAWC,IAAImB,GAAUkC,MAAOknB,IAAa,CAAEzqB,KAAMvC,KAAKwC,WAAWC,IAAImB,GAAUkC,MAAOknB,MAGzI7jB,EAAIvI,UAAU8rB,SAAW,SAAUuB,EAAQC,GACvC,IAAInsB,EAAQ/B,KACR+pB,EAAS,IAAI3f,IACbpG,EAAY,GACZmqB,EAAU,GACdnuB,KAAK2D,WAAWsqB,EAAQjuB,KAAKgqB,OAAO5nB,SAAQ,WAAc,OAAO+rB,EAAQ7rB,MAAK,MAC9E,IAAI8rB,OAAsD7pB,IAA3CvE,KAAK2D,WAAWsqB,EAAQjuB,KAAKgqB,OAAO,GAAmB7gB,EAAI8jB,SAASjtB,KAAK2D,WAAWsqB,EAAQjuB,KAAKgqB,QAAU,CAAEhqB,KAAK2D,WAAWsqB,EAAQjuB,KAAKgqB,QAgCzJ,OANAoE,EAAShsB,SAAQ,SAAUC,GACvB,IAAK,IAAInB,EAAI,EAAGA,EAAIitB,EAAQ9sB,OAAQH,IAChCitB,EAAQjtB,IAAK,GAzBT,SAARmtB,EAAkBvC,EAAMwC,EAAK1qB,EAASkC,GACtCqoB,EAAQG,IAAO,EACfxC,EAAK1pB,SAAQ,SAAUC,EAAOwS,GAC1B,GAAIxS,EAAMuB,UAAYA,EAClB,GAAIvB,EAAMsD,YAAcG,EAAMwG,OAAQ,CAClC,IAAIiiB,EAAgBzoB,EAAM0G,MAAM,IAAI8c,EAAQrd,OAC5ClK,EAAMysB,gBAAgBnsB,EAAOksB,GAC7BxsB,EAAMgsB,cAAchE,EAAQ,CAAExnB,KAAMR,EAAMS,WAAWC,IAAImB,GAAUkC,MAAOyoB,GAAiBvqB,EAAWJ,EAAS2qB,GAC1GJ,EAAQtZ,IACTwZ,EAAMvC,EAAMjX,EAAOjR,EAAS2qB,QAG/B,GAAIlsB,EAAMsD,YAAc0jB,EAAWnf,IAAK,CACrCqkB,EAAgBzoB,EAAM0G,MAAM,IAAI8c,EAAQrd,OAC5ClK,EAAM0sB,gBAAgBpsB,EAAOksB,GAC7BxsB,EAAMgsB,cAAchE,EAAQ,CAAExnB,KAAMR,EAAMS,WAAWC,IAAImB,GAAUkC,MAAOyoB,GAAiBvqB,EAAWJ,EAAS2qB,GAC1GJ,EAAQtZ,IACTwZ,EAAMvC,EAAMjX,EAAOjR,EAAS2qB,OAU5CF,CAAMhsB,EAAO,EAAG4rB,EAAQC,MAErBlqB,GAEXmF,EAAIvI,UAAUipB,YAAc,SAAUoE,EAAQtoB,EAAWG,GACrD,IAAI/D,EAAQ/B,KACZ,QAAmBuE,IAAfvE,KAAKgqB,MAAT,CAIA,IADA,IAAImE,EAAU,GACLjtB,EAAI,EAAGA,EAAIlB,KAAKwC,WAAWiJ,KAAMvK,IACtCitB,EAAQ7rB,MAAK,GAEjB,IAgCIosB,EAhCM,SAANC,EAAgBjsB,EAAIoD,EAAOgG,EAAO6E,GAClC5O,EAAM2qB,SAAShqB,EAAIoD,GAAO1D,SAAQ,SAAUC,GACxCsO,EAASrO,KAAK,CACVsB,QAASlB,EACT4hB,IAAKjiB,EAAMyD,WAGnB6K,EAASrO,KAAK,CACVsB,QAASlB,EACT4hB,IAAKxe,IAETqoB,EAAQzrB,IAAM,EACd,IAAK,IAAIxB,EAAI,EAAGA,EAAIa,EAAMoD,OAAOzC,GAAIX,EAAMioB,OAAO3oB,OAAQH,IACtD,IAAKitB,EAAQpsB,EAAM4B,WAAWjB,EAAIX,EAAMioB,OAAO9oB,GAAG0C,SAC9C,OAAQ7B,EAAM4B,WAAWjB,EAAIX,EAAMioB,OAAO9oB,GAAGyE,WACzC,KAAKmG,EACD,IAAIkhB,EAAWlnB,EAAM0G,MAAM,IAAI8c,EAAQrd,OACvClK,EAAMysB,gBAAgBzsB,EAAM4B,WAAWjB,EAAIX,EAAMioB,OAAO9oB,GAAI8rB,GAC5D2B,EAAI5sB,EAAM4B,WAAWjB,EAAIX,EAAMioB,OAAO9oB,GAAG0C,QAASopB,EAAUA,EAAS1gB,OAAQqE,GAC7E,MAEJ,KAAK0Y,EAAWnf,IACR8iB,EAAWlnB,EAAM0G,MAAM,IAAI8c,EAAQrd,OACvClK,EAAM0sB,gBAAgB1sB,EAAM4B,WAAWjB,EAAIX,EAAMioB,OAAO9oB,GAAI8rB,GAC5D2B,EAAI5sB,EAAM4B,WAAWjB,EAAIX,EAAMioB,OAAO9oB,GAAG0C,QAASopB,EAAUA,EAAS1gB,OAAQqE,GAM7F,OAAOA,EAEQge,CAAIV,EAAQnoB,EAAOH,EAAW,IAC7C3B,EAAY,GAChB,IAAS9C,EAAI,EAAGA,EAAIwtB,EAAartB,OAAQH,IAAK,CAC1C,IAAIqB,EAAOvC,KAAKwC,WAAWC,IAAIzC,KAAKsD,MAAMorB,EAAaxtB,GAAG0C,SAASlB,IACnEsB,EAAU1B,KAAK,CAAEC,KAAMA,EAAMuD,MAAO4oB,EAAaxtB,GAAGojB,MAExD,OAAOtgB,IAEXmF,EAAIvI,UAAU4tB,gBAAkB,SAAUnsB,EAAO2qB,GAC7C,GAAI3qB,EAAMgG,UAAU,KAAOghB,EAAWnf,IAAK,CACvC,GAA+B,IAA3B7H,EAAMgG,UAAUhH,OAChB,MAAMmD,MAAM,qDAGZwoB,EAAS3gB,WAIbrM,KAAK+sB,mBAAmBC,EAAU3qB,IAG1C8G,EAAIvI,UAAU6tB,gBAAkB,SAAUpsB,EAAO2qB,GAC7C,GAAI3qB,EAAMgG,UAAU,KAAOghB,EAAWnf,KAAkC,IAA3B7H,EAAMgG,UAAUhH,OACzD,MAAMmD,MAAM,qDAEX,GAAInC,EAAMgG,UAAU,KAAOghB,EAAWnf,IAAK,CAC5C,IAAI4iB,EAAW9sB,KAAK2sB,aAAatqB,GACjCrC,KAAK6sB,YAAYC,EAAUE,KAGnC7jB,EAAIvI,UAAUqpB,WAAa,SAAU2E,EAAkBX,EAAQtoB,EAAWG,GACtE,IAAI/D,EAAQ/B,KACRgE,EAAY,GAiBhB,OAhBAhE,KAAK2D,WAAWsqB,EAAQW,GAAkBxsB,SAAQ,SAAUC,GACxD,OAAQA,EAAMsD,WACV,KAAKA,EACD,IAAIqnB,EAAWlnB,EAAM0G,MAAM,IAAI8c,EAAQrd,OACvClK,EAAMysB,gBAAgBnsB,EAAO2qB,GAC7BhpB,EAAU1B,KAAK,CAAEC,KAAMR,EAAMS,WAAWC,IAAIJ,EAAMK,IAAKoD,MAAOknB,IAC9D,MAEJ,KAAK3D,EAAWnf,IACR8iB,EAAWlnB,EAAM0G,MAAM,IAAI8c,EAAQrd,OACvClK,EAAM0sB,gBAAgBpsB,EAAO2qB,GAC7BhpB,EAAU1B,KAAK,CAAEC,KAAMR,EAAMS,WAAWC,IAAIJ,EAAMK,IAAKoD,MAAOknB,QAKnEhpB,GAEXmF,EAAIvI,UAAUiG,YAAc,WACxB,YAAsBtC,IAAfvE,KAAKgqB,OAEhB7gB,EAAIvI,UAAUyE,gBAAkB,WAC5B,IAAIC,GAAM,EAQV,OAPAtF,KAAKmF,OAAO/C,SAAQ,SAAUmD,GAAQ,OAAOA,EAAKnD,SAAQ,SAAUoD,GAChE,IAAIC,EAAUD,EAAM,GAChBE,EAAgBF,EAAMtB,QAAO,SAAUC,EAAK5B,GAAQ,OAAO4B,GAAQ5B,EAAKoD,YAAcF,EAAQE,aAAe,GAC7GH,EAAMnE,OAAS,GAAKqE,IACpBJ,GAAM,SAGPA,IAAStF,KAAK6G,eAEzBsC,EAAIvI,UAAUyC,cAAgB,SAAUW,GACpC,IAAIsB,GAAM,EACV,OAA+B,IAA3BtF,KAAKwpB,wBAA0DjlB,IAA3BvE,KAAKwpB,mBACzCxlB,EAAU5B,SAAQ,SAAUC,GACpBA,EAAME,KAAKa,UACXkC,GAAM,MAGPA,IAGPtB,EAAU5B,SAAQ,SAAUC,GACG,IAAvBA,EAAMyD,MAAM2F,SACZnG,GAAM,MAKPA,IAGf6D,EAAIvI,UAAU2C,QAAU,SAAUS,GAC9B,IAAIjC,EAAQ/B,KACR4F,EAAW,GAKf,OAJA5B,EAAU5B,SAAQ,SAAUC,GACxB,IAAIwD,EAAO/E,EAASA,EAAS,GAAIiB,EAAMuB,MAAMjB,EAAME,KAAKqB,UAAW,CAAEkC,MAAOzD,EAAMyD,MAAMC,eACxFH,EAAStD,KAAKuD,MAEXD,GAEJuD,EA3rBc,CA4rBvBkgB,EAAWpjB,UACbzE,EAAQ2H,IAAMA,GACa,WACvB,SAAS0lB,EAAM3iB,QACM,IAAbA,IAAuBA,EAAWC,KACtCnM,KAAKkM,SAAWA,EAChBlM,KAAKiH,QAAU,GAEnB4nB,EAAMjuB,UAAUkuB,QAAU,SAAU1iB,GAChC,GAAIpM,KAAKyL,SAAWzL,KAAKkM,SACrB,MAAM1H,MAAM,6DAEhBxE,KAAKiH,QAAQ3E,KAAK8J,IAEtByiB,EAAMjuB,UAAUmuB,QAAU,WACtB,OAAO/uB,KAAKiH,QAAQgL,SAExB4c,EAAMjuB,UAAU6K,KAAO,WACnB,OAAOzL,KAAKiH,QAAQ5F,QAExBwtB,EAAMjuB,UAAUmF,WAAa,WACzB,OAAO/F,KAAKiH,SAnBO,GAA3B,IAuBIojB,EAAuB,WACvB,SAASA,IACLrqB,KAAKoqB,MAAQ,IAAIhgB,IACjBpK,KAAKwL,IAAM,GA0Df,OAxDA6e,EAAMzpB,UAAUouB,UAAY,SAAUlrB,GAClC,IAAImrB,EAAK1F,EAAS6D,UAAUtpB,GAE5B,OADAmrB,EAAKA,EAAGpkB,QAGZwf,EAAMzpB,UAAUsuB,SAAW,SAAU7sB,GACjC,IAAKrC,KAAKwqB,IAAInoB,GACV,MAAMmC,MAEV,IAAI+R,EAAK,EACL0Y,EAAKjvB,KAAKgvB,UAAU3sB,GAMxB,OALArC,KAAKwL,IAAIpJ,SAAQ,SAAUgD,EAAQyP,GAC3BqE,KAAKC,UAAU8V,KAAQ/V,KAAKC,UAAU/T,KACtCmR,EAAK1B,MAGN0B,GAEX8T,EAAMzpB,UAAU4pB,IAAM,SAAUnoB,GAC5B,IAAI4sB,EAAKjvB,KAAKgvB,UAAU3sB,GACpBsrB,EAAIzU,KAAKC,UAAU8V,GACvB,OAAOjvB,KAAKoqB,MAAMI,IAAImD,IAE1BtD,EAAMzpB,UAAUuuB,UAAY,SAAUxN,GAClC3hB,KAAKwL,IAAIpJ,SAAQ,SAAUgD,EAAQyP,GAC/B8M,EAASvc,EAAQyP,OAGzBwV,EAAMzpB,UAAU2K,IAAM,SAAUlJ,GAC5B,IAAI4sB,EAAKjvB,KAAKgvB,UAAU3sB,GACpBsrB,EAAIzU,KAAKC,UAAU8V,GAClBjvB,KAAKoqB,MAAMI,IAAImD,KAChB3tB,KAAKoqB,MAAM5e,IAAImiB,EAAGsB,GAClBjvB,KAAKwL,IAAIlJ,KAAK2sB,KAGtB5E,EAAMzpB,UAAU6K,KAAO,WACnB,OAAOzL,KAAKwL,IAAInK,QAEpBgpB,EAAMzpB,UAAUwuB,OAAS,SAAUluB,GAC/B,OAAOlB,KAAKwL,IAAItK,IAEpBmpB,EAAMzpB,UAAUmqB,QAAU,SAAU1oB,GAChC,IAAI4sB,EAAKjvB,KAAKgvB,UAAU3sB,GACpBsrB,EAAIzU,KAAKC,UAAU8V,GACnBI,EAAO,EAMX,OALArvB,KAAKwL,IAAIpJ,SAAQ,SAAU0B,EAAG+Q,GACtBqE,KAAKC,UAAUrV,KAAO6pB,IACtB0B,EAAOxa,MAGRwa,GAEXhF,EAAMzpB,UAAUmF,WAAa,WACzB,OAAO/F,KAAKwL,KAET6e,EA7DgB,GA+D3B7oB,EAAQ6oB,MAAQA,EAChB,IAAI3gB,EAAM,IAAIP,EAAI,CACd7F,MAAO,CACH,CAAEZ,GAAI,EAAGU,SAAS,GAClB,CAAEV,GAAI,EAAGU,SAAS,IAEtByF,MAAO,CACH,CAAEc,KAAM,EAAGC,GAAI,EAAGd,YAAa,IAAIe,IAAI,CAAC,CAAC,CAAEC,MAAO,IAAKnE,UAAW,KAAM0C,UAAW,CAACghB,EAAWnf,UAC/F,CAAEP,KAAM,EAAGC,GAAI,EAAGd,YAAa,IAAIe,IAAI,CAAC,CAAC,CAAEC,MAAO,IAAKnE,UAAW,KAAM0C,UAAW,CAACghB,EAAWnf,YAEpG,CAAC,CAAExH,GAAI,EAAGU,SAAS,IAAU,CAAC,MACjC4B,QAAQC,IAAIyE,EAAIrE,oB,gCC5zBhB,IAAItF,EAAaC,MAAQA,KAAKD,WAAe,WACzC,IAAIE,EAAgB,SAAUC,EAAGC,GAI7B,OAHAF,EAAgBG,OAAOC,gBAClB,CAAEC,UAAW,cAAgBC,OAAS,SAAUL,EAAGC,GAAKD,EAAEI,UAAYH,IACvE,SAAUD,EAAGC,GAAK,IAAK,IAAIK,KAAKL,EAAOA,EAAEM,eAAeD,KAAIN,EAAEM,GAAKL,EAAEK,MACpDN,EAAGC,IAE5B,OAAO,SAAUD,EAAGC,GAEhB,SAASO,IAAOV,KAAKW,YAAcT,EADnCD,EAAcC,EAAGC,GAEjBD,EAAEU,UAAkB,OAANT,EAAaC,OAAOS,OAAOV,IAAMO,EAAGE,UAAYT,EAAES,UAAW,IAAIF,IAV1C,GAa7Cc,EAAQC,YAAa,EACrB,IACIkF,EAA4B,SAAUhF,GAEtC,SAASgF,EAAW/E,EAAOyE,EAAgBvE,GACvC,IAAIC,EAAQJ,EAAOL,KAAKtB,KAAM4B,EAAOyE,EAAgBvE,IAAU9B,KAyB/D,OAxBA+B,EAAMyE,SAAW,WACb,IAAI/B,EACAa,EAAMvD,EAAMkB,MAAMlB,EAAME,aAAcF,EAAM4C,SAASlC,IAA+C,QAA1CgC,EAAK1C,EAAMD,MAAMC,EAAME,qBAAkC,IAAPwC,OAAgB,EAASA,EAAGpC,OAAQN,EAAMG,aAK1J,OAJAH,EAAME,aAAeqD,EAAIpC,QACzBnB,EAAMG,YAAcoD,EAAInC,QACxBmC,EAAIhC,MAAMlB,SAAQ,SAAUC,GAAS,OAAOA,EAAMyD,WAAQvB,KAC1De,EAAInC,QAAQf,SAAQ,SAAUC,GAAS,OAAOA,EAAMiB,MAAMlB,SAAQ,SAAUgD,GAAU,OAAOA,EAAOU,WAAQvB,QACrGe,GAEXvD,EAAM2E,QAAU,WACZ3E,EAAMc,WAAa,GACnBd,EAAMe,sBAAwB,EAC9B,IAAK,IAAI5B,EAAI,EAAGA,EAAIa,EAAMD,MAAMT,OAAS,EAAGH,IAAK,CAC7C,IAAI6R,EAAMhR,EAAMkB,MAAMlB,EAAMe,sBAAuBf,EAAM4C,SAASlC,IAAIV,EAAMD,MAAMC,EAAMe,uBAAuBT,OAAQN,EAAMc,YAC7Hd,EAAMe,sBAAwBiQ,EAAI7P,QAClCnB,EAAMc,WAAakQ,EAAI5P,QAE3B,IAAImC,EAAMvD,EAAMkB,MAAMlB,EAAMe,sBAAuBf,EAAM4C,SAASlC,IAAIV,EAAMD,MAAMC,EAAMe,uBAAuBT,OAAQN,EAAMc,YAG7H,OAFAyC,EAAIhC,MAAMlB,SAAQ,SAAUC,GAAS,OAAOA,EAAMyD,WAAQvB,KAC1De,EAAInC,QAAQf,SAAQ,SAAUC,GAAS,OAAOA,EAAMiB,MAAMlB,SAAQ,SAAUgD,GAAU,OAAOA,EAAOU,WAAQvB,QACrGe,GAEXvD,EAAMuE,KAAOvE,EAAMyE,SACnBzE,EAAM0E,IAAM1E,EAAM2E,QACX3E,EAEX,OA7BAhC,EAAU4G,EAAYhF,GA6BfgF,EA9BqB,CADpBX,EAAQ,IAgCZmD,KACR3H,EAAQmF,WAAaA,G,gCC/CrB,IAAI5G,EAAaC,MAAQA,KAAKD,WAAe,WACzC,IAAIE,EAAgB,SAAUC,EAAGC,GAI7B,OAHAF,EAAgBG,OAAOC,gBAClB,CAAEC,UAAW,cAAgBC,OAAS,SAAUL,EAAGC,GAAKD,EAAEI,UAAYH,IACvE,SAAUD,EAAGC,GAAK,IAAK,IAAIK,KAAKL,EAAOA,EAAEM,eAAeD,KAAIN,EAAEM,GAAKL,EAAEK,MACpDN,EAAGC,IAE5B,OAAO,SAAUD,EAAGC,GAEhB,SAASO,IAAOV,KAAKW,YAAcT,EADnCD,EAAcC,EAAGC,GAEjBD,EAAEU,UAAkB,OAANT,EAAaC,OAAOS,OAAOV,IAAMO,EAAGE,UAAYT,EAAES,UAAW,IAAIF,IAV1C,GAa7Cc,EAAQC,YAAa,EACrB,IACIgI,EAAuB,SAAU9H,GAEjC,SAAS8H,EAAM7H,EAAOC,EAAiBC,GACnC,IAAIC,EAAQJ,EAAOL,KAAKtB,KAAM4B,EAAOC,EAAiBC,IAAU9B,KAuGhE,OAtGA+B,EAAM2I,aAAe,WACjB,IAAI4kB,EAAO,IAAIllB,IACfrI,EAAM8G,MAAMzG,SAAQ,SAAUqO,GAC1BA,EAAK3H,YAAY1G,SAAQ,SAAUoc,GAAK,OAAOA,EAAEpc,SAAQ,SAAUoQ,GAC/D,IAAIkB,EAAMlB,EAAW5P,OAChB0sB,EAAK9E,IAAI9W,IACV4b,EAAK9jB,IAAIkI,EAAK4b,EAAK7jB,eAI/B,IAgCI8jB,EAhCY,WACZ,IAAIrsB,EAAU,EACd,OAAOnB,EAAMuB,MAAMY,QAAO,SAAUC,EAAKsJ,GACrC,IAAI5E,EAAQ9G,EAAM8G,MAAMgK,QAAO,SAAUpC,GAAQ,OAAOA,EAAK7G,KAAO6D,EAAK/K,MACrEqQ,EAAM,GAyBV,OAxBAuc,EAAKltB,SAAQ,WAAc,OAAO2Q,EAAIzQ,UAAKiC,MAC3CsE,EAAMzG,SAAQ,SAAUqO,GACpBA,EAAK3H,YAAY1G,SAAQ,SAAUoc,GAAK,OAAOA,EAAEpc,SAAQ,SAAUoQ,GAC/D,IAAIkB,EAAMlB,EAAW5P,OACjB4sB,EAAWF,EAAK7sB,IAAIiR,GACnBX,EAAIyc,KACLzc,EAAIyc,GAAY,CACZ9sB,GAAIQ,EACJE,QAASqK,EAAKrK,QACdR,OAAQ8Q,GAEZxQ,cAIwD,IAAhE6P,EAAIF,QAAO,SAAU/O,GAAK,YAAaS,IAANT,KAAoBzC,SACrD0R,EAAI,GAAK,CACLrQ,GAAIQ,EACJE,QAASqK,EAAKrK,QACdR,OAAQ,KAEZM,KAEJiB,EAAI7B,KAAKyQ,GACF5O,IACR,IAEUsrB,GACb5E,EAAS0E,EAAWrrB,QAAO,SAAUC,EAAKurB,EAAI7a,GAc9C,OAbY9S,EAAM8G,MAAMgK,QAAO,SAAUpC,GAAQ,OAAOA,EAAK9G,OAAS5H,EAAMuB,MAAMuR,GAAOnS,MACnFN,SAAQ,SAAUqO,GAAQ,OAAOA,EAAK3H,YAAY1G,SAAQ,SAAUoc,GAAK,OAAOA,EAAEpc,SAAQ,SAAUoQ,GACtGkd,EAAGttB,SAAQ,SAAU0B,GACjBkB,QAAQC,IAAInB,QACFS,IAANT,GACAK,EAAI7B,KAAK,CACLqH,KAAM7F,EAAEpB,GACRkH,GAAI2lB,EAAW9e,EAAK7G,IAAI0lB,EAAK7sB,IAAI+P,EAAW5P,SAASF,GACrDoG,YAAa,IAAIe,IAAI,CAAC,CAAC,CAAEC,MAAO0I,EAAW1I,wBAKpD3F,IACR,IACC0E,EAAQ,GACZgiB,EAAOhgB,MAAK,SAAUC,EAAG3K,GAAK,OAAO2K,EAAEnB,KAAOxJ,EAAEwJ,MAAQmB,EAAElB,GAAKzJ,EAAEyJ,MACjE,IAAK,IAAI1I,EAAI,EAAGA,EAAI2pB,EAAOxpB,OAAQH,IAAK,CAGpC,IAFA,IAAIiD,EAAM,GACN6mB,EAAQ,EACHtf,EAAIxK,EAAGwK,EAAImf,EAAOxpB,OAAQqK,IAC3Bmf,EAAO3pB,GAAGyI,OAASkhB,EAAOnf,GAAG/B,MAAQkhB,EAAO3pB,GAAG0I,KAAOihB,EAAOnf,GAAG9B,KAChEzF,EAAI7B,KAAK/B,MAAMoJ,KAAKkhB,EAAOnf,GAAG5C,aAAa,GAAG,IAC9CkiB,KAGRniB,EAAMvG,KAAK,CACPqH,KAAMkhB,EAAO3pB,GAAGyI,KAChBC,GAAIihB,EAAO3pB,GAAG0I,GACdd,YAAa,IAAIe,IAAI,CAAC1F,MAE1BjD,GAAK8pB,EAAQ,EAEjB,IAAI7T,EAASpV,EAAMF,gBAAgBgC,KAAI,SAAUtB,GAAQ,OAAOA,EAAKG,MAkBrE,MAAO,CACHqU,UAAW,CAAElO,MAAOA,EAAOvF,MAlBnBisB,EAAWrrB,QAAO,SAAUC,EAAKurB,EAAI7a,GAM7C,OALA6a,EAAGttB,SAAQ,SAAU0B,GACbA,GACAK,EAAI7B,KAAKwB,MAGVK,IACR,KAYC6S,MAXQG,EAAOjT,QAAO,SAAUC,EAAKzB,GACrC,IAAIitB,EAAcJ,EAAW7sB,GAAImQ,QAAO,SAAU/O,GAC9C,QAAUS,IAANT,EACA,OAAOA,KAIf,OADAK,EAAI7B,KAAKqtB,EAAY,IACdxrB,IACR,MAMPpC,EAAMuE,KAAOvE,EAAM+C,OACnB/C,EAAM0E,IAAM1E,EAAMY,MACXZ,EAEX,OA3GAhC,EAAU0J,EAAO9H,GA2GV8H,EA5GgB,CADJzD,EAAQ,KA8GZtE,gBACnBF,EAAQiI,MAAQA,G,gCC7HhB,IAAI1J,EAAaC,MAAQA,KAAKD,WAAe,WACzC,IAAIE,EAAgB,SAAUC,EAAGC,GAI7B,OAHAF,EAAgBG,OAAOC,gBAClB,CAAEC,UAAW,cAAgBC,OAAS,SAAUL,EAAGC,GAAKD,EAAEI,UAAYH,IACvE,SAAUD,EAAGC,GAAK,IAAK,IAAIK,KAAKL,EAAOA,EAAEM,eAAeD,KAAIN,EAAEM,GAAKL,EAAEK,MACpDN,EAAGC,IAE5B,OAAO,SAAUD,EAAGC,GAEhB,SAASO,IAAOV,KAAKW,YAAcT,EADnCD,EAAcC,EAAGC,GAEjBD,EAAEU,UAAkB,OAANT,EAAaC,OAAOS,OAAOV,IAAMO,EAAGE,UAAYT,EAAES,UAAW,IAAIF,IAV1C,GAa7Cc,EAAQC,YAAa,EACrB,IACIuI,EAAuB,SAAUrI,GAEjC,SAASqI,EAAMpI,EAAOC,EAAiBC,GACnC,IAAIC,EAAQJ,EAAOL,KAAKtB,KAAM4B,EAAOC,EAAiBC,IAAU9B,KAsChE,OArCA+B,EAAMC,QAAU,WACZD,EAAME,aAAe,EACrBF,EAAMG,YAAc,GACpBH,EAAMI,YAAc,GACpBJ,EAAMF,gBAAgBO,SAAQ,SAAUC,GACpCN,EAAMI,YAAYG,KAAK,CACnBC,KAAMR,EAAMS,WAAWC,IAAIJ,EAAMK,UAI7CX,EAAM0I,aAAe,WACjB,IAAImlB,EAAW,IAAIxlB,IACnBrI,EAAMuB,MAAMlB,SAAQ,SAAUqL,GAAQ,OAAOmiB,EAASpkB,IAAIiC,EAAK/K,GAAI,CAAEA,GAAI+K,EAAK/K,GAAIU,QAASqK,EAAKrK,QAASR,OAAQ6K,EAAK7K,YACtH,IAAIitB,EAAa9tB,EAAM8G,MAAMhF,KAAI,SAAU4M,GACvC,IAAIqf,EAAiB,IAAIjmB,IACrBkmB,EAAe,GAMnB,OALAtf,EAAK3H,YAAY1G,SAAQ,SAAU0B,GAAK,OAAOA,EAAE1B,SAAQ,SAAUoQ,GAC/D,IAAI/N,EACJsrB,EAAaztB,KAAK,CAAEwH,MAAO0I,EAAW1I,MAAOlH,OAAyC,QAAhC6B,EAAKmrB,EAASntB,IAAIgO,EAAK7G,WAAwB,IAAPnF,OAAgB,EAASA,EAAG7B,eAE9HktB,EAAevkB,IAAIwkB,GACZ,CAAEpmB,KAAM8G,EAAK9G,KAAMC,GAAI6G,EAAK7G,GAAId,YAAagnB,MAGxD,OADA9qB,QAAQC,IAAI,OAAQlD,EAAMF,iBACnB,CACHkV,UAAW,CAAElO,MAAOgnB,EAAYvsB,MAAOvB,EAAMuB,MAAMO,KAAI,SAAU4J,GAAQ,MAAQ,CAAE/K,GAAI+K,EAAK/K,GAAIU,QAASqK,EAAKrK,aAC9G4T,MAAOjV,EAAMF,gBAAgBgC,KAAI,SAAUynB,GAAa,MAAQ,CAAE5oB,GAAI4oB,EAAU5oB,GAAIU,QAASkoB,EAAUloB,cAG/GrB,EAAMuE,KAAOvE,EAAM+C,OAOnB/C,EAAM0E,IAAM1E,EAAMY,MACXZ,EAEX,OA1CAhC,EAAUiK,EAAOrI,GA0CVqI,EA3CgB,CADJhE,EAAQ,KA6CZtE,gBACnBF,EAAQwI,MAAQA,I","file":"static/js/main.9eeef50d.chunk.js","sourcesContent":["\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nexports.__esModule = true;\nvar Computer_1 = require(\"./Computer\");\nvar OutputAutomata = /** @class */ (function (_super) {\n    __extends(OutputAutomata, _super);\n    function OutputAutomata(graph, startStatements, input) {\n        var _this = _super.call(this, graph, startStatements) || this;\n        // isDeterministic(): boolean {\n        //     const ret = this.matrix.reduce((acc: boolean, line) =>\n        //         acc && line.reduce((_: boolean, cell) =>\n        //             cell.reduce((accCell: boolean, stmt, index) => {\n        //                 if (index !== 0) {\n        //                     if (stmt.stackDown !== undefined) {\n        //                         return accCell && !(stmt.stackDown === cell[0].stackDown)\n        //                     }\n        //                     if (stmt.stackDown === undefined) {\n        //                         return accCell && false\n        //                     }\n        //                 }\n        //                 return accCell\n        //             }\n        //                 , acc),\n        //             acc),\n        //         true)\n        //     return ret \n        // }\n        _this.restart = function () {\n            _this.counterSteps = 0;\n            _this.historiStep = [];\n            _this.curPosition = [];\n            _this.startStatements.forEach(function (value) {\n                _this.curPosition.push({\n                    stmt: _this.statements.get(value.id)\n                });\n            });\n        };\n        _this.oaRun = function () {\n            _this.historiRun = [];\n            _this.counterStepsForResult = 0;\n            var output;\n            for (var i = 0; i < _this.input.length; i++) {\n                var ref = {\n                    counterSteps: _this.counterStepsForResult,\n                    curPosition: _this.curPosition,\n                    historiStep: _this.historiRun\n                };\n                var after = _this._step(ref);\n                _this.counterStepsForResult = ref.counterSteps;\n                _this.curPosition = ref.curPosition;\n                _this.historiRun = ref.historiStep;\n                output = after.output;\n            }\n            return {\n                counter: _this.counterStepsForResult,\n                history: _this.historiRun,\n                isAdmit: _this.haveAdmitting(_this.curPosition),\n                nodes: _this.toNodes(_this.curPosition),\n                output: output\n            };\n        };\n        _this.nextStepPosition = function (position, by) {\n            return _this.cellMatrix(position.stmt.idLogic, by).map(function (v) { return ({ position: { stmt: v }, output: v.output }); });\n        };\n        _this.nextStepPositions = function (positions, by) {\n            var nextPOs = positions.map(function (v) { return _this.nextStepPosition(v, by); });\n            var nextPs = nextPOs.reduce(function (acc, pos) {\n                pos.forEach(function (po) { return acc.push(po.position); });\n                return acc;\n            }, []);\n            var nextOs = nextPOs.reduce(function (acc, pos) {\n                pos.forEach(function (po) {\n                    if (po.output === undefined) {\n                        throw new Error(\"Output undefinded\");\n                    }\n                    acc.push(po.output);\n                });\n                return acc;\n            }, []);\n            return { positions: nextPs, outputs: nextOs };\n        };\n        _this._step = function (ref) {\n            var _a;\n            var trNum = _this.alphabet.get((_a = _this.input[ref.counterSteps]) === null || _a === void 0 ? void 0 : _a.value);\n            var nextPositions = _this.nextStepPositions(ref.curPosition, trNum);\n            ref.curPosition = nextPositions.positions;\n            var nodesOfCurPos = _this.toNodes(ref.curPosition);\n            ref.historiStep.push({ nodes: nodesOfCurPos, by: trNum });\n            if (ref.curPosition.length > 0) {\n                ref.counterSteps++;\n            }\n            return {\n                counter: ref.counterSteps,\n                history: ref.historiStep,\n                isAdmit: _this.haveAdmitting(ref.curPosition),\n                nodes: nodesOfCurPos,\n                output: nextPositions.outputs\n            };\n        };\n        _this.oaStep = function () {\n            var ref = {\n                counterSteps: _this.counterSteps,\n                curPosition: _this.curPosition,\n                historiStep: _this.historiStep\n            };\n            var after = _this._step(ref);\n            _this.counterSteps = ref.counterSteps;\n            _this.curPosition = ref.curPosition;\n            _this.historiStep = ref.historiStep;\n            return {\n                counter: after.counter,\n                history: after.history,\n                isAdmit: after.isAdmit,\n                nodes: after.nodes,\n                output: after.output\n            };\n        };\n        _this.setInput = function (input) {\n            _this.input = [];\n            input.forEach(function (value) {\n                _this.input.push({ idLogic: _this.alphabet.get(value), value: value });\n            });\n            _this.restart();\n        };\n        _this.curPosition = [];\n        startStatements.forEach(function (value) {\n            _this.curPosition.push({\n                stmt: _this.statements.get(value.id)\n            });\n        });\n        _this.setInput(input);\n        _this.counterSteps = 0;\n        console.log(\"ALPHBT\");\n        _this.alphabet.forEach(function (value, key) { return console.log(value, key); });\n        console.log(\"STMTS\");\n        _this.statements.forEach(function (value) { return console.log(value); });\n        console.log(_this.curPosition);\n        _this.matrix.forEach(function (value) {\n            console.log();\n            value.forEach(function (value1) { return console.log(value1); });\n        });\n        return _this;\n    }\n    OutputAutomata.prototype.isDeterministic = function () {\n        var ret = true;\n        this.matrix.forEach(function (line) { return line.forEach(function (cells) {\n            var fstCell = cells[0];\n            var hasDublicates = cells.reduce(function (acc, stmt) { return acc || (stmt.stackDown === fstCell.stackDown); }, false);\n            if (cells.length > 1 && hasDublicates) {\n                ret = false;\n            }\n        }); });\n        return ret;\n    };\n    OutputAutomata.prototype.toNodes = function (positions) {\n        var _this = this;\n        var retNodes = [];\n        positions.forEach(function (value) {\n            var temp = __assign(__assign({}, _this.nodes[value.stmt.idLogic]), { stack: value.stack === undefined ? undefined : value.stack.getStorage() });\n            retNodes.push(temp);\n        });\n        return retNodes;\n    };\n    OutputAutomata.prototype.haveAdmitting = function (positions) {\n        return positions.reduce(function (acc, p) { return acc && p.stmt.isAdmit; }, true);\n    };\n    return OutputAutomata;\n}(Computer_1.Computer));\nexports.OutputAutomata = OutputAutomata;\n// let nfa = new Moor(\n//     {\n//         nodes: [\n//             { id: 0, isAdmit: false, output: '0' },\n//             { id: 1, isAdmit: false, output: '1' },\n//             { id: 2, isAdmit: false, output: '2' },\n//             { id: 3, isAdmit: false, output: '3' },\n//         ],\n//         edges: [\n//             { from: 0, to: 1, transitions: new Set([[{ title: '5' }]]) },\n//             { from: 1, to: 2, transitions: new Set([[{ title: '10'}]]) },\n//             { from: 2, to: 3, transitions: new Set([[{ title: '10'}]]) },\n//             { from: 3, to: 3, transitions: new Set([[{ title: '5' }]]) },\n//         ]\n//     }, [{ id: 0, isAdmit: false }], [\"5\"])\n// console.log(nfa.run())\n// console.log(nfa.step())\n// console.log(nfa.step())\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nexports.__esModule = true;\nvar EpsilonNFA_1 = require(\"./EpsilonNFA\");\nvar Exceptions_1 = require(\"./Exceptions\");\nvar DFA = /** @class */ (function (_super) {\n    __extends(DFA, _super);\n    function DFA(graph, startStatement, input) {\n        var _this = _super.call(this, graph, startStatement, input) || this;\n        _this.step = function () {\n            if (!_super.prototype.isDeterministic.call(_this)) {\n                throw new Exceptions_1.NonDeterministic();\n            }\n            return _this.enfaStep();\n        };\n        _this.run = function () {\n            if (!_super.prototype.isDeterministic.call(_this)) {\n                throw new Exceptions_1.NonDeterministic();\n            }\n            return _this.enfaRun();\n        };\n        _this.setInput(input);\n        return _this;\n    }\n    return DFA;\n}(EpsilonNFA_1.EpsilonNFA));\nexports.DFA = DFA;\n// let nfa = new DFA (\n//     {\n//         nodes: [\n//             {id: 1, isAdmit: false},\n//             {id: 2, isAdmit: true},\n//\n//\n//             // {id: 1, isAdmit: false},\n//             // {id: 2, isAdmit: true},\n//             // {id: 3, isAdmit: false},\n//             // {id: 4, isAdmit: true},\n//             // {id: 5, isAdmit: true},\n//             // {id: 6, isAdmit: false},\n//\n//             // {id: 0, isAdmit: false},\n//             // {id: 1, isAdmit: false},\n//             // {id: 2, isAdmit: false},\n//             // {id: 3, isAdmit: false},\n//             // {id: 4, isAdmit: true},\n//             // {id: 5, isAdmit: true},\n//             // {id: 6, isAdmit: false},\n//\n//\n//         ],\n//         edges: [\n//\n//             {from: 1, to: 2, transitions: new Set([ [{title: '0'}] ])},\n//             {from: 2, to: 2, transitions: new Set([ [{title: '0'}] ])},\n//\n//             //youtube\n//             // {from: 1, to: 5, transitions: new Set([ [{title: 'a'}] ])},\n//             // {from: 1, to: 6, transitions: new Set([ [{title: 'b'}] ])},\n//             // {from: 2, to: 6, transitions: new Set([ [{title: 'a'}] ])},\n//             // {from: 2, to: 4, transitions: new Set([ [{title: 'b'}] ])},\n//             // {from: 3, to: 6, transitions: new Set([ [{title: 'a'}] ])},\n//             // {from: 3, to: 6, transitions: new Set([ [{title: 'b'}] ])},\n//             // {from: 4, to: 3, transitions: new Set([ [{title: 'a'}] ])},\n//             // {from: 4, to: 4, transitions: new Set([ [{title: 'b'}] ])},\n//             // {from: 5, to: 2, transitions: new Set([ [{title: 'a'}] ])},\n//             // {from: 5, to: 3, transitions: new Set([ [{title: 'b'}] ])},\n//             // {from: 6, to: 3, transitions: new Set([ [{title: 'a'}] ])},\n//             // {from: 6, to: 3, transitions: new Set([ [{title: 'b'}] ])},\n//\n//\n//             // {from: 0, to: 1, transitions: new Set([ [{title: '1'}] ])},\n//             // {from: 0, to: 3, transitions: new Set([ [{title: '0'}] ])},\n//             // {from: 1, to: 2, transitions: new Set([ [{title: '0'}] ])},\n//             // {from: 1, to: 5, transitions: new Set([ [{title: '1'}] ])},\n//             // {from: 2, to: 2, transitions: new Set([ [{title: '0'}] ])},\n//             // {from: 2, to: 5, transitions: new Set([ [{title: '1'}] ])},\n//             // {from: 5, to: 5, transitions: new Set([ [{title: '0'}, {title: '1'}] ])},\n//             // {from: 3, to: 0, transitions: new Set([ [{title: '0'}] ])},\n//             // {from: 3, to: 4, transitions: new Set([ [{title: '1'}] ])},\n//             // {from: 4, to: 5, transitions: new Set([ [{title: '1'}] ])},\n//             // {from: 4, to: 2, transitions: new Set([ [{title: '0'}] ])},\n//\n//             //refference\n//             // {from: 0, to: 1, transitions: new Set([ [{title: 'a'}] ])},\n//             // {from: 0, to: 2, transitions: new Set([ [{title: 'b'}] ])},\n//             // {from: 1, to: 3, transitions: new Set([ [{title: 'a'}] ])},\n//             // {from: 1, to: 4, transitions: new Set([ [{title: 'b'}] ])},\n//             // {from: 2, to: 3, transitions: new Set([ [{title: 'a'}] ])},\n//             // {from: 2, to: 5, transitions: new Set([ [{title: 'b'}] ])},\n//             // {from: 3, to: 3, transitions: new Set([ [{title: 'a'}, {title: 'b'}] ])},\n//             // {from: 4, to: 4, transitions: new Set([ [{title: 'a'}] ])},\n//             // {from: 4, to: 6, transitions: new Set([ [{title: 'b'}] ])},\n//             // {from: 5, to: 5, transitions: new Set([ [{title: 'a'}] ])},\n//             // {from: 5, to: 6, transitions: new Set([ [{title: 'b'}] ])},\n//             // {from: 6, to: 6, transitions: new Set([ [{title: 'a'}, {title: 'b'}] ])},\n//\n//         ]\n//     }, [{id: 1, isAdmit: false}], [],\n// )\n// console.log(nfa.minimizeDfa().start)\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nexports.__esModule = true;\nvar EpsilonNFA_1 = require(\"./EpsilonNFA\");\nvar NFA = /** @class */ (function (_super) {\n    __extends(NFA, _super);\n    function NFA(graph, startStatement, input) {\n        var _this = _super.call(this, graph, startStatement, input) || this;\n        if (_this.haveEpsilon()) {\n            throw new Error('Epsilon Transitions');\n        }\n        return _this;\n    }\n    return NFA;\n}(EpsilonNFA_1.EpsilonNFA));\nexports.NFA = NFA;\n//\n// let nfa = new NFA (\n//     {\n//         nodes: [\n//             {id: 0, isAdmit: false},\n//             {id: 1, isAdmit: false},\n//             {id: 2, isAdmit: false},\n//\n//         ],\n//         edges: [\n//             {from: 0, to: 0, transitions: new Set([ [{title: '0'}] ])},\n//             {from: 0, to: 1, transitions: new Set([ [{title: '0'}] ])},\n//             {from: 1, to: 2, transitions: new Set([ [{title: '1'}] ])},\n//         ]\n//     }, [{id: 0, isAdmit: false}], [],\n// )\n// nfa.nfaToDfa()\n// nfa.nfaToDfa().nodes.forEach((v) => console.log(v.id))\n// nfa.nfaToDfa().edges.forEach((v) => console.log(v.from, v.to))\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nexports.__esModule = true;\nvar IGraphTypes_1 = require(\"./IGraphTypes\");\nvar PDA_1 = require(\"./PDA\");\nvar Exceptions_1 = require(\"./Exceptions\");\nvar TMMemory = /** @class */ (function () {\n    function TMMemory() {\n        this.storage = ['_'];\n        this.pointer = 0;\n    }\n    TMMemory.prototype.getPointer = function () {\n        return this.pointer;\n    };\n    TMMemory.prototype.reset = function () {\n        this.storage = ['_'];\n        this.pointer = 0;\n    };\n    TMMemory.prototype.lookUp = function () {\n        return this.storage[this.pointer];\n    };\n    TMMemory.prototype.initialize = function (init) {\n        var _this = this;\n        init.forEach(function (value) { return _this.mvRight('_', value); });\n        this.pointer = 0;\n    };\n    TMMemory.prototype.mvRight = function (curr, upd) {\n        if (this.storage[this.pointer] === curr) {\n            this.storage[this.pointer] = upd;\n            this.pointer++;\n        }\n        if (this.pointer === this.storage.length) {\n            this.storage.push('_');\n        }\n    };\n    TMMemory.prototype.mvLeft = function (curr, upd) {\n        if (this.pointer === 0) {\n            if (this.storage[this.pointer] === curr) {\n                this.storage[this.pointer] = upd;\n                this.pointer = 0;\n            }\n            var tmp_1 = ['_'];\n            this.storage.forEach(function (value) { return tmp_1.push(value); });\n            this.storage = tmp_1;\n        }\n        else {\n            if (this.storage[this.pointer] === curr) {\n                this.storage[this.pointer] = upd;\n                this.pointer--;\n            }\n        }\n    };\n    TMMemory.prototype.getStorage = function () {\n        return this.storage;\n    };\n    return TMMemory;\n}());\nexports.TMMemory = TMMemory;\nvar TM = /** @class */ (function (_super) {\n    __extends(TM, _super);\n    function TM(graph, startStatement, input) {\n        var _this = _super.call(this, graph, startStatement, input) || this;\n        _this.mem = new TMMemory();\n        _this.__step = function (counter, tr, histori) {\n            var by = \"\";\n            _this.cellMatrix(_this.curPosition[0].stmt.idLogic, tr).forEach(function (value) {\n                if (value.stackDown === _this.mem.lookUp()) {\n                    if (value.move === IGraphTypes_1.Move.R) {\n                        _this.mem.mvRight(value.stackDown, value.stackPush[0]);\n                        by = value.stackDown;\n                    }\n                    if (value.move === IGraphTypes_1.Move.L) {\n                        _this.mem.mvLeft(value.stackDown, value.stackPush[0]);\n                        by = value.stackDown;\n                    }\n                    _this.assignCurMt({ stmt: _this.statements.get(value.id) });\n                }\n            });\n            histori.push({\n                nodes: [_this.nodes[_this.curPosition[0].stmt.idLogic]],\n                by: by\n                // this.input[counter].value\n            });\n            console.log(\"this.mem.getStorage()\");\n            console.log(_this.mem.getStorage());\n            counter++;\n            return {\n                nodes: [_this.nodes[_this.curPosition[0].stmt.idLogic]],\n                isAdmit: _this.curPosition[0].stmt.isAdmit,\n                counter: counter,\n                history: histori,\n                memory: _this.mem.getStorage(),\n                pointer: _this.mem.getPointer()\n            };\n        };\n        _this.restart = function () {\n            _this.counterSteps = 0;\n            _this.historiStep = [];\n            _this.curPosition = [];\n            _this.mem.reset();\n            _this.curPosition = [{\n                    stmt: _this.statements.get(_this.startStatements[0].id)\n                }];\n        };\n        _this.mtTrun = function () {\n            throw Error(\"TM run\");\n        };\n        _this.setInput = function (input) {\n            _this.input = [];\n            // this.restart()\n            _this.mem.reset();\n            _this.mem.initialize(input);\n            _this.counterSteps = 0;\n            _this.historiStep = [];\n            _this.curPosition = [];\n            _this.curPosition = [{\n                    stmt: _this.statements.get(_this.startStatements[0].id)\n                }];\n            console.log(_this.curPosition);\n        };\n        _this.mtStep = function () {\n            console.log(\"STPMT\");\n            var ret = _this.__step(_this.counterSteps, 0, _this.historiStep);\n            _this.counterSteps = ret.counter;\n            _this.historiStep = ret.history;\n            if (ret.history[ret.history.length - 1].by === \"\") {\n                ret.nodes = [];\n            }\n            return __assign(__assign({}, ret), { memory: _this.mem.getStorage() });\n        };\n        _this.step = function () {\n            if (!_super.prototype.isDeterministic.call(_this)) {\n                throw new Exceptions_1.NonDeterministic();\n            }\n            return _this.mtStep();\n        };\n        _this.run = function () {\n            if (!_super.prototype.isDeterministic.call(_this)) {\n                throw new Exceptions_1.NonDeterministic();\n            }\n            return _this.mtTrun();\n        };\n        _this.checkMemFormat(graph);\n        // if (!this.isDeterministic()) {\n        //     throw Error (\"Not deterministic\")\n        // }\n        _this.mem.initialize(input);\n        _this.curPosition = [{\n                stmt: _this.statements.get(_this.startStatements[0].id)\n            }];\n        console.log(\"MTMTMTMTMTTMMTMTMT::::::::::\");\n        return _this;\n    }\n    TM.prototype.checkMemFormat = function (graph) {\n        var isMtMem = true;\n        graph.edges.forEach(function (value) { return value.transitions.forEach(function (value1) {\n            value1.forEach(function (value2) {\n                var _a, _b;\n                if (((_a = value2.stackPush) === null || _a === void 0 ? void 0 : _a.length) && ((_b = value2.stackPush) === null || _b === void 0 ? void 0 : _b.length) > 1) {\n                    isMtMem = false;\n                }\n            });\n        }); });\n        if (!isMtMem) {\n            throw Error(\"Not MT mem\");\n        }\n    };\n    TM.prototype.curMt = function () {\n        return this.curPosition[0];\n    };\n    TM.prototype.assignCurMt = function (newPos) {\n        this.curPosition[0] = newPos;\n    };\n    return TM;\n}(PDA_1.PDA));\nexports.TM = TM;\n// let nfa = new TM(\n//     {\n//         nodes: [\n//             {id: 1, isAdmit: false},\n//             {id: 2, isAdmit: false},\n//             {id: 3, isAdmit: false},\n//             {id: 4, isAdmit: false},\n//\n//         ],\n//         edges: [\n//             { from: 1, to: 1, transitions: new Set([[{title: EPS, stackDown: '0', stackPush: ['0'], move: Move.R}, {title: EPS, stackDown: '1', stackPush: ['1'], move: Move.R} ]]) },\n//             { from: 1, to: 2, transitions: new Set([[{title: EPS, stackDown: '_', stackPush: ['_'], move: Move.L} ]]) },\n//             { from: 2, to: 2, transitions: new Set([[{title: EPS, stackDown: '1', stackPush: ['0'], move: Move.L} ]]) },\n//             { from: 2, to: 3, transitions: new Set([[{title: EPS, stackDown: '0', stackPush: ['1'], move: Move.L} ]]) },\n//             { from: 2, to: 4, transitions: new Set([[{title: EPS, stackDown: '_', stackPush: ['1'], move: Move.L} ]]) },\n//\n//             // { from: 1, to: 2, transitions: new Set([[ {title: EPS, stackDown: '_', stackPush: ['V'], move: Move.R} ]]) },\n//             // { from: 2, to: 2, transitions: new Set([[ {title: EPS, stackDown: '_', stackPush: ['B'], move: Move.R} ]]) },\n//             // { from: 2, to: 1, transitions: new Set([[ { title: 'b', stackDown: 'b', stackPush: ['6'], move: Move.R } ]]) },\n//             // { from: 3, to: 3, transitions: new Set([[ { title: 'c', stackDown: 'с', stackPush: ['['], move: Move.R } ]]) },\n//             // { from: 3, to: 3, transitions: new Set([[ { title: 'c', stackDown: '_', stackPush: [']'], move: Move.R } ]]) },\n//\n//             // {from: 1, to: 1, transitions: new Set([{title: 'a', stackDown: 'a', stackPush: ['A'], move: Move.R}])},\n//             // {from: 1, to: 2, transitions: new Set([{title: 'c', stackDown: 'b', stackPush: ['V'], move: Move.R}])},\n//             // {from: 2, to: 2, transitions: new Set([{title: 'c', stackDown: '_', stackPush: ['V'], move: Move.R}])},\n//\n//\n//\n//         ]\n//     },  [{id: 1, isAdmit: false}], ['1'])\n// console.log(nfa.step())\n// console.log(nfa.step())\n// console.log(nfa.step())\n// console.log(nfa.step())\n// console.log(nfa.step())\n// console.log(nfa.step())\n// nfa.setInput(['1'])\n// console.log(nfa.step())\n// console.log(nfa.step())\n// console.log(nfa.step())\n// console.log(nfa.step())\n// console.log(nfa.step())\n// console.log(nfa.step())\n// console.log(nfa.step())\n// console.log(nfa.step())\n// console.log(nfa.step())\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nexports.__esModule = true;\nvar PDA_1 = require(\"./PDA\");\nvar Exceptions_1 = require(\"./Exceptions\");\nvar DPDA = /** @class */ (function (_super) {\n    __extends(DPDA, _super);\n    function DPDA(graph, startStatement, input, byEmpty) {\n        var _this = _super.call(this, graph, startStatement, input, byEmpty) || this;\n        // step = this.pdaStep\n        // run = this.pdaRun\n        _this.step = function () {\n            if (!_super.prototype.isDeterministic.call(_this)) {\n                throw new Exceptions_1.NonDeterministic();\n            }\n            return _this.pdaStep();\n        };\n        _this.run = function () {\n            if (!_super.prototype.isDeterministic.call(_this)) {\n                throw new Exceptions_1.NonDeterministic();\n            }\n            return _this.pdaRun();\n        };\n        _this.setInput(input);\n        return _this;\n        // if (!super.isDeterministic()) {\n        //     throw new Error(\"Is not determenistic\")\n        // }\n    }\n    return DPDA;\n}(PDA_1.PDA));\nexports.DPDA = DPDA;\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nexports.__esModule = true;\nvar Exceptions_1 = require(\"./Exceptions\");\nvar Mealy_1 = require(\"./Mealy\");\nvar DMealy = /** @class */ (function (_super) {\n    __extends(DMealy, _super);\n    function DMealy(graph, startStatements, input) {\n        var _this = _super.call(this, graph, startStatements, input) || this;\n        _this.step = function () {\n            if (!_super.prototype.isDeterministic.call(_this)) {\n                throw new Exceptions_1.NonDeterministic();\n            }\n            return _this.oaRun();\n        };\n        _this.run = function () {\n            if (!_super.prototype.isDeterministic.call(_this)) {\n                throw new Exceptions_1.NonDeterministic();\n            }\n            return _this.oaRun();\n        };\n        return _this;\n    }\n    return DMealy;\n}(Mealy_1.Mealy));\nexports.DMealy = DMealy;\nvar nfa = new DMealy({\n    nodes: [\n        { id: 0, isAdmit: false },\n        { id: 1, isAdmit: false },\n    ],\n    edges: [\n        { from: 0, to: 0, transitions: new Set([[{ title: '5', output: 'n' }]]) },\n        { from: 0, to: 1, transitions: new Set([[{ title: '5', output: 'n' }]]) },\n    ]\n}, [{ id: 0, isAdmit: false }], []);\nconsole.log(nfa.isDeterministic());\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nexports.__esModule = true;\nvar Exceptions_1 = require(\"./Exceptions\");\nvar Moore_1 = require(\"./Moore\");\nvar DMoore = /** @class */ (function (_super) {\n    __extends(DMoore, _super);\n    function DMoore(graph, startStatements, input) {\n        var _this = _super.call(this, graph, startStatements, input) || this;\n        _this.step = function () {\n            if (!_super.prototype.isDeterministic.call(_this)) {\n                throw new Exceptions_1.NonDeterministic();\n            }\n            return _this.oaRun();\n        };\n        _this.run = function () {\n            if (!_super.prototype.isDeterministic.call(_this)) {\n                throw new Exceptions_1.NonDeterministic();\n            }\n            return _this.oaRun();\n        };\n        return _this;\n    }\n    return DMoore;\n}(Moore_1.Moore));\nexports.DMoore = DMoore;\nvar nfa = new DMoore({\n    nodes: [\n        { id: 0, isAdmit: false },\n        { id: 1, isAdmit: false },\n        { id: 2, isAdmit: false },\n    ],\n    edges: [\n        { from: 0, to: 0, transitions: new Set([[{ title: '1' }]]) },\n        { from: 0, to: 1, transitions: new Set([[{ title: '1' }]]) },\n    ]\n}, [{ id: 0, isAdmit: false }], []);\nconsole.log(nfa.isDeterministic());\n","\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nexports.__esModule = true;\nexports.eof = { isAdmit: false, idLogic: -1, id: -1 };\nexports.EPS = 'Epsilon';\nexports.BOTTOM = \"Z0\";\nvar Computer = /** @class */ (function () {\n    function Computer(graph, startStatements) {\n        // this.setStartStatements(graph, startStatements)\n        var _this = this;\n        this.input = [];\n        this.alphabet = new Map();\n        this.statements = new Map();\n        this.startStatements = [];\n        this.edges = [];\n        this.counterSteps = 0;\n        this.counterStepsForResult = 0;\n        this.historiStep = [];\n        this.historiRun = [];\n        this.matrix = [];\n        this.byEmptyStackAdmt = function (isAdmt) {\n            throw new Error(\"PDA attribute\");\n        };\n        this.nfaToDfa = function () {\n            throw new Error(\"DFA conversion\");\n        };\n        this.minimizeDfa = function () {\n            throw new Error(\"DFA conversion\");\n        };\n        this.mooreToMealy = function () {\n            throw new Error(\"Moor conversion\");\n        };\n        this.mealyToMoore = function () {\n            throw new Error(\"Moor conversion\");\n        };\n        this.getCurrNode = function () {\n            return _this.currentNode.id;\n        };\n        graph.edges\n            .sort(function (a, b) { return a.from - b.from; })\n            .forEach(function (value) { return _this.edges.push({\n            transitions: value.transitions === undefined ? new Set([[{ title: \"\" }]]) : value.transitions,\n            from: value.from,\n            to: value.to,\n            localValue: []\n        }); });\n        var _loop_1 = function (i) {\n            this_1.edges[i].localValue = [];\n            this_1.edges[i].transitions.forEach(function (value) {\n                return value.forEach(function (value1) { return _this.edges[i].localValue.push(value1); });\n            }\n            //    this.edges[i].localValue!.push(value)\n            );\n        };\n        var this_1 = this;\n        for (var i = 0; i < this.edges.length; i++) {\n            _loop_1(i);\n        }\n        this.getAlphabetFromEdges();\n        this.getStatementsFromNodes(graph.nodes);\n        this.startStatements = startStatements;\n        this.currentNode = startStatements[0];\n        this.nodes = graph.nodes;\n        this.createMatrix();\n    }\n    Computer.prototype.getAlphabetFromEdges = function () {\n        var _this = this;\n        var alphabetSet = new Set();\n        for (var i_1 = 0; i_1 < this.edges.length; i_1++) {\n            this.edges[i_1].localValue.forEach(function (value) {\n                if (value.title !== \"\") {\n                    alphabetSet.add(value.title);\n                }\n            });\n        }\n        var i = 0;\n        alphabetSet.forEach(function (value) {\n            if (value !== \"\") {\n                _this.alphabet.set(value, i);\n                i++;\n            }\n        });\n    };\n    Computer.prototype.getStatementsFromNodes = function (nodes) {\n        for (var i = 0; i < nodes.length; i++) {\n            this.statements.set(nodes[i].id, {\n                id: nodes[i].id,\n                isAdmit: nodes[i].isAdmit,\n                idLogic: i,\n                output: nodes[i].output\n            });\n        }\n    };\n    Computer.prototype.createMatrix = function () {\n        for (var i = 0; i < this.statements.size; i++) {\n            this.matrix[i] = [];\n            for (var j = 0; j < this.alphabet.size; j++) {\n                this.matrix[i][j] = [];\n                //{idLogic: -1, id: -1, isAdmit: false, stackDown: \"empty\", stackPush: []}\n            }\n        }\n        for (var i = 0; i < this.edges.length; i++) {\n            var statementFrom = this.statements.get(this.edges[i].from);\n            var statementTo = this.statements.get(this.edges[i].to);\n            for (var j = 0; j < this.edges[i].localValue.length; j++) {\n                var letterId = this.alphabet.get(this.edges[i].localValue[j].title);\n                // if (letterId === undefined) {\n                //     throw new Error(\"A\")\n                // }\n                if (letterId === undefined) {\n                    continue;\n                }\n                console.log(letterId);\n                console.log(this.edges[i].localValue[j].title);\n                var stDwn = this.edges[i].localValue[j].stackDown;\n                var stPsh = this.edges[i].localValue[j].stackPush;\n                var mv = this.edges[i].localValue[j].move;\n                var output = this.edges[i].localValue[j].output === undefined ? statementTo.output : this.edges[i].localValue[j].output;\n                if (stDwn === undefined || stPsh === undefined || stDwn === \"\" || stPsh.length === 0) {\n                    stDwn = exports.EPS;\n                    stPsh = [exports.EPS];\n                }\n                // console.log(statementTo.move)\n                this.matrix[statementFrom.idLogic][letterId].push(__assign(__assign({}, statementTo), { stackDown: stDwn, stackPush: stPsh, move: mv, output: output }));\n            }\n        }\n        this.alphabet.forEach(function (value, key) { return console.log(value, ' ', key); });\n        this.statements.forEach(function (value) { return console.log(value); });\n        this.matrix.forEach(function (value) {\n            console.log();\n            value.forEach(function (value1) { return console.log(value1); });\n        });\n    };\n    Computer.prototype.cellMatrix = function (i, j) {\n        return this.matrix[i][j];\n    };\n    return Computer;\n}());\nexports.Computer = Computer;\n","\"use strict\";\nexports.__esModule = true;\nvar Stack = /** @class */ (function () {\n    function Stack(capacity) {\n        if (capacity === void 0) { capacity = Infinity; }\n        this.capacity = capacity;\n        this.storage = [];\n    }\n    Stack.prototype.push = function (item) {\n        if (this.size() === this.capacity) {\n            throw Error(\"Stack has reached max capacity, you cannot add more items\");\n        }\n        this.storage.push(item);\n    };\n    Stack.prototype.pop = function () {\n        return this.storage.pop();\n    };\n    Stack.prototype.peek = function () {\n        return this.storage[this.size() - 1];\n    };\n    Stack.prototype.size = function () {\n        return this.storage.length;\n    };\n    Stack.prototype.getStorage = function () {\n        var list = [];\n        this.storage.forEach(function (value) { return list.push(value); });\n        return list;\n    };\n    Stack.prototype.cpyTo = function (stack) {\n        this.storage.forEach(function (value) { return stack.push(value); });\n        return stack;\n    };\n    return Stack;\n}());\nexports.Stack = Stack;\n","\"use strict\";\nexports.__esModule = true;\n","import React, {AllHTMLAttributes} from \"react\";\nimport \"./ControlWrapper.css\";\nimport Paper from \"@mui/material/Paper\";\nimport Typography from \"@mui/material/Typography\";\n\nexport interface ControlWrapperProps extends AllHTMLAttributes<HTMLElement> {\n    title: string,\n    visible: boolean\n}\n\nclass ControlWrapper extends React.Component<ControlWrapperProps, {}> {\n    static defaultProps = {\n        visible: true\n    }\n\n    render() {\n        const {visible, title, style, className, children, ...restProps} = this.props;\n\n        return (\n            <Paper className={`control-wrapper${visible ? \"\" : \"--hidden\"} ${className}`}\n                   variant=\"outlined\"\n                   style={style}\n                   {...restProps}\n            >\n                <div className=\"control-wrapper--content\">\n                    <div>\n                        <Typography variant=\"h6\">\n                            {title}\n                        </Typography>\n                    </div>\n\n                    <div className=\"control-wrapper--child\">\n                        {children}\n                    </div>\n                </div>\n            </Paper>\n        );\n    }\n}\n\nexport default ControlWrapper;","import React, { ChangeEvent } from \"react\";\nimport \"./NodeControl.css\";\nimport { node } from \"../../react-graph-vis-types\";\nimport ControlWrapper from \"../ControlWrapper/ControlWrapper\";\n\nimport Switch from \"@mui/material/Switch\";\nimport TextField from \"@mui/material/TextField\";\nimport Button from \"@mui/material/Button\";\nimport FormControlLabel from \"@mui/material/FormControlLabel\";\nimport FormControl from \"@mui/material/FormControl\";\n\ninterface nodeControlProps {\n    node: node | null,\n    changeNodeLabel: (id: number, label: string) => void,\n    changeStateIsAdmit: (id: number, isAdmit: boolean) => void,\n    changeStateIsInitial: (id: number, isInitial: boolean) => void,\n    deleteNode: (id: number) => void,\n    reinitComputer: (() => void)\n}\n\ninterface nodeControlState {\n    prevNodeId: number | undefined,\n    label: string,\n    isAdmit: boolean,\n    isInitial: boolean\n}\n\nclass NodeControl extends React.Component<nodeControlProps, nodeControlState> {\n    constructor(props: nodeControlProps) {\n        super(props);\n\n        this.state = {\n            prevNodeId: this.props.node?.id,\n            label: this.props.node?.label || \"\",\n            isAdmit: this.props.node?.isAdmit || false,\n            isInitial: this.props.node?.isInitial || false\n        }\n    }\n\n    componentDidUpdate(prevProps: Readonly<nodeControlProps>, prevState: Readonly<nodeControlState>) {\n        if (this.props.node?.id !== prevState.prevNodeId) {\n            this.setState({\n                label: this.props.node?.label || \"\",\n                    // + ((\" | \" + this.props.node?.output || \"\")) \n                    \n                isAdmit: this.props.node?.isAdmit || false,\n                isInitial: this.props.node?.isInitial || false,\n                prevNodeId: this.props.node?.id\n            });\n        }\n    }\n\n    onLabelChange = (event: ChangeEvent<HTMLInputElement>): void => {\n        if (this.props.node !== null) {\n            this.props.changeNodeLabel(this.props.node.id, event.target.value);\n            this.setState({ label: event.target.value });\n        }\n    }\n\n    onIsAdmitChanged = (event: ChangeEvent<HTMLInputElement>): void => {\n        if (this.props.node !== null) {\n            this.props.changeStateIsAdmit(this.props.node.id, event.target.checked);\n            this.setState({ isAdmit: event.target.checked }, () => this.props.reinitComputer());\n        }\n    }\n\n    onIsInitialChanged = (event: ChangeEvent<HTMLInputElement>): void => {\n        if (this.props.node !== null && !this.props.node.isAdmit) {\n            this.props.changeStateIsInitial(this.props.node.id, event.target.checked);\n            this.setState({ isInitial: event.target.checked }, () => this.props.reinitComputer());\n        }\n    }\n\n    onDeleteClick = (): void => {\n        if (this.props.node !== null) {\n            this.props.deleteNode(this.props.node.id);\n        }\n    }\n\n    render() {\n        return (\n            <ControlWrapper title=\"Состояние\" visible={this.props.node !== null}>\n                <FormControl>\n\n                    <div className=\"node-control__item\">\n                        <TextField\n                            label=\"Имя\"\n                            size=\"small\"\n                            value={this.state.label}\n                            onChange={this.onLabelChange}\n                        />\n                    </div>\n\n                    <div className=\"node-control__item\">\n                        <FormControlLabel\n                            control={\n                                <Switch\n                                    checked={this.state.isInitial}\n                                    onChange={this.onIsInitialChanged}\n                                />\n                            }\n                            label={\"Начальное\"}\n                        />\n                    </div>\n\n                    <div className=\"node-control__item\">\n                        <FormControlLabel\n                            control={\n                                <Switch\n                                    checked={this.state.isAdmit}\n                                    onChange={this.onIsAdmitChanged}\n                                />\n                            }\n                            label=\"Допускающее\"\n                        />\n                    </div>\n\n                    <div className=\"node-control__item\">\n                        <Button\n                            onClick={this.onDeleteClick}\n                        >\n                            Удалить\n                        </Button>\n                    </div>\n\n                </FormControl>\n            </ControlWrapper>\n        )\n    }\n}\n\nexport default NodeControl;","import {ComputerInfo, ComputerType, edge, graph, node} from \"./react-graph-vis-types\";\nimport {EPS} from \"./Logic/Computer\";\nimport {Move, TransitionParams} from \"./Logic/IGraphTypes\";\nimport { Elements } from \"./App\";\nimport { DataSet } from \"vis-network/standalone/esm/vis-network\";\nimport { Output } from \"./Logic/Types\";\n\n\nconst epsSubstStr = (epsText: string) => (value: string) => value === EPS ? epsText : value\n\nconst epsSubstStrs = (epsText: string) => (values: string[]) => {\n    return values.map(v =>  epsSubstStr(epsText)(v)).join(\":\")\n}\n\nconst mvStr = (value: Move) => value === 0 ? \"L\" : \"R\"\n\nexport const transitionsToLabel = (transitions: Set<TransitionParams[]>, frmt: null | ComputerType ): string => {\n    const maxLength = (): number => {\n        let max: number = 0;\n        if (transitions !== undefined) {\n            transitions.forEach(value => {\n                value.forEach(value1 => {\n                    if (value1.stackDown !== undefined && value1.stackPush !== undefined) {\n                        const phs: number = Math.max(...value1.stackPush.map(o => o === EPS ? 0 : o.length), 0)\n                        const ttl: number = value1.title === EPS ? 0 : value1.title.length\n                        const std: number = value1.stackDown === EPS ? 0 : value1.stackDown.length\n                        max = Math.max(...[phs, ttl, std, max].map(o => o), 0)\n                    }\n                })\n            })\n        }\n        return max\n    }\n\n    let spc = \"\"\n    const pdng_k = 7\n\n    for (let i = 0; i < maxLength() * pdng_k ; i++) {\n        spc += \" \"\n    }\n\n    const epsSubst = epsSubstStr(\"ε\")\n    const epsSubsts = epsSubstStrs(\"ε\")\n\n    spc = frmt === 'tm' ? '       ' : spc\n\n    let str = \"\" + spc\n    if (transitions !== undefined) {\n        if (frmt === 'tm') {\n            transitions.forEach(value => {\n                value.forEach((v) => {\n                    if (v.stackDown !== undefined && v.stackPush !== undefined && v.move !== undefined) {\n                        str += epsSubst(v.stackDown) + \" | \" + epsSubsts(v.stackPush) + \" \" + mvStr(v.move) + \"\\n\" + spc\n                    }\n                })\n            })\n        } else if (frmt === 'pda' || frmt === \"dpda\") {\n            transitions.forEach(value => {\n                value.forEach((v) => {\n                    if (v.title !== undefined && v.title.length > 0 && v.stackDown !== undefined && v.stackDown.length > 0 && v.stackPush !== undefined && v.stackPush.length > 0) {\n                        str += epsSubst(v.title) + \", \" + epsSubst(v.stackDown) + \" | \" + epsSubsts(v.stackPush) + \" \" + \"\\n\" + spc\n                    }\n                })\n            })\n        } else if (frmt === \"dfa\" || frmt === \"nfa\" || frmt === \"nfa-eps\" || frmt === \"moore\" || frmt === \"dmoore\") {\n            transitions.forEach(value => {\n                value.forEach((v) => {\n                    if (v.title !== undefined && v.title.length > 0) {\n                        str += epsSubst(v.title) + \" \" + \"\\n\" + spc\n                    }\n                })\n            })\n        } else if (frmt === \"mealy\" || frmt === \"dmealy\") {\n            transitions.forEach(value => {\n                value.forEach((v) => {\n                    if (v.title !== undefined && v.title.length > 0 && v.output !== undefined) {\n                        str += epsSubst(v.title) + \" | \" + v.output + \"\\n\" + spc\n                    }\n                })\n            })\n        }\n    }\n    return str\n}\n\n\nexport const getTransitionsTitles = (transitions: Set<TransitionParams[]>, frmt: null | ComputerType): string => {\n    const epsSubst = epsSubstStr(\"eps\")\n    const epsSubsts = epsSubstStrs(\"eps\")\n\n    let str = \"\"\n    if (transitions !== undefined) {\n        if (frmt === 'tm') {\n            transitions.forEach(value => {\n                value.forEach((v) => {\n                    if (v.stackDown !== undefined && v.stackPush !== undefined && v.move !== undefined) {\n                        str += epsSubst(v.stackDown) + \" | \" + epsSubsts(v.stackPush) + '>' + mvStr(v.move) + \";\\n\"\n                    }\n                })\n            })\n        } else if (frmt === \"pda\" || frmt === \"dpda\") {\n            transitions.forEach(value => {\n                value.forEach((v) => {\n                    if (v.title !== undefined && v.title.length > 0 && v.stackDown !== undefined && v.stackDown.length > 0 && v.stackPush !== undefined && v.stackPush.length > 0) {\n                        str += epsSubst(v.title) + \", \" + epsSubst(v.stackDown) + \" | \" + epsSubsts(v.stackPush) + \";\\n\"\n                    }\n                })\n            })\n        } else if (frmt === \"dfa\" || frmt === \"nfa\" || frmt === \"nfa-eps\" || frmt === \"moore\" || frmt === \"dmoore\") {\n            transitions.forEach(value => {\n                value.forEach((v) => {\n                    if (v.title !== undefined && v.title.length > 0) {\n                        str += epsSubst(v.title) + \";\\n\"\n                    }\n                })\n            })\n        } else if (frmt === \"mealy\" || frmt === \"dmealy\") {\n            transitions.forEach(value => {\n                value.forEach((v) => {\n                    if (v.title !== undefined && v.title.length > 0 && v.output !== undefined) {\n                        str += epsSubst(v.title) + \" | \" + v.output + \";\\n\"\n                    }\n                })\n            })\n        }\n    }\n\n    return str\n}\n\nexport const decorateGraph = (elements: Elements, frmt: null | ComputerType) => {\n    elements.edges.forEach((edge) => {\n        elements.edges.update({\n            id: edge.id!,\n            label: transitionsToLabel(edge.transitions, frmt)\n        })\n    })\n\n    elements.nodes.forEach((node) => {\n        const lableTokens =\n            node.label\n                .split('')\n                .filter(x => x !== \" \" && x !== \"\\n\")\n                .join('')\n                .split('|')\n        const output = lableTokens[1] !== undefined ? lableTokens[1] : undefined \n        node.output = output \n\n        const border = node.isInitial ? \"#0041d0\" : node.isAdmit ? \"#ff0072\" : \"#000000\"\n        const background = node.isCurrent ? \"#ffff55\" : \"#ffffff\";\n        const borderWidth = {\n            default: 1.5,\n            primary: 2,\n            highlight: 4\n        };\n\n        elements.nodes.update({\n            id: node.id,\n            // label: node.label ,\n            // + (node.output !== undefined ? \" | \" + node.output : \"\"),\n            color: {\n                background: background,\n                border: border,\n                highlight: {\n                    border: border,\n                    background: background\n                }\n            },\n            borderWidth: node.isInitial || node.isAdmit ? borderWidth.primary : borderWidth.default,\n            borderWidthSelected: borderWidth.highlight\n        })\n    })\n\n}\n\nexport const graphToElements = (graph: graph): Elements => {\n    let acc: Elements = {nodes: new DataSet<node, \"id\">(), edges: new DataSet<edge, \"id\">()}\n\n    graph.nodes.forEach((node) => {\n        acc.nodes.add(node)\n    })\n    graph.edges.forEach((edge) => {\n        acc.edges.add(edge)\n    })\n\n    return acc\n}\n\nexport const elementsToGraph = (elements: Elements): graph => {\n    let acc: graph = {nodes: [], edges: []}\n\n    elements.nodes.forEach((node) => {\n        acc.nodes.push(node)\n    })\n    elements.edges.forEach((edge) => {\n        acc.edges.push(edge)\n    })\n\n    return acc\n}\n\nexport const getNodeNamePrefix = (graph: graph): string => {\n    let prefix = graph.nodes.length === 0 ? \"\" : graph.nodes[0].label;\n\n    graph.nodes.forEach(node => {\n        let i = 0;\n        while (i < node.label.length && i < prefix.length && node.label[i] === prefix[i]) {\n            i++;\n        }\n        prefix = prefix.substring(0, i);\n    });\n\n    return prefix;\n}\n\nexport const computersInfo: Record<ComputerType, ComputerInfo> = {\n    dfa: {\n        name: \"ДКА\",\n        description: \"Конечный автомат, принимающий или отклоняющий заданную строку символов\",\n        preview: \"dfa.png\",\n        defaultGraph: {\n            nodes: [\n                {id: 1, x: 0, y: 20, label: \"S0\", isAdmit: false, isInitial: true, isCurrent: false},\n                {id: 2, x: 200, y: 0, label: \"S1\", isAdmit: false, isInitial: false, isCurrent: false},\n                // {id: 3, x: 0, y: 180, label: \"S2\", isAdmit: true, isInitial: false, isCurrent: false},\n                // {id: 4, x: 180, y: 200, label: \"S3\", isAdmit: true, isInitial: false, isCurrent: false},\n            ],\n            edges: [\n                {from: 1, to: 2, transitions: new Set([[{title: \"0\"}]])},\n                // {from: 2, to: 1, transitions: new Set([[{title: \"0\"}]])},\n                // {from: 3, to: 4, transitions: new Set([[{title: \"0\"}]])},\n                // {from: 4, to: 4, transitions: new Set([[{title: \"0\"}]])},\n                // {from: 1, to: 3, transitions: new Set([[{title: \"1\"}]])},\n                // {from: 2, to: 4, transitions: new Set([[{title: \"1\"}]])},\n                // {from: 3, to: 2, transitions: new Set([[{title: \"1\"}]])},\n                // {from: 4, to: 2, transitions: new Set([[{title: \"1\"}]])},\n            ]\n        }\n    },\n    nfa: {\n        name: \"НКА\",\n        description: \"Может находиться в нескольких состояниях одновременно\",\n        preview: \"nfa.png\",\n        defaultGraph: {\n            nodes: [\n                {id: 1, x: 0, y: 0, label: \"S0\", isAdmit: false, isInitial: true, isCurrent: false},\n                {id: 2, x: 100, y: 100, label: \"S1\", isAdmit: false, isInitial: false, isCurrent: false},\n                {id: 3, x: 200, y: 200, label: \"S2\", isAdmit: false, isInitial: false, isCurrent: false},\n                {id: 4, x: 300, y: 300, label: \"S3\", isAdmit: true, isInitial: false, isCurrent: false},\n            ],\n            edges: [\n                {from: 1, to: 1, transitions: new Set([[{title: '0'}, {title: '1'}]])},\n                // {from: 1, to: 1, transitions: new Set([[{title: '1'}]])},\n\n                {from: 1, to: 2, transitions: new Set([[{title: '0'}]])},\n                {from: 2, to: 3, transitions: new Set([[{title: '1'}]])},\n                {from: 3, to: 4, transitions: new Set([[{title: '1'}]])},\n\n                {from: 4, to: 4, transitions: new Set([[{title: '0'}]])},\n                // {from: 4, to: 4, transitions: new Set([[{title: '0'}]])}\n            ]\n        }\n    },\n    \"nfa-eps\": {\n        name: \"ε-НКА\",\n        description: \"Расширение НКА, в котором используются ε-переходы\",\n        preview: \"nfa-eps.png\",\n        defaultGraph: {\n            nodes: [\n                {id: 1, x: 0, y: 100, label: \"S\", isAdmit: false, isInitial: true, isCurrent: false},\n                {id: 2, x: 100, y: 100, label: \"A1\", isAdmit: false, isInitial: false, isCurrent: false},\n                {id: 3, x: 100, y: 200, label: \"B1\", isAdmit: false, isInitial: false, isCurrent: false},\n                {id: 4, x: 200, y: 100, label: \"A2\", isAdmit: false, isInitial: false, isCurrent: false},\n                {id: 5, x: 300, y: 100, label: \"A3\", isAdmit: false, isInitial: false, isCurrent: false},\n                {id: 6, x: 400, y: 100, label: \"A4\", isAdmit: true, isInitial: false, isCurrent: false},\n                {id: 7, x: 200, y: 200, label: \"B2\", isAdmit: false, isInitial: false, isCurrent: false},\n                {id: 8, x: 300, y: 200, label: \"B3\", isAdmit: false, isInitial: false, isCurrent: false},\n                {id: 9, x: 400, y: 200, label: \"B4\", isAdmit: true, isInitial: false, isCurrent: false},\n\n            ],\n            edges: [\n                {from: 1, to: 1, transitions: new Set([[{title: '0'}, {title: '1'}]])},\n\n                {from: 1, to: 2, transitions: new Set([[{title: EPS}]])},\n                {from: 1, to: 3, transitions: new Set([[{title: EPS}]])},\n                {from: 2, to: 4, transitions: new Set([[{title: '0'}]])},\n                {from: 4, to: 5, transitions: new Set([[{title: '1'}]])},\n                {from: 5, to: 6, transitions: new Set([[{title: '1'}]])},\n                {from: 3, to: 7, transitions: new Set([[{title: '0'}]])},\n                {from: 7, to: 8, transitions: new Set([[{title: '0'}]])},\n                {from: 8, to: 9, transitions: new Set([[{title: '1'}]])},\n\n                {from: 9, to: 9, transitions: new Set([[{title: '0'}, {title: '1'}]])},\n\n                {from: 6, to: 6, transitions: new Set([[{title: '0'}, {title: '1'}]])},\n\n            ]\n        }\n    },\n    pda: {\n        name: \"Автомат с магазинной памятью\",\n        description: \"Использует стек для хранения состояний\",\n        preview: \"pda.png\",\n        defaultGraph: {\n            nodes: [\n                {id: 1, x: 0, y: 0, label: \"S0\", isAdmit: false, isInitial: true, isCurrent: false},\n                {id: 2, x: 100, y: 0, label: \"S1\", isAdmit: false, isInitial: false, isCurrent: false},\n                {id: 3, x: 200, y: 0, label: \"S2\", isAdmit: false, isInitial: false, isCurrent: false},\n            ],\n            edges: [\n                {\n                    from: 1, to: 1, transitions: new Set([\n                        [\n                            {title: '0', stackDown: 'Z0', stackPush: ['0', 'Z0']},\n                            {title: '1', stackDown: 'Z0', stackPush: ['1', 'Z0']},\n                            {title: '0', stackDown: '0', stackPush: ['0', '0']},\n                            {title: '0', stackDown: '1', stackPush: ['0', '1']},\n                            {title: '1', stackDown: '0', stackPush: ['1', '0']},\n                            {title: '1', stackDown: '1', stackPush: ['1', '1']}\n                        ]])\n                },\n\n                // {from: 1, to: 1, transitions: new Set([[{title: '1',  stackDown: 'Z0', stackPush: ['1', 'Z0']}]])},\n                // {from: 1, to: 1, transitions: new Set([[{title: '0',  stackDown: '0',  stackPush: ['0', '0' ]}]])},\n                // {from: 1, to: 1, transitions: new Set([[{title: '0',  stackDown: '1',  stackPush: ['0', '1' ]}]])},\n                // {from: 1, to: 1, transitions: new Set([[{title: '1',  stackDown: '0',  stackPush: ['1', '0' ]}]])},\n                // {from: 1, to: 1, transitions: new Set([[{title: '1',  stackDown: '1',  stackPush: ['1', '1' ]}]])},\n\n                {\n                    from: 1, to: 2, transitions: new Set([\n                        [\n                            {title: EPS, stackDown: 'Z0', stackPush: ['Z0']},\n                            {title: EPS, stackDown: '0', stackPush: ['0']},\n                            {title: EPS, stackDown: '1', stackPush: ['1']}\n                        ]])\n                },\n                // {from: 1, to: 2, transitions: new Set([[{title: EPS,  stackDown: '0',  stackPush: ['0'      ]}]])},\n                // {from: 1, to: 2, transitions: new Set([[{title: EPS,  stackDown: '1',  stackPush: ['1'      ]}]])},\n\n                {\n                    from: 2, to: 2, transitions: new Set([\n                        [\n                            {title: '0', stackDown: '0', stackPush: [EPS]},\n                            {title: '1', stackDown: '1', stackPush: [EPS]}\n                        ]])\n                },\n                // {from: 2, to: 2, transitions: new Set([[{title: '1',  stackDown: '1',  stackPush: [EPS      ]}]])},\n\n                {from: 2, to: 3, transitions: new Set([[{title: EPS, stackDown: 'Z0', stackPush: [EPS]}]])},\n\n            ]\n        }\n    },\n    dpda: {\n        name: \"Детерминированный автомат с магазинной памятью\",\n        description: \"Использует стек для хранения состояний\",\n        preview: \"pda.png\",\n        defaultGraph: {\n            nodes: [\n                {id: 1, x: 0, y: 0, label: \"S0\", isAdmit: false, isInitial: true, isCurrent: false},\n                // {id: 2, x: 100, y: 0, label: \"S1\", isAdmit: false, isInitial: false, isCurrent: false},\n            ],\n            edges: [\n                {\n                    from: 1, to: 1, transitions: new Set([[{title: '0', stackDown: 'Z0', stackPush: ['0', 'Z0']},]])\n                },\n            ]\n        }\n    },\n    tm: {\n        name: \"Машина Тьюринга\",\n        description: \"_\",\n        preview: \"tm.png\",\n        defaultGraph: {\n            nodes: [\n                {id: 1, x: 0, y: 0, label: \"S0\", isAdmit: false, isInitial: true, isCurrent: false},\n                {id: 2, x: 200, y: 0, label: \"S1\", isAdmit: false, isInitial: false, isCurrent: false},\n                {id: 3, x: 0, y: 200, label: \"S2\", isAdmit: true, isInitial: false, isCurrent: false},\n                {id: 4, x: 200, y: 200, label: \"S3\", isAdmit: true, isInitial: false, isCurrent: false},\n            ],\n            edges: [\n                { from: 1, to: 1, transitions: new Set([[{title: EPS, stackDown: '0', stackPush: ['0'], move: Move.R}, {title: EPS, stackDown: '1', stackPush: ['1'], move: Move.R} ]]) },\n                { from: 1, to: 2, transitions: new Set([[{title: EPS, stackDown: '_', stackPush: ['_'], move: Move.L} ]]) },\n                { from: 2, to: 2, transitions: new Set([[{title: EPS, stackDown: '1', stackPush: ['0'], move: Move.L} ]]) },\n                { from: 2, to: 3, transitions: new Set([[{title: EPS, stackDown: '0', stackPush: ['1'], move: Move.L} ]]) },\n                { from: 2, to: 4, transitions: new Set([[{title: EPS, stackDown: '_', stackPush: ['1'], move: Move.L} ]]) },\n            ]\n        }\n    },\n    mealy: {\n        name: \"Автомат Мили\",\n        preview: \"mealy.png\",\n        description: \"_\",\n        defaultGraph: {\n            nodes: [\n                { x: 0, y: 0, id: 0, isAdmit: false, isCurrent: false, isInitial: true, label: \"0 rub\" },\n                { x: 300, y: -200, id: 1, isAdmit: false, isCurrent: false, isInitial: false, label: \"5 rub\" },\n                { x: 500, y: -300, id: 2, isAdmit: false, isCurrent: false, isInitial: false, label: \"15 rub\" },\n                { x: -100, y: -500, id: 3, isAdmit: false, isCurrent: false, isInitial: false, label: \"10 rub\" }\n            ],\n            edges: [\n                { from: 0, to: 1, transitions: new Set([[{ title: 'f', output: 'n' }]]) },\n                { from: 0, to: 3, transitions: new Set([[{ title: 't', output: 'n' }]]) },\n                { from: 1, to: 2, transitions: new Set([[{ title: 't', output: 'n' }]]) },\n                { from: 1, to: 3, transitions: new Set([[{ title: 'f', output: 'n' }]]) },\n                { from: 2, to: 0, transitions: new Set([[{ title: 'f', output: '0' }, { title: 't', output: '5' }]]) },\n                { from: 3, to: 2, transitions: new Set([[{ title: 'f', output: 'n' }]]) },\n                { from: 3, to: 0, transitions: new Set([[{ title: 't', output: '0' }]]) },\n            ]\n            //     {\n//         nodes: [\n//             { id: 0, isAdmit: false },\n//             { id: 1, isAdmit: false },\n//             { id: 2, isAdmit: false },\n//             { id: 3, isAdmit: false },\n//         ],\n//         edges: [\n//             { from: 0, to: 1, transitions: new Set([[{ title: '5', output: 'n' }]]) },\n//             { from: 0, to: 3, transitions: new Set([[{ title: '10', output: 'n' }]]) },\n//             { from: 1, to: 2, transitions: new Set([[{ title: '10', output: 'n' }]]) },\n//             { from: 1, to: 3, transitions: new Set([[{ title: '5', output: 'n' }]]) },\n//             { from: 2, to: 0, transitions: new Set([[{ title: '5', output: '0' }, { title: '10', output: '5' }]]) },\n//             { from: 3, to: 2, transitions: new Set([[{ title: '5', output: 'n' }]]) },\n//             { from: 3, to: 0, transitions: new Set([[{ title: '10', output: '0' }]]) },\n        \n//         ]\n//     }, [{ id: 0, isAdmit: false }], [\"10\", \"10\"])\n        }\n    },\n    dmealy: {\n        name: \"Детерминированный автомат Мили\",\n        preview: \"mealy.png\",\n        description: \"_\",\n        defaultGraph: {\n            nodes: [\n                { x: 0, y: 0, id: 0, isAdmit: false, isCurrent: false, isInitial: true, label: \"0 rub\" },\n                // { x: 300, y: -200, id: 1, isAdmit: false, isCurrent: false, isInitial: false, label: \"5 rub\" },\n                // { x: 500, y: -300, id: 2, isAdmit: false, isCurrent: false, isInitial: false, label: \"15 rub\" },\n                { x: -100, y: -500, id: 3, isAdmit: false, isCurrent: false, isInitial: false, label: \"10 rub\" }\n            ],\n            edges: [\n                { from: 0, to: 0, transitions: new Set([[{ title: 'f', output: 'n' }]]) },\n                { from: 0, to: 3, transitions: new Set([[{ title: 'f', output: 'n' }]]) },\n                // { from: 1, to: 2, transitions: new Set([[{ title: 't', output: 'n' }]]) },\n                // { from: 1, to: 3, transitions: new Set([[{ title: 'f', output: 'n' }]]) },\n                // { from: 2, to: 0, transitions: new Set([[{ title: 'f', output: '0' }, { title: 't', output: '5' }]]) },\n                // { from: 3, to: 2, transitions: new Set([[{ title: 'f', output: 'n' }]]) },\n                // { from: 3, to: 0, transitions: new Set([[{ title: 't', output: '0' }]]) },\n            ]\n            //     {\n//         nodes: [\n//             { id: 0, isAdmit: false },\n//             { id: 1, isAdmit: false },\n//             { id: 2, isAdmit: false },\n//             { id: 3, isAdmit: false },\n//         ],\n//         edges: [\n//             { from: 0, to: 1, transitions: new Set([[{ title: '5', output: 'n' }]]) },\n//             { from: 0, to: 3, transitions: new Set([[{ title: '10', output: 'n' }]]) },\n//             { from: 1, to: 2, transitions: new Set([[{ title: '10', output: 'n' }]]) },\n//             { from: 1, to: 3, transitions: new Set([[{ title: '5', output: 'n' }]]) },\n//             { from: 2, to: 0, transitions: new Set([[{ title: '5', output: '0' }, { title: '10', output: '5' }]]) },\n//             { from: 3, to: 2, transitions: new Set([[{ title: '5', output: 'n' }]]) },\n//             { from: 3, to: 0, transitions: new Set([[{ title: '10', output: '0' }]]) },\n        \n//         ]\n//     }, [{ id: 0, isAdmit: false }], [\"10\", \"10\"])\n        }\n    },\n    moore: {\n        name: \"Автомат Мура\",\n        description: \"_\",\n        preview: \"moore.png\",\n        defaultGraph: {\n            nodes: [\n                { x: 0, y: 0, id: 0, isAdmit: false, isCurrent: false, isInitial: true, label: \"S0 | b\" },\n                { x: 300, y: 0, id: 1, isAdmit: false, isCurrent: false, isInitial: false, label: \"S1 | b\"  },\n                { x: 100, y: 100, id: 2, isAdmit: false, isCurrent: false, isInitial: false, label: \"S2 | a\"  },\n                // { id: 3, isAdmit: false, output: '3' },\n            ],\n            edges: [\n                { from: 0, to: 0, transitions: new Set([[{ title: '1' }]]) },\n                { from: 0, to: 1, transitions: new Set([[{ title: '0' }]]) },\n    \n                { from: 1, to: 1, transitions: new Set([[{ title: '0' }]]) },\n                { from: 1, to: 2, transitions: new Set([[{ title: '1' }]]) },\n    \n                { from: 2, to: 1, transitions: new Set([[{ title: '0' }]]) },\n                { from: 2, to: 0, transitions: new Set([[{ title: '1' }]]) },\n            ]        \n        }\n    },\n    dmoore: {\n        name: \"Детерминированный автомат Мура\",\n        description: \"_\",\n        preview: \"moore.png\",\n        defaultGraph: {\n            nodes: [\n                { x: 0, y: 0, id: 0, isAdmit: false, isCurrent: false, isInitial: true, label: \"S0 | b\" },\n                { x: 300, y: 0, id: 1, isAdmit: false, isCurrent: false, isInitial: false, label: \"S1 | b\"  },\n                { x: 100, y: 100, id: 2, isAdmit: false, isCurrent: false, isInitial: false, label: \"S2 | a\"  },\n                // { id: 3, isAdmit: false, output: '3' },\n            ],\n            edges: [\n                { from: 0, to: 0, transitions: new Set([[{ title: '1' }]]) },\n                { from: 0, to: 1, transitions: new Set([[{ title: '0' }]]) },\n    \n                { from: 1, to: 1, transitions: new Set([[{ title: '0' }]]) },\n                { from: 1, to: 2, transitions: new Set([[{ title: '1' }]]) },\n    \n                { from: 2, to: 1, transitions: new Set([[{ title: '0' }]]) },\n                { from: 2, to: 0, transitions: new Set([[{ title: '1' }]]) },\n            ]\n            // nodes: [\n            //     { x: 0, y: 0, id: 0, isAdmit: false, isCurrent: false, isInitial: true, label: \"S0 | b\" },\n            //     { x: 300, y: 0, id: 1, isAdmit: false, isCurrent: false, isInitial: false, label: \"S1 | b\"  },\n            //     { x: 100, y: 100, id: 2, isAdmit: false, isCurrent: false, isInitial: false, label: \"S2 | a\"  },\n            // ],\n            // edges: [\n            //     { from: 0, to: 0, transitions: new Set([[{ title: '1' }]]) },\n            //     { from: 0, to: 1, transitions: new Set([[{ title: '1' }]]) },\n    \n            //     // { from: 1, to: 1, transitions: new Set([[{ title: '0' }]]) },\n            //     // { from: 1, to: 2, transitions: new Set([[{ title: '1' }]]) },\n    \n            //     // { from: 2, to: 1, transitions: new Set([[{ title: '0' }]]) },\n            //     // { from: 2, to: 0, transitions: new Set([[{ title: '1' }]]) },\n            // ]        \n        }\n    },\n\n}\n\nexport const getCookie = (name: string) => {\n    const value = `; ${document.cookie}`;\n    const parts = value.split(`; ${name}=`);\n    if (parts.length === 2) return parts.pop()?.split(';').shift();\n}\n\n\nexport const getRandomString = (length: number): string => {\n    let result = '';\n    const characters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';\n    const charactersLength = characters.length;\n    for (let i = 0; i < length; i++) {\n        result += characters.charAt(Math.floor(Math.random() * charactersLength));\n    }\n    return result;\n}","import React from \"react\";\nimport {ComputerTypeContext} from \"./App\";\n\nexport const withComputerType = (Component: typeof React.Component) => (\n    (props: any) => (\n        <ComputerTypeContext.Consumer>\n            { context => <Component computerType={context} {...props}/> }\n        </ComputerTypeContext.Consumer>\n    )\n)","import React from \"react\";\nimport {ComputerType, edge} from \"../../react-graph-vis-types\";\nimport {getTransitionsTitles, transitionsToLabel} from \"../../utils\";\nimport ControlWrapper from \"../ControlWrapper/ControlWrapper\";\nimport Button from \"@mui/material/Button\";\nimport \"./EdgeControl.css\";\nimport Transition from \"./Transition/Transition\";\nimport EditIcon from '@mui/icons-material/Edit';\nimport TextField from \"@mui/material/TextField\";\nimport {withComputerType} from \"../../hoc\";\nimport {EPS} from \"../../Logic/Computer\";\nimport {Move, TransitionParams} from \"../../Logic/IGraphTypes\";\nimport { TextareaAutosize } from \"@mui/material\";\n\n\ninterface EdgeControlProps {\n    edge: edge | null,\n    changeEdgeTransitions: (id: string, transitions: Set<TransitionParams[]>) => void,\n    deleteEdge: (id: string) => void,\n    computerType: ComputerType | null\n    reinitComputer: (() => void)\n}\n\ninterface Rule{\n    id: number\n    value: string\n}\n\ninterface EdgeControlState {\n    prevEdgeId: string | undefined,\n    transitions: Set<TransitionParams[]>,\n    transitionsText: string,\n    displayedTransitionText: string,\n    activeTransition: TransitionParams[] | null,\n    editMode: boolean,\n    countRules?: number, \n    rules: Rule[],\n}\n\nclass EdgeControl extends React.Component<EdgeControlProps, EdgeControlState> {\n    constructor(props: EdgeControlProps) {\n        super(props);\n\n        this.state = {\n            prevEdgeId: this.props.edge?.id,\n            transitions: this.props.edge?.transitions || new Set(),\n            transitionsText: getTransitionsTitles(this.props.edge?.transitions || new Set<TransitionParams[]>(), this.props.computerType),\n            displayedTransitionText: getTransitionsTitles(this.props.edge?.transitions || new Set<TransitionParams[]>(), this.props.computerType),\n            activeTransition: null,\n            editMode: false,\n            countRules: 1,\n            rules: [\n                {id: 1, value: ' '}\n            ]\n        }\n    }\n\n    componentDidUpdate(prevProps: Readonly<EdgeControlProps>, prevState: Readonly<EdgeControlState>) {\n        if (this.props.edge?.id !== prevState.prevEdgeId) {\n\n            this.setState({\n                transitions: this.props.edge?.transitions || new Set(),\n                prevEdgeId: this.props.edge?.id,\n                transitionsText: getTransitionsTitles(this.props.edge?.transitions || new Set<TransitionParams[]>(), this.props.computerType),\n                activeTransition: null,\n                editMode: false\n            });\n\n        }\n    }\n\n    selectTransition = (transition: TransitionParams[] | null): void => {\n        if (this.state.activeTransition === transition) {\n            this.setState({activeTransition: null});\n        } else {\n            this.setState({activeTransition: transition});\n        }\n    }\n\n    changeTransitions = async (event: React.ChangeEvent<HTMLInputElement>) => {\n        const value = event.target.value;\n        this.setState({transitionsText: value});\n\n        let accumulator: {\n            fst: string | undefined,\n            snd: string | undefined,\n            trd: string | undefined,\n            fth: string | undefined }[] = []\n        let acc: TransitionParams[] = []\n\n        if (this.props.computerType === \"tm\") {\n            this.state.transitionsText\n                .split('')\n                .filter(x => x !== \" \" && x !== \"\\n\")\n                .join('')\n                .split(\";\")\n                .forEach(value => {\n                    let tmp = value.split('')\n                    let fst = tmp.shift()\n                    tmp = tmp.join('').split(\"|\" || \">\")\n                    let trd = tmp\n                    let fth = undefined\n\n                    let bebra = tmp.join(\"\").split(\">\")\n                    bebra.reverse()\n                    fth = bebra.shift()\n                    bebra.reverse()\n                    trd = bebra\n\n                    accumulator.push({ fst: EPS, snd: fst, trd: trd.join(':'), fth: fth })\n                })\n\n\n            // accumulator.forEach(value => {\n            //     if (value.fth !== undefined) {\n            //         acc.push(\n            //             {\n            //                 title: EPS,\n            //                 stackDown: value.snd === 'eps' ? EPS : value.snd,\n            //                 stackPush: value.trd?.split(':').map(value => value === 'eps' ? EPS : value),\n            //                 move: value.fth === 'L' ? Move.L : value.fth === 'R' ? Move.R : undefined\n            //             }\n            //         )\n            //     }\n            // })\n        } \n        if (this.props.computerType === \"mealy\" || this.props.computerType === \"dmealy\") {\n            this.state.transitionsText\n            .split('')\n            .filter(x => x !== \" \" && x !== \"\\n\")\n            .join('')\n            .split(\";\")\n            .forEach(value => {\n                let tmp = value.split(\"|\")\n                let fst = tmp.shift()\n                let snd = tmp.shift()\n                accumulator.push({ fst: fst, snd: snd, trd: undefined, fth: undefined })\n            })\n\n            accumulator.forEach(value => {\n                if (value.fst !== undefined) {\n                    acc.push(\n                        {\n                            title: value.fst === 'eps' ? EPS : value.fst,\n                            output: value.snd\n                        }\n                    )\n                }\n            })\n        } \n        else {\n            this.state.transitionsText\n                .split('')\n                .filter(x => x !== \" \" && x !== \"\\n\")\n                .join('')\n                .split(\";\")\n                .forEach(value => {\n                    let tmp = value.split(\",\")\n                    let fst = tmp.shift()\n                    tmp = tmp.join('').split(\"|\" || \">\")\n                    let snd = tmp.shift()\n                    let trd = tmp\n                    accumulator.push({ fst: fst, snd: snd, trd: trd.join(':'), fth: undefined })\n                })\n\n            accumulator.forEach(value => {\n                if (value.fst !== undefined) {\n                    acc.push(\n                        {\n                            title: value.fst === 'eps' ? EPS : value.fst,\n                            stackDown: value.snd === 'eps' ? EPS : value.snd,\n                            stackPush: value.trd?.split(':').map(value => value === 'eps' ? EPS : value),\n                            move: value.fth === 'L' ? Move.L : value.fth === 'R' ? Move.R : undefined\n                        }\n                    )\n                }\n            })\n        }\n\n\n        let transitions: Set<TransitionParams[]> = new Set<TransitionParams[]>([acc])\n\n        this.props.changeEdgeTransitions(this.props.edge!.id!, transitions)\n        console.log(\"ALLLOO\")\n        /////\n        // await this.props.reinitComputer()\n        ///\n        this.setState({transitionsText: value\n            , transitions: transitions\n        }, () => this.props.reinitComputer());\n    }\n\n    deleteEdge = async (): Promise<void> => {\n        if (this.props.edge !== null) {\n            this.props.deleteEdge(this.props.edge.id!);\n        }\n        await this.props.reinitComputer()\n\n    }\n    \n    private addInstruction(value: string) {\n        let newRow = {id: this.state.rules.length, value: value};\n        this.setState({rules: this.state.rules.concat(newRow)});\n    }\n    \n    changeEditMode = () => {\n         this.setState({editMode: !this.state.editMode});\n         this.updateTransitions();\n\n    }\n    \n    updateTransitions = async () => {\n        let accumulator: {\n            fst: string | undefined,\n            snd: string | undefined,\n            trd: string | undefined,\n            fth: string | undefined \n            out: string | undefined\n        } [] = []\n\n        if (this.props.computerType === \"tm\") {\n            this.state.transitionsText\n                .split('')\n                .filter(x => x !== \" \" && x !== \"\\n\")\n                .join('')\n                .split(\";\")\n                .forEach(value => {\n                    let tmp = value.split('')\n                    let fst = tmp.shift()\n                    tmp = tmp.join('').split(\"|\" || \">\")\n                    let trd = tmp\n                    let fth = undefined\n\n                    let bebra = tmp.join(\"\").split(\">\")\n                    bebra.reverse()\n                    fth = bebra.shift()\n                    bebra.reverse()\n                    trd = bebra\n                    console.log(\"tmp\")\n                    console.log(bebra)\n\n                    accumulator.push({ fst: EPS, snd: fst, trd: trd.join(':'), fth: fth, out: undefined })\n                })\n\n        } \n        if (this.props.computerType === \"mealy\" || this.props.computerType === \"dmealy\") {\n            this.state.transitionsText\n            .split('')\n            .filter(x => x !== \" \" && x !== \"\\n\")\n            .join('')\n            .split(\";\")\n            .forEach(value => {\n                let tmp = value.split(\"|\")\n                let fst = tmp.shift()\n                let snd = tmp.shift()\n                accumulator.push({ fst: fst, snd: undefined, trd: undefined, fth: undefined, out: snd })\n            })\n        } \n        else {\n            this.state.transitionsText\n                .split('')\n                .filter(x => x !== \" \" && x !== \"\\n\")\n                .join('')\n                .split(\";\")\n                .forEach(value => {\n                    let tmp = value.split(\",\")\n                    let fst = tmp.shift()\n                    tmp = tmp.join('').split(\"|\" || \">\")\n                    let snd = tmp.shift()\n                    let trd = tmp\n                    accumulator.push({ fst: fst, snd: snd, trd: trd.join(':'), fth: undefined, out: undefined })\n                })\n        }\n\n\n        let acc: TransitionParams[] = []\n        accumulator.forEach(value => {\n            if (value.fst !== undefined) {\n                acc.push(\n                    {\n                        title: value.fst === 'eps' ? EPS : value.fst,\n                        stackDown: value.snd === 'eps' ? EPS : value.snd,\n                        stackPush: value.trd?.split(':').map(value => value === 'eps' ? EPS : value),\n                        move: value.fth === 'L' ? Move.L : value.fth === 'R' ? Move.R : undefined,\n                        output: value.out,\n                        \n                    }\n                )\n            }\n        })\n\n        let transitions: Set<TransitionParams[]> = new Set<TransitionParams[]>([acc])\n\n        this.setState({\n            transitionsText: getTransitionsTitles(transitions, this.props.computerType),\n            transitions: transitions\n        })\n        ///\n        await this.props.reinitComputer()\n        ///\n    }\n\n    deleteTransition = (): void => {\n        if (this.props.edge !== null && this.state.activeTransition !== null) {\n            const transitions = this.state.transitions;\n            transitions.delete(this.state.activeTransition);\n\n            this.props.changeEdgeTransitions(this.props.edge.id!, transitions);\n            this.setState({transitions: transitions, transitionsText: getTransitionsTitles(transitions, this.props.computerType)});\n        }\n    }\n\n\n\n    render() {\n        return (\n            <ControlWrapper title=\"Переход\" visible={this.props.edge !== null}>\n                <div className=\"edge-control__container\">\n                    <div className=\"edge-control__item edge-control__transitions\">\n                        {\n                                <TextField\n                                    id=\"filled-multiline-static\"\n                                    multiline\n                                    rows={3}\n                                    variant=\"standard\"\n                                    label=\"Переходы\"\n                                    size=\"small\"\n                                    value={this.state.transitionsText}\n                                    onChange={this.changeTransitions}\n                                    helperText={this.props.computerType === \"nfa-eps\" || \"pda\"|| \"dpda\" ? 'Список символов или \"eps\" через запятую' : \"Список символов через запятую\"}\n                                    onBlur={this.updateTransitions}\n                                />\n                        }\n\n                        <div className=\"edge-control__edit-transitions\"\n                             onClick={this.changeEditMode}>\n                            <EditIcon/>\n                        </div>\n\n                    </div>\n\n\n                    <div className=\"edge-control__item\">\n                        <Button\n                            onClick={this.deleteEdge}\n                        >\n                            Удалить\n                        </Button>\n                    </div>\n\n                </div>\n            </ControlWrapper>\n            );\n        }\n}\n\nexport default withComputerType(EdgeControl);","import React, { ChangeEvent } from \"react\";\nimport { ComputerType, graph, node } from \"../../react-graph-vis-types\";\nimport { DFA } from \"../../Logic/DFA\";\nimport { isEqual } from \"lodash\";\nimport { withComputerType } from \"../../hoc\";\nimport { Computer } from \"../../Logic/Computer\";\nimport { NFA } from \"../../Logic/NFA\";\nimport ControlWrapper from \"../ControlWrapper/ControlWrapper\";\nimport \"./RunControl.css\";\nimport Button from \"@mui/material/Button\";\nimport TextField from \"@mui/material/TextField\";\nimport DoneIcon from '@mui/icons-material/Done';\nimport CloseIcon from '@mui/icons-material/Close';\nimport Typography from \"@mui/material/Typography\";\n\nimport Tooltip from '@mui/material/Tooltip';\n\nimport { EpsilonNFA } from \"../../Logic/EpsilonNFA\";\nimport { PDA } from \"../../Logic/PDA\";\nimport { TM } from \"../../Logic/TM\";\nimport { Elements } from \"../../App\";\nimport { decorateGraph, elementsToGraph, graphToElements } from \"../../utils\";\nimport { Step } from \"../../Logic/Types\";\nimport { GraphEval, GraphEvalMultiStart } from \"../../Logic/IGraphTypes\";\nimport { Mealy } from \"../../Logic/Mealy\";\nimport { Moore } from \"../../Logic/Moore\";\nimport { start } from \"repl\";\nimport { ContactSupportOutlined } from \"@mui/icons-material\";\nimport { NonDeterministic, NonMinimizable } from \"../../Logic/Exceptions\";\nimport { DPDA } from \"../../Logic/DPDA\";\nimport { DMealy } from \"../../Logic/DMealy\";\nimport { DMoore } from \"../../Logic/DMoore\";\n\n\ninterface runControlProps {\n    computerType: ComputerType,\n    elements: Elements,\n    changeStateIsCurrent: (ids: number[], isCurrent: boolean) => void\n    updMem: ((mem: string[] | undefined, ptr: number | undefined) => void)\n    network: any\n    setInit: ((f: () => void) => void)\n    setNfaToDfa: ((f: () => void) => void)\n    setMinimizeDfa: ((f: () => void) => void)\n    setMooreToMealy: ((f: () => void) => void)\n    setMealyToMoore: ((f: () => void) => void)\n    setChangerByStack: (f: () => void) => void\n    setRun: (f: () => void) => void\n    setStep: (f: () => void) => void\n    setReset: (f: () => void) => void\n    updateElements: (elements: Elements) => void\n    setComputerType: (type: null | ComputerType) => void\n    setResettedStatus: (status: boolean) => void\n    setByEmptyStack: (byEmptyStack: boolean) => void\n    setIsNonDetermenistic: (v: boolean) => void\n    setIsNonMinimizable: (v: boolean) => void\n}\n\ninterface runControlState {\n    input: string,\n    result?: boolean,\n    computer: Computer | undefined,\n    editMode: boolean,\n    currentInputIndex: number,\n    history: { a: node, b: string[] | undefined }[][],\n    byEmptyStack: boolean,\n    wasRuned: boolean,\n    memory: string[] | undefined,\n    gElements: graph,\n    startNode: node | undefined,\n}\n\n\n\nclass RunControl extends React.Component<runControlProps, runControlState> {\n\n    historyEndRef = React.createRef<HTMLDivElement>();\n\n    constructor(props: runControlProps) {\n        super(props);\n\n        this.state = {\n            input: \"\",\n            result: undefined,\n            computer: undefined,\n            editMode: true,\n            currentInputIndex: -1,\n            history: [],\n            byEmptyStack: false,\n            wasRuned: false,\n            memory: undefined,\n            gElements: elementsToGraph(this.props.elements),\n            startNode: undefined\n            // {nodes: [], edges: []}\n        };\n        // this.initializeComputer()\n    }\n\n    componentDidMount() {\n        this.props.setInit(() => {\n            let haveEmpty = false\n            this.props.elements.edges.forEach(edge => {\n                if (edge.label === \"\") {\n                    haveEmpty = true\n                }\n            })\n            if (!haveEmpty) {\n                return this.initializeComputer()\n            }\n        })\n        this.props.setNfaToDfa(this.nfaToDfa)\n        this.props.setMinimizeDfa(this.minimizeDfa)\n        this.props.setMooreToMealy(this.mooreToMealy)\n        this.props.setMealyToMoore(this.mealyToMoore)\n        this.props.setChangerByStack(this.admitByStack)\n        this.props.setRun(this.run)\n        this.props.setStep(this.step)\n        this.props.setReset(this.reset)\n        this.initializeComputer()\n    }\n\n    componentDidUpdate(prevProps: Readonly<runControlProps>, prevState: Readonly<runControlState>, snapshot?: any) {\n        if (this.computerShouldBeUpdated(elementsToGraph(prevProps.elements), elementsToGraph(this.props.elements))) {\n            this.initializeComputer();\n        }\n    }\n\n    computerShouldBeUpdated = (prev: graph, current: graph): boolean => {\n        const compareNodes = (): boolean => {\n            if (prev.nodes.length !== current.nodes.length) {\n                return true;\n            }\n\n            return prev.nodes.some((prev, index) => {\n                const curr = current.nodes[index];\n                return prev.id !== curr.id ||\n                    prev.isAdmit !== curr.isAdmit ||\n                    prev.isInitial !== curr.isInitial;\n            })\n        }\n\n        const compareEdges = (): boolean => {\n            if (prev.edges.length !== current.edges.length) {\n                return true;\n            }\n\n            return prev.edges.some((prev, index) => {\n                const curr = current.edges[index];\n                return prev.id !== curr.id ||\n                    prev.from !== curr.from ||\n                    prev.to !== curr.to ||\n                    !isEqual(curr.transitions, prev.transitions)\n            });\n        }\n\n        // console.log('[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[]')\n        // prev.edges.forEach(v => {\n        //     console.log(v.from + ' ' + v.to)\n        //     v.transitions.forEach((t) => console.log(t))\n        // })\n\n        return compareEdges() || compareNodes()\n    }\n\n    getComputer = (computerType: ComputerType, graph: graph, initialNode: node[], input: string[]): Computer | undefined => {\n        switch (computerType) {\n            case \"dfa\":\n                try {\n                    return new DFA(graph, initialNode, input);\n                } catch (e) {\n                    return undefined;\n                }\n            case \"nfa\":\n                return new NFA(graph, initialNode, input);\n            case \"nfa-eps\":\n                return new EpsilonNFA(graph, initialNode, input);\n            case \"pda\":\n                return new PDA(graph, initialNode, input, this.state.byEmptyStack);\n            case \"dpda\":\n                return new DPDA(graph, initialNode, input, this.state.byEmptyStack);\n            case \"tm\":\n                return new TM(graph, initialNode, input);\n            case \"mealy\":\n                return new Mealy(graph, initialNode, input);\n            case \"dmealy\":\n                return new DMealy(graph, initialNode, input);\n            case \"moore\":\n                return new Moore(graph, initialNode, input);\n            case \"dmoore\":\n                return new DMoore(graph, initialNode, input);\n        }\n\n    }\n\n    initializeComputer = () => {\n        console.warn(\"Reinitializing computer\");\n\n        this.setState({ gElements: elementsToGraph(this.props.elements) }, () => {\n            const initialNode: node[] = elementsToGraph(this.props.elements).nodes.filter(node => node.isInitial);\n            const input = this.state.input.split(\"\");\n\n            if (initialNode === undefined) {\n                console.warn(\"There is no initial node. Computer will not be initialized\");\n                return;\n            }\n\n            console.log(\"this.state.gElementshis.state.gElementshis.state.gElements\")\n            console.log(this.state.gElements)\n\n            this.setState({\n                computer: this.getComputer(this.props.computerType, this.state.gElements, initialNode, input),\n                result: undefined\n            });\n\n        })\n        console.log('::::::::::::::::::::::>')\n        this.props.elements.edges.forEach((v) => {\n            console.log(v.from + ' -- ' + v.to)\n            v.transitions.forEach(t => console.log(t))\n        })\n    }\n\n    onInputChanged = (event: ChangeEvent<HTMLInputElement>): void => {\n        const input = event.target.value;\n\n        this.reset();\n        this.state.computer?.setInput(input.split(\"\"));\n\n        this.setState({ input: input });\n\n\n    }\n\n    step = (): void => {\n        if (this.state.computer === undefined) {\n            console.error(\"Computer is not initialized yet\");\n            return;\n        }\n\n        this.props.setResettedStatus(true)\n\n\n        if (this.state.wasRuned) {\n            this.setState({ wasRuned: false });\n            this.reset();\n        }\n\n        if (this.state.currentInputIndex === this.state.input.length - 1 && this.props.computerType !== \"tm\") return;\n        if (this.state.result !== undefined && this.state.currentInputIndex !== -1 && this.props.computerType !== \"tm\") return;\n\n        try {\n\n            const stepResult: Step = this.state.computer.step()\n\n            if (stepResult.nodes.length === 0) return;\n\n            this.props.changeStateIsCurrent(stepResult.nodes.map(node => node.id), true);\n            this.props.updMem(stepResult.memory, stepResult.pointer)\n\n            let result = undefined;\n            if (stepResult.counter === this.state.input.length) {\n                result = stepResult.isAdmit\n            } else if (this.state.currentInputIndex + 2 !== stepResult.counter) {\n                result = false;\n            }\n\n            const nodes = stepResult.nodes\n                .map(nodeCore => this.state.gElements.nodes.find(node => node.id == nodeCore.id))\n                .filter((node): node is node => node !== undefined);\n\n\n            const _nodes = nodes.map((e, i) => {\n                const stack = stepResult.nodes[i].stack\n                return {\n                    a: e,\n                    b: stack !== undefined\n                        ? stack.reverse()\n                        : stepResult.output !== undefined\n                            ? stepResult.output!\n                            : undefined\n                }\n            })\n\n            if (this.props.computerType === \"moore\" && stepResult.counter === 1) {\n                const startNode: { a: node, b: string[] | undefined }[] = [{\n                    a: this.state.gElements.nodes.filter(node => node.id === this.state.computer!.getCurrNode())[0],\n                    b: [\"~\"]\n                }]\n                console.log(startNode)\n                this.setState({\n                    startNode: this.state.gElements.nodes.filter(node => node.id === this.state.computer!.getCurrNode())[0]\n                    // history: [...this.state.history, startNode],\n                })\n            }\n\n            this.setState({\n                result: result,\n                currentInputIndex: this.state.currentInputIndex + 1,\n                history: [...this.state.history, _nodes],\n                memory: stepResult.memory,\n                // counter: stepResult.counter\n            }, () => this.historyEndRef?.current?.scrollIntoView({ behavior: 'smooth' }));\n\n        } catch (e) {\n            if (e instanceof NonDeterministic) {\n                this.props.setIsNonDetermenistic(true)\n                console.error('KKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKK')\n                console.log('NonDeterministic')\n            }\n             else {\n                console.log(e)\n            }\n        }\n\n    }\n\n    reset = (): void => {\n        this.state.computer?.restart();\n        this.props.changeStateIsCurrent([], true); // resets all nodes\n        this.setState({\n            result: undefined,\n            currentInputIndex: -1,\n            history: [],\n            // counter: 0\n        },\n            () => this.initializeComputer()\n        );\n        this.state.computer?.setInput(this.state.input.split(\"\"))\n        this.props.setResettedStatus(false)\n\n        // this.initializeComputer()\n    }\n\n    run = async (): Promise<void> => {\n        if (this.state.computer === undefined) {\n            console.error(\"Computer is not initialized yet\");\n            return;\n        }\n\n        await this.reset();\n\n        try {\n            const result = this.state.computer.run();\n\n            this.setState({ result: result.isAdmit, currentInputIndex: -1, history: [] });\n            this.setState({ wasRuned: true })\n        } catch (e) {\n            if (e instanceof NonDeterministic) {\n                this.props.setIsNonDetermenistic(true)\n                console.error('KKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKK')\n                console.log('NonDeterministic')\n            }\n        }\n    }\n\n    nfaToDfa = (): void => {\n        const nfaToDfa = this.state.computer!.nfaToDfa()\n        const nodes = nfaToDfa.nodes.map((v, it) => ({\n            id: v.id,\n            isAdmit: v.isAdmit,\n            label: v.id.toString(),\n            isInitial: it === 0,\n            isCurrent: false\n        }))\n        const edges = nfaToDfa.edges\n        const gElements = {\n            nodes: nodes,\n            edges: edges\n        }\n\n        this.setState({\n            gElements: gElements\n        }, () => {\n            this.props.updateElements(graphToElements(gElements))\n            this.props.setComputerType(\"dfa\")\n        })\n    }\n\n    admitByStack = (): void => {\n        const curStbyEmp = this.state.byEmptyStack;\n        this.setState({ byEmptyStack: !curStbyEmp });\n        this.props.setByEmptyStack(!curStbyEmp)\n        this.state.computer!.byEmptyStackAdmt(!curStbyEmp)\n        this.reset();\n    }\n\n    minimizeDfa = (): void => {\n        this.initializeComputer();\n        this.reset();\n\n        try {\n            const miniDFA: GraphEval = this.state.computer!.minimizeDfa()\n            const nodes = miniDFA.graphcore.nodes.map((v) => ({\n                id: v.id,\n                isAdmit: v.isAdmit,\n                label: 'G' + v.id.toString(),\n                isInitial: v.id === miniDFA.start.id,\n                isCurrent: false\n            }))\n            const edges = miniDFA.graphcore.edges\n            const gElements = {\n                nodes: nodes,\n                edges: edges\n            }\n\n            this.setState({\n                gElements: gElements\n            }, () => {\n                this.props.updateElements(graphToElements(gElements))\n            })\n        } catch (e) {\n            if (e instanceof NonMinimizable) {\n                this.props.setIsNonMinimizable(true)\n                console.error('KKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKK')\n                console.log('NonDeterministic')\n            }\n        }\n    }\n\n    mooreToMealy = (): void => {\n        this.initializeComputer();\n        this.reset();\n\n        const mealy: GraphEvalMultiStart = this.state.computer!.mooreToMealy()\n\n        const starts = mealy.start.map((v) => v.id)\n\n        const nodes = mealy.graphcore.nodes.map((v) => ({\n            id: v.id,\n            isAdmit: v.isAdmit,\n            label: 'S' + v.id.toString(),\n            isInitial: starts.includes(v.id),\n            isCurrent: false,\n        }))\n        const edges = mealy.graphcore.edges\n        const gElements = {\n            nodes: nodes,\n            edges: edges\n        }\n        this.setState({\n            gElements: gElements\n        }, () => {\n            this.props.updateElements(graphToElements(gElements))\n            this.props.setComputerType(\"mealy\")\n        })\n    }\n\n    mealyToMoore = (): void => {\n        this.initializeComputer();\n        this.reset();\n\n        const miniDFA: GraphEvalMultiStart = this.state.computer!.mealyToMoore()\n\n        const starts = miniDFA.start.map(v => v.id)\n\n        // console.log('()()()()()))()(', miniDFA.graphcore.edges)\n\n        const nodes = miniDFA.graphcore.nodes.map((v) => ({\n            id: v.id,\n            isAdmit: v.isAdmit,\n            label: 'S' + v.id.toString() + ' | ' + v.output,\n            isInitial: starts.includes(v.id),\n            isCurrent: false,\n        }))\n        const edges = miniDFA.graphcore.edges\n        const gElements = {\n            nodes: nodes,\n            edges: edges\n        }\n        this.setState({\n            gElements: gElements\n        }, () => {\n            this.props.updateElements(graphToElements(gElements))\n            this.props.setComputerType(\"moore\")\n        })\n    }\n\n    render() {\n        return (\n            <ControlWrapper title={\"Запуск\"}>\n                <div>\n\n                    <div className=\"run-control__item run-control__input__row\">\n                        {\n                            this.state.editMode\n                                ?\n                                <TextField\n                                    label=\"Входная строка\"\n                                    size=\"small\"\n                                    value={this.state.input}\n                                    onChange={this.onInputChanged}\n                                    onBlur={() => {\n                                        this.state.input.length && this.setState({ editMode: false }, () => this.initializeComputer())\n                                    }}\n                                />\n                                :\n                                <div\n                                    className=\"run-control__input-value\"\n                                    onClick={() => {\n                                        this.setState({ editMode: true });\n                                    }}\n                                >\n                                    {\n                                        Array.from(this.state.input).map((char, index) => (\n                                            <span\n                                                className={\"run-control__input__span\" + (this.state.currentInputIndex === index ? \"--current\" : \"\")}\n                                                key={index}\n                                            >\n                                                {char}\n                                            </span>\n                                        ))\n                                    }\n                                </div>\n                        }\n\n                        <div className=\"run-control__result\">\n                            {\n                                this.state.result === undefined ? null :\n                                    this.state.result\n                                        ? <DoneIcon style={{ color: \"var(--commerce)\" }} />\n                                        : <CloseIcon style={{ color: \"var(--destructive)\" }} />\n                            }\n                        </div>\n\n                    </div>\n\n                    <div className=\"run-control__item run-control__buttons\">\n                        <div className=\"run-control__button\">\n                            <Button\n                                variant=\"outlined\"\n                                onClick={this.step}\n                            >\n                                Шаг\n                            </Button>\n                        </div>\n\n                        {\n                            this.props.computerType !== \"tm\"\n                                ?\n                                <div className=\"run-control__button\">\n                                    <Button\n                                        variant=\"outlined\"\n                                        onClick={this.run}\n                                    >\n                                        Запуск\n                                    </Button>\n                                </div>\n                                : <></>\n                        }\n\n                        <div className=\"run-control__button\">\n                            <Button\n                                variant=\"outlined\"\n                                onClick={this.reset}\n                            >\n                                Сбросить\n                            </Button>\n                        </div>\n\n                        {/* {\n                            this.props.computerType === \"pda\"\n                                ?\n                                    <div className=\"run-control__button\">\n                                        <Button\n                                            variant=\"outlined\"\n                                            color=\"secondary\"\n                                            // onClick={this.run}\n                                            onClick={() => {\n                                                this.admitByStack()\n                                                // const curStbyEmp = this.state.byEmptyStack;\n                                                // this.setState({ byEmptyStack: !curStbyEmp});\n                                                // this.state.computer!.byEmptyStackAdmt(!curStbyEmp)\n                                                // this.reset();\n                                            }}\n                                        >\n                                            {this.state.byEmptyStack ?  \"По стеку\" : \"По состоянию\"}\n                                        </Button>\n                                    </div>\n                                : <div/>\n                        } */}\n\n                        {/* {\n                           this.props.computerType === \"moore\" ?\n                               <div className=\"run-control__button\">\n                                   <Button\n                                       variant=\"outlined\"\n                                       onClick={this.mooreToMealy}\n                                   >\n                                       mealy\n                                   </Button>\n                               </div>\n                               : <></>\n                        }\n\n{\n                           this.props.computerType === \"mealy\" ?\n                               <div className=\"run-control__button\">\n                                   <Button\n                                       variant=\"outlined\"\n                                       onClick={this.mealyToMoore}\n                                   >\n                                       moore\n                                   </Button>\n                               </div>\n                               : <></>\n                        } */}\n\n\n                    </div>\n\n\n                    <div className=\"run-control__item run-control__history\">\n                        <div className=\"run-control__history__header\">\n                            <Typography variant=\"h6\">История</Typography>\n                        </div>\n                        {\n                            this.state.history.length !== 0 ?\n                                <div className=\"run-control__history__scroll\">\n\n\n                                    {\n                                        this.state.startNode !== undefined\n                                            ?\n                                            <div className=\"run-control__history__row\" key={0}>\n                                                <span className=\"run-control__history__index\">{0}</span>\n                                                {\n                                                    <Tooltip\n                                                        title={<Typography className=\"display-linebreak\">{\"~\"}</Typography>}>\n                                                        <div\n                                                            className=\"run-control__history__node\"\n                                                            style={{ border: `${this.state.startNode!.isInitial ? \"#0041d0\" : this.state.startNode!.isAdmit ? \"#ff0072\" : \"#000000\"} 2px solid` }}\n                                                        >\n                                                            {this.state.startNode!.label}\n                                                        </div>\n                                                    </Tooltip>\n                                                }\n                                            </div>\n                                            : <div />\n                                    }\n\n                                    {\n                                        this.state.history.map((nodes, index) => (\n                                            <div className=\"run-control__history__row\" key={index}>\n                                                <span className=\"run-control__history__index\">{index + 1}</span>\n                                                {\n                                                    nodes.map((node, index) => (\n                                                        <Tooltip\n                                                            title={<Typography className=\"display-linebreak\">{node.b !== undefined ? node.b.join('\\n') : ''}</Typography>}>\n                                                            <div\n                                                                className=\"run-control__history__node\"\n                                                                style={{ border: `${node.a.isInitial ? \"#0041d0\" : node.a.isAdmit ? \"#ff0072\" : \"#000000\"} 2px solid` }}\n                                                            >\n                                                                {node.a.label}\n                                                            </div>\n                                                        </Tooltip>\n                                                    ))\n                                                }\n                                            </div>\n                                        ))\n                                    }\n                                    <div ref={this.historyEndRef} />\n                                </div>\n                                :\n                                <div className=\"run-control__history__placeholder\">\n                                    Используйте пошаговый запуск, чтобы наблюдать за историей\n                                </div>\n                        }\n                    </div>\n\n                </div>\n            </ControlWrapper>\n        )\n    }\n}\n\nexport default withComputerType(RunControl);","import SavesManager from \"./SavesManager\";\nimport {Save, SaveMeta} from \"./Save\";\nimport {ComputerType, graph} from \"../react-graph-vis-types\";\n\nconst itemName = \"saves\";\n\nexport default class BrowserSavesManager implements SavesManager {\n    getSavesMeta(): Promise<SaveMeta[]> {\n        let saves = BrowserSavesManager.getSaves();\n\n        return new Promise<SaveMeta[]>(function (resolve) {\n                resolve(saves);\n            }\n        )\n    }\n\n    getSave(saveMeta: SaveMeta): Promise<Save | null> {\n        let saves = BrowserSavesManager.getSaves();\n\n        let save = saves.find(save => save.id == saveMeta.id);\n\n        return new Promise(function (resolve) {\n            resolve(save || null);\n        });\n    }\n\n    save(name: string, graph: graph, type: ComputerType): Promise<void> {\n        if (!localStorage) {\n            throw new Error(\"no local storage\");\n        }\n\n        const saves = BrowserSavesManager.getSaves();\n        const next_id = Math.max(...saves.map(save => save.id)) + 1;\n        const save_index = saves.findIndex(save => save.name == name);\n        const save = {id: 0, name: name, save: {graph: graph, type: type}, user_id: \"local\"};\n\n        if (save_index == -1) {\n            save.id = next_id;\n            saves.push(save);\n        } else {\n            save.id = saves[save_index].id;\n            saves[save_index] = save;\n        }\n\n        let saves_json = JSON.stringify(saves, (key, value) => value instanceof Set ? Array.from(value) : value);\n\n        localStorage.setItem(itemName, saves_json);\n\n        return new Promise(function (resolve) {\n            resolve();\n        });\n    }\n\n    private static getSaves(): Save[] {\n        if (!localStorage) {\n            throw new Error(\"no local storage\");\n        }\n\n        let saves: Save[] = [];\n\n        try {\n            saves = JSON.parse(localStorage.getItem(itemName) || \"\");\n        } catch (error) {\n            console.warn(\"Invalid saves in local storage: \" + error);\n            return [];\n        }\n\n        return saves;\n    }\n}","import {getCookie} from \"../utils\";\n\nexport const BASE_URL = new URL(\"https://sscss.ru\");\nexport const AUTH_PORT = \"2101\";\nexport const PING_PORT = \"2102\";\nexport const SAVES_PORT = \"2103\";\n\nexport function getAuthHeaders(): Headers {\n    const headers = new Headers();\n\n    headers.set(\"tt\", \"g\");\n    headers.set(\"t\", getCookie(\"token\") || \"\");\n\n    return headers;\n}\n\nexport function getParams(headers: Headers): RequestInit {\n    return {\n        method: \"GET\",\n        headers: headers,\n    };\n}\n\nexport function postParams(headers: Headers, body: BodyInit): RequestInit {\n    headers.set(\"Content-Type\", \"application/json\");\n\n    return {\n        method: \"POST\",\n        headers: headers,\n        body: body,\n    };\n}","import {BASE_URL, getAuthHeaders, getParams, SAVES_PORT} from \"./apiBase\";\n\nexport type GetSavesResponse = {\n    id: number,\n    name: string,\n    user_id: string,\n}[];\n\nexport default function getSaves(onAuthFailed: () => void): Promise<GetSavesResponse> {\n    return new Promise(function (resolve, reject) {\n        const url = BASE_URL;\n        url.port = SAVES_PORT;\n        url.pathname = \"/saves\";\n\n        const headers = getAuthHeaders();\n        const params = getParams(headers);\n\n        fetch(url.href, params)\n            .then(response => {\n                if (response.status == 401) {\n                    onAuthFailed();\n                }\n                if (!response.ok) {\n                    throw new Error(response.status + response.statusText);\n                }\n\n                return response.json()\n            })\n            .then(json => resolve(json))\n            .catch(error => reject(error));\n    });\n}","import {BASE_URL, getAuthHeaders, getParams, postParams, SAVES_PORT} from \"./apiBase\";\n\nexport type SaveRequest = {\n    name: string,\n    save: string,\n};\n\nexport default function save(request: SaveRequest, onAuthFailed: () => void): Promise<void> {\n    return new Promise(function (resolve, reject) {\n        const url = BASE_URL;\n        url.port = SAVES_PORT;\n        url.pathname = \"/saves\";\n\n        const body = JSON.stringify(request);\n        const headers = getAuthHeaders();\n        const params = postParams(headers, body);\n\n        fetch(url.href, params)\n            .then(response => {\n                if (response.status == 401) {\n                    onAuthFailed();\n                }\n                if (!response.ok) {\n                    throw new Error(response.status + response.statusText);\n                }\n\n                resolve();\n            })\n            .catch(error => reject(error));\n    });\n}","import {BASE_URL, getAuthHeaders, getParams, SAVES_PORT} from \"./apiBase\";\nimport {ComputerType, graph} from \"../react-graph-vis-types\";\n\nexport type GetSaveRequest = {\n    id: number,\n};\n\nexport type GetSaveResponse = {\n    id: number,\n    name: string,\n    save: string,\n    user_id: string,\n};\n\nexport default function getSave(request: GetSaveRequest, onAuthFailed: () => void): Promise<GetSaveResponse> {\n    return new Promise(function (resolve, reject) {\n        const url = BASE_URL;\n        url.port = SAVES_PORT;\n        url.pathname = \"/saves\";\n        url.pathname += \"/\" + request.id;\n\n        const headers = getAuthHeaders();\n        const params = getParams(headers);\n\n        fetch(url.href, params)\n            .then(response => {\n                if (response.status == 401) {\n                    onAuthFailed();\n                }\n                if (!response.ok) {\n                    throw new Error(response.status + response.statusText);\n                }\n\n                return response.json()\n            })\n            .then(json => resolve(json))\n            .catch(error => reject(error));\n    });\n}","import SavesManager from \"./SavesManager\";\nimport {Save, SaveMeta} from \"./Save\";\nimport {ComputerType, graph} from \"../react-graph-vis-types\";\n\nimport getSaves, {GetSavesResponse} from \"../Api/getSaves\";\nimport {default as apiSave, SaveRequest} from \"../Api/save\";\nimport getSave, {GetSaveRequest} from \"../Api/getSave\";\n\nexport default class CloudSavesManager implements SavesManager {\n    private readonly onAuthFailed;\n\n    constructor(onAuthFailed: () => void) {\n        this.onAuthFailed = onAuthFailed;\n    }\n\n    async getSave(saveMeta: SaveMeta): Promise<Save | null> {\n        const request: GetSaveRequest = {\n            id: saveMeta.id\n        };\n\n        let save = null;\n\n        try {\n            const response = await getSave(request, this.onAuthFailed);\n\n            save = {\n                id: response.id,\n                name: response.name,\n                save: JSON.parse(response.save),\n                user_id: response.user_id,\n            };\n        } catch (error) {\n            console.error(error);\n        }\n\n        return save;\n    }\n\n    async getSavesMeta(): Promise<SaveMeta[]> {\n        let saves: GetSavesResponse = [];\n\n        try {\n            saves = await getSaves(this.onAuthFailed);\n        } catch (error) {\n            console.error(error);\n        }\n\n        return saves;\n    }\n\n    async save(name: string, graph: graph, type: ComputerType): Promise<void> {\n        const serialized_save = JSON.stringify({\n            graph: graph,\n            type: type\n        }, (key, value) => value instanceof Set ? Array.from(value) : value);\n\n        const request: SaveRequest = {\n            name: name,\n            save: serialized_save\n        };\n\n        try {\n            await apiSave(request, this.onAuthFailed);\n        } catch (error) {\n            console.error(error);\n        }\n    }\n}\n","import React, {useEffect, useState} from \"react\";\n\nimport {ComputerType, graph} from \"../../react-graph-vis-types\";\nimport {computersInfo} from \"../../utils\";\n\nimport BrowserSavesManager from \"../../SavesManager/BrowserSavesManager\";\nimport CloudSavesManager from \"../../SavesManager/CloudSavesManager\";\nimport {SaveMeta} from \"../../SavesManager/Save\";\n\nimport Paper from \"@mui/material/Paper\";\nimport Dialog from \"@mui/material/Dialog\";\nimport DialogTitle from \"@mui/material/DialogTitle\";\nimport DialogContent from \"@mui/material/DialogContent\";\nimport List from \"@mui/material/List\";\nimport ListItem from \"@mui/material/ListItem\";\nimport ListSubheader from \"@mui/material/ListSubheader\";\nimport ListItemText from \"@mui/material/ListItemText\";\nimport Button from \"@mui/material/Button\";\nimport Skeleton from \"@mui/material/Skeleton\";\n\nimport GitHubIcon from \"@mui/icons-material/GitHub\";\n\nimport \"./WelcomePopout.css\";\nimport {IconButton} from \"@mui/material\";\n\nexport interface WelcomePopoutProps {\n    open: boolean,\n    onClose: () => void,\n    onAuthFailed: () => void,\n    changeComputerType: (computerType: null | ComputerType, graph: graph | null) => void,\n}\n\nexport const WelcomePopout: React.FunctionComponent<WelcomePopoutProps> = (\n    {\n        open,\n        onClose,\n        onAuthFailed,\n        changeComputerType\n    }) => {\n    const browserSavesManager = new BrowserSavesManager();\n    const cloudSavesManager = new CloudSavesManager(onAuthFailed);\n\n    const onCreateTemplateClicked = (type: ComputerType) => {\n        changeComputerType(type, null);\n        onClose();\n    }\n\n    const onCreateEmptyClicked = (type: ComputerType) => {\n        changeComputerType(type, {nodes: [], edges: []});\n        onClose();\n    }\n\n    const onCloudSaveOpenClicked = async (saveMeta: SaveMeta) => {\n        const save = await cloudSavesManager.getSave(saveMeta);\n\n        if (save) {\n            changeComputerType(save.save.type, save.save.graph);\n            onClose();\n        }\n    }\n\n    const onBrowserSaveOpenClicked = async (saveMeta: SaveMeta) => {\n        const save = await browserSavesManager.getSave(saveMeta);\n\n        if (save) {\n            changeComputerType(save.save.type, save.save.graph);\n            onClose();\n        }\n    }\n\n    const updateCloudSavesMeta = async () => {\n        setLoadingCloudSavesMeta(true);\n\n        const savesMeta = await cloudSavesManager.getSavesMeta();\n        setCloudSavesMeta(savesMeta);\n\n        setLoadingCloudSavesMeta(false);\n    }\n\n    const updateBrowserSavesMeta = async () => {\n        const savesMeta = await browserSavesManager.getSavesMeta();\n        setBrowserSavesMeta(savesMeta);\n    }\n\n    const [cloudSavesMeta, setCloudSavesMeta] = useState<SaveMeta[]>([]);\n    const [browserSavesMeta, setBrowserSavesMeta] = useState<SaveMeta[]>([]);\n    const [loadingCloudSavesMeta, setLoadingCloudSavesMeta] = useState(false);\n\n    useEffect(() => {\n        if (open) {\n            updateBrowserSavesMeta();\n            updateCloudSavesMeta();\n        }\n    }, [open]);\n\n\n    return (\n        <Dialog open={open} onClose={onClose} maxWidth=\"md\" fullWidth>\n            <DialogTitle>\n                <p>Симулятор автоматов</p>\n            </DialogTitle>\n\n            <DialogContent>\n                <Paper\n                    className=\"welcome-popout__body\"\n                    variant=\"outlined\"\n                >\n                    <List dense>\n                        {\n                            cloudSavesMeta.length !== 0 ?\n                                <ListSubheader>\n                                    Открыть сохранение в облаке\n                                </ListSubheader>\n                                : null\n                        }\n\n                        {\n                            loadingCloudSavesMeta\n                                ?\n                                <div className=\"welcome-popout__body__cloud-skeleton\">\n                                    <Skeleton\n                                        className=\"welcome-popout__body__cloud-skeleton__rectangle\"\n                                        animation=\"wave\"\n                                        variant=\"rectangular\"\n                                        height={28}\n                                    />\n\n                                    <Skeleton\n                                        className=\"welcome-popout__body__cloud-skeleton__rectangle\"\n                                        animation=\"wave\"\n                                        variant=\"rectangular\"\n                                        height={28}\n                                    />\n\n                                    <Skeleton\n                                        className=\"welcome-popout__body__cloud-skeleton__rectangle\"\n                                        animation=\"wave\"\n                                        variant=\"rectangular\"\n                                        height={28}\n                                    />\n                                </div>\n                                :\n                                cloudSavesMeta.length !== 0 ?\n                                    cloudSavesMeta.map(saveMeta => (\n                                        <ListItem\n                                            key={saveMeta.id}\n                                            secondaryAction={\n                                                <Button\n                                                    variant=\"contained\"\n                                                    size=\"small\"\n                                                    onClick={() => onCloudSaveOpenClicked(saveMeta)}\n                                                >\n                                                    Открыть\n                                                </Button>\n                                            }\n                                        >\n                                            <ListItemText>\n                                                {saveMeta.name}\n                                            </ListItemText>\n                                        </ListItem>\n                                    ))\n                                    : null\n                        }\n\n                        {\n                            browserSavesMeta.length !== 0 ?\n                                <ListSubheader>\n                                    Открыть сохранение в браузере\n                                </ListSubheader>\n                                : null\n                        }\n\n                        {\n                            browserSavesMeta.length !== 0 ?\n                                browserSavesMeta.map(saveMeta => (\n                                    <ListItem\n                                        key={saveMeta.id}\n                                        secondaryAction={\n                                            <Button\n                                                variant=\"contained\"\n                                                size=\"small\"\n                                                onClick={() => onBrowserSaveOpenClicked(saveMeta)}\n                                            >\n                                                Открыть\n                                            </Button>\n                                        }\n                                    >\n                                        <ListItemText>\n                                            {saveMeta.name}\n                                        </ListItemText>\n                                    </ListItem>\n                                ))\n                                : null\n                        }\n\n                        <ListSubheader>\n                            Создать новый вычислитель\n                        </ListSubheader>\n                        {\n                            Object.entries(computersInfo).map(entry => (\n                                <ListItem\n                                    key={entry[1].name}\n                                    secondaryAction={\n                                        <div>\n                                            <Button\n                                                className=\"welcome-popout__create-empty-button\"\n                                                variant=\"text\"\n                                                size=\"small\"\n                                                onClick={() => onCreateEmptyClicked(entry[0] as ComputerType)}\n                                            >\n                                                Создать пустым\n                                            </Button>\n                                            <Button\n                                                variant=\"contained\"\n                                                size=\"small\"\n                                                onClick={() => onCreateTemplateClicked(entry[0] as ComputerType)}\n                                            >\n                                                Создать\n                                            </Button>\n                                        </div>\n                                    }\n                                >\n                                    <ListItemText primary={entry[1].name} secondary={entry[1].description}/>\n                                </ListItem>\n                            ))\n                        }\n                    </List>\n                </Paper>\n\n                <div className=\"welcome-popout__footer\">\n                    <IconButton href=\"https://github.com/spbu-se/WebAutomataConstructor\">\n                        <GitHubIcon className=\"welcome-popout__github-icon\"/>\n                    </IconButton>\n                </div>\n            </DialogContent>\n        </Dialog>\n    );\n}\n\nexport default WelcomePopout;\n","import React, {useEffect, useState} from \"react\";\n\nimport {ComputerType, graph} from \"../../react-graph-vis-types\";\n\nimport BrowserSavesManager from \"../../SavesManager/BrowserSavesManager\";\nimport CloudSavesManager from \"../../SavesManager/CloudSavesManager\";\nimport {SaveMeta} from \"../../SavesManager/Save\";\n\nimport Dialog from \"@mui/material/Dialog\";\nimport DialogTitle from \"@mui/material/DialogTitle\";\nimport DialogContent from \"@mui/material/DialogContent\";\nimport DialogActions from \"@mui/material/DialogActions\";\nimport TextField from \"@mui/material/TextField\";\nimport Button from \"@mui/material/Button\";\nimport ToggleButtonGroup from \"@mui/material/ToggleButtonGroup\";\nimport ToggleButton from \"@mui/material/ToggleButton\";\nimport List from \"@mui/material/List\";\nimport ListItem from \"@mui/material/ListItem\";\nimport ListItemButton from \"@mui/material/ListItemButton\";\nimport ListItemText from \"@mui/material/ListItemText\";\nimport Paper from \"@mui/material/Paper\";\nimport Skeleton from \"@mui/material/Skeleton\";\n\nimport \"./SavingPopout.css\";\n\nexport interface SavingPopoutProps {\n    open: boolean,\n    onClose: () => void,\n    isLogin: boolean,\n    onAuthFailed: () => void,\n\n    computerType: ComputerType,\n    graph: graph,\n}\n\nexport const SavingPopout: React.FunctionComponent<SavingPopoutProps> = (\n    {\n        open,\n        onClose,\n        isLogin,\n        onAuthFailed,\n        graph,\n        computerType\n    }) => {\n    const onSavesOriginChanged = (_: React.MouseEvent<HTMLElement>, value: string) => {\n        value = value || savesOrigin;\n        setSavesOrigin(value);\n    }\n\n    const onSaveNameClicked = (_: React.MouseEvent<HTMLDivElement>, saveMeta: SaveMeta) => {\n        setSaveName(saveMeta.name);\n    }\n\n    const onSaveNameChanged = (event: React.ChangeEvent<HTMLInputElement>) => {\n        const value = event.target.value;\n        setSaveName(value);\n    }\n\n    const onSaveClicked = (_: React.MouseEvent<HTMLButtonElement>) => {\n        switch (savesOrigin) {\n            case \"cloud\":\n                cloudSavesManager.save(saveName, graph, computerType);\n                break;\n            case \"browser\":\n                browserSavesManager.save(saveName, graph, computerType);\n                break;\n            default:\n                break;\n        }\n\n        updateNames();\n        onClose();\n    }\n\n    const updateNames = async () => {\n        setLoadingSavesMeta(true);\n\n        let savesMeta: SaveMeta[] = [];\n\n        switch (savesOrigin) {\n            case \"cloud\":\n                savesMeta = await cloudSavesManager.getSavesMeta();\n                break;\n            case \"browser\":\n                savesMeta = await browserSavesManager.getSavesMeta();\n                break;\n            default:\n                setSavesMeta([]);\n                break;\n        }\n\n        setSavesMeta(savesMeta);\n        setLoadingSavesMeta(false);\n    }\n\n    const updateDefaultOrigin = () => {\n        setSavesOrigin(isLogin ? \"cloud\" : \"browser\");\n    }\n\n    const [browserSavesManager] = useState<BrowserSavesManager>(new BrowserSavesManager());\n    const [cloudSavesManager] = useState<CloudSavesManager>(new CloudSavesManager(onAuthFailed));\n    const [savesOrigin, setSavesOrigin] = useState<string>(isLogin ? \"cloud\" : \"browser\");\n    const [savesMeta, setSavesMeta] = useState<SaveMeta[]>([]);\n    const [loadingSavesMeta, setLoadingSavesMeta] = useState<boolean>(false);\n    const [saveName, setSaveName] = useState<string>(\"\");\n\n    useEffect(() => {\n        if (open) {\n            updateDefaultOrigin();\n            updateNames();\n        }\n    }, [open]);\n\n    useEffect(() => {\n        updateNames();\n    }, [savesOrigin]);\n\n    useEffect(() => {\n        setSaveName(\"\");\n    }, [savesOrigin, open]);\n\n\n    return (\n        <Dialog open={open} onClose={onClose}>\n            <DialogTitle>\n                <p>Сохранение</p>\n            </DialogTitle>\n\n            <DialogContent>\n                <div className=\"saving-popout__body\">\n                    <div className=\"saving-popout__body__sidebar\">\n                        <ToggleButtonGroup\n                            orientation=\"vertical\"\n                            exclusive\n                            value={savesOrigin}\n                            onChange={onSavesOriginChanged}\n                        >\n                            <ToggleButton value=\"cloud\" disabled={!isLogin}>Облако</ToggleButton>\n                            <ToggleButton value=\"browser\">Браузер</ToggleButton>\n                        </ToggleButtonGroup>\n                    </div>\n\n                    <div className=\"saving-popout__body__main\">\n                        <Paper\n                            className=\"saving-popout__body__main__paper\"\n                            variant=\"outlined\"\n                        >\n                            {\n                                loadingSavesMeta\n                                    ?\n                                    <div className=\"saving-popout__body__main__skeleton\">\n                                        <Skeleton\n                                            className=\"saving-popout__body__main__skeleton__bar\"\n                                            animation=\"wave\"\n                                            variant=\"rectangular\"\n                                            height=\"36\"\n                                        />\n\n                                        <Skeleton\n                                            className=\"saving-popout__body__main__skeleton__bar\"\n                                            animation=\"wave\"\n                                            variant=\"rectangular\"\n                                            height=\"36\"\n                                        />\n\n                                        <Skeleton\n                                            className=\"saving-popout__body__main__skeleton__bar\"\n                                            animation=\"wave\"\n                                            variant=\"rectangular\"\n                                            height=\"36\"\n                                        />\n                                    </div>\n                                    :\n                                    <List dense>\n                                        {\n                                            savesMeta.map(saveMeta => (\n                                                <ListItem\n                                                    key={saveMeta.id}\n                                                    disablePadding\n                                                >\n                                                    <ListItemButton onClick={e => onSaveNameClicked(e, saveMeta)}>\n                                                        <ListItemText primary={saveMeta.name}/>\n                                                    </ListItemButton>\n                                                </ListItem>\n                                            ))\n                                        }\n                                    </List>\n                            }\n\n                        </Paper>\n                    </div>\n                </div>\n\n                <TextField\n                    className=\"saving-popout__save-name-input\"\n                    variant=\"standard\"\n                    size=\"small\"\n                    label=\"Имя сохранения\"\n                    value={saveName}\n                    onChange={onSaveNameChanged}\n                />\n\n                <DialogActions>\n                    <Button\n                        color=\"primary\"\n                        onClick={onSaveClicked}\n                    >\n                        Сохранить\n                    </Button>\n\n                    <Button\n                        color=\"primary\"\n                        onClick={onClose}\n                    >\n                        Отмена\n                    </Button>\n                </DialogActions>\n\n            </DialogContent>\n        </Dialog>\n    );\n}\n\nexport default SavingPopout;","import React, {AllHTMLAttributes, FC} from \"react\";\n\nimport {getRandomString} from \"../../../../utils\";\n\nimport \"./GoogleOAuthButton.css\";\n\nexport interface GoogleOAuthButtonProps extends AllHTMLAttributes<HTMLDivElement> {\n}\n\nconst GoogleOAuthButton: FC<GoogleOAuthButtonProps> = ({style, className}) => {\n    const domain = \"https://accounts.google.com/o/oauth2/v2/auth\";\n    const access_type = \"offline\";\n    const client_id = \"196702226545-b0hbpiq78pg29jle3rigem4jcucu8g36.apps.googleusercontent.com\";\n    const callback_url = \"https://sscss.ru:2101/auth/oauth/google/callback\";\n    const response_type = \"code\";\n    const scope = \"https://www.googleapis.com/auth/userinfo.email\";\n    const state = getRandomString(30);\n\n    document.cookie = `state=${state}; path=/; max-age=3600; secure`;\n\n    const auth_url = `${domain}?access_type=${access_type}&client_id=${client_id}&redirect_uri=${callback_url}&response_type=${response_type}&scope=${scope}&state=${state}`;\n\n    return (\n        <div className={`google_oauth_button ${className}`} style={{...style}}>\n            <form className=\"google_oauth_button__form\" method=\"POST\" action={auth_url}>\n                <button className=\"google_oauth_button__button\" type=\"submit\" value=\"Authorize via Google OAuth\">\n                    <img className=\"google_oauth_button__logo\" src={\"media/images/google_logo_18.png\"} alt=\"Google icon\"\n                         aria-hidden/>\n                    <p className=\"google_oauth_button__text\">\n                        Sign in with Google\n                    </p>\n                </button>\n            </form>\n        </div>\n    )\n};\n\nexport default GoogleOAuthButton;\n","import React, {FC} from \"react\";\nimport \"./LoginPage.css\";\nimport GoogleOAuthButton from \"./GoogleOAuthButton/GoogleOAuthButton\";\n\ninterface LoginPageProps {\n}\n\nconst LoginPage: FC<LoginPageProps> = ({}) => {\n    return (\n        <div className=\"login-page\">\n            <div className=\"login-page__form\">\n                <GoogleOAuthButton/>\n            </div>\n        </div>\n    )\n};\n\nexport default LoginPage;","import React, {FC, useEffect, useState} from \"react\";\nimport \"./PingPage.css\";\n\ninterface PingPageProps {\n}\n\nconst getCookie = (name: string) => {\n    console.log(document.cookie);\n    const value = `; ${document.cookie}`;\n    const parts = value.split(`; ${name}=`);\n    if (parts.length === 2) return parts.pop()?.split(';').shift();\n}\n\nconst PingPage: FC<PingPageProps> = ({}) => {\n    const [pong, setPong] = useState('ping...');\n\n\n    useEffect(() => {\n        const ping_domain = \"https://sscss.ru:2102/ping\";\n\n        const fetch_init: RequestInit = {\n            headers: new Headers({\n                'tt': 'g',\n                't': getCookie('token')!,\n            }),\n        };\n\n        const fetchPong = async () => {\n            const response = await fetch(ping_domain, fetch_init);\n            const text = await response.text();\n\n            setPong(text);\n        }\n\n        fetchPong().catch(err => console.log(err));\n    });\n\n    return (\n        <div className='ping-page'>\n            {pong}\n        </div>\n    )\n};\n\nexport default PingPage;","import React, {FC} from \"react\";\nimport \"./FailedLoginPage.css\";\n\nimport { Link } from \"react-router-dom\";\n\ninterface FailedLoginPageProps {\n}\n\nconst FailedLoginPage: FC<FailedLoginPageProps> = ({}) => {\n    return (\n        <div className=\"failed-login-page\">\n            <h1>Login failed</h1>\n            <Link to=\"/login\">Login page</Link>\n        </div>\n    )\n};\n\nexport default FailedLoginPage;","import React from \"react\";\n\nimport {useHistory} from \"react-router-dom\";\n\nimport Button from \"@mui/material/Button\";\nimport AppBar from \"@mui/material/AppBar\";\nimport Toolbar from \"@mui/material/Toolbar\";\n\nimport \"./AppHeader.css\";\n\nexport interface AppHeaderProps {\n    onMenuButtonClicked: (event: React.MouseEvent) => void,\n    onSaveButtonClicked: (event: React.MouseEvent) => void,\n    onLogoutButtonClicked: () => void,\n    isLogin: boolean,\n}\n\nexport const AppHeader: React.FunctionComponent<AppHeaderProps> = (\n    {\n        onMenuButtonClicked,\n        onSaveButtonClicked,\n        onLogoutButtonClicked,\n        isLogin,\n    }) => {\n    const history = useHistory();\n\n    const onSignInButtonClicked = () => {\n        history.push(\"/login\");\n    }\n\n    const onSignOutButtonClicked = () => {\n        document.cookie = \"token=; path=/; secure; max-age=-99999999\";\n        onLogoutButtonClicked();\n    }\n\n\n    return (\n        <AppBar position=\"sticky\">\n            <Toolbar variant=\"dense\">\n                <div className=\"app__header__left\">\n                    <Button\n                        className=\"app__header__button\"\n                        color=\"inherit\"\n                        onClick={onMenuButtonClicked}\n                    >\n                        Меню\n                    </Button>\n\n                    <Button\n                        className=\"app__header__button\"\n                        color=\"inherit\"\n                        onClick={onSaveButtonClicked}\n                    >\n                        Сохранить\n                    </Button>\n                </div>\n\n                <div className=\"app__header__right\">\n                    <Button\n                        className=\"app__header__button\"\n                        color=\"inherit\"\n                        onClick={isLogin ? onSignOutButtonClicked : onSignInButtonClicked}\n                    >\n                        {isLogin ? \"Выйти\" : \"Войти\"}\n                    </Button>\n                </div>\n            </Toolbar>\n        </AppBar>\n    );\n}\n\nexport default AppHeader;\n","import {AUTH_PORT, BASE_URL} from \"./apiBase\";\n\nexport type ObtainAuthRequest = {\n    state: string,\n};\n\nexport type ObtainAuthResponse = {\n    value: string,\n};\n\nexport default function obtainAuth(request: ObtainAuthRequest): Promise<ObtainAuthResponse> {\n    return new Promise(function (resolve, reject) {\n        const url = BASE_URL;\n        url.port = AUTH_PORT;\n        url.pathname = \"/auth/obtain\";\n        url.pathname += \"/\" + request.state;\n\n        fetch(url.href)\n            .then(response => {\n                if (!response.ok) {\n                    throw new Error(response.status + response.statusText);\n                }\n\n                return response.json()\n            })\n            .then(json => resolve(json))\n            .catch(error => reject(error));\n    });\n}","import React, {useEffect} from \"react\";\n\nimport {useHistory} from \"react-router-dom\";\n\nimport {getCookie} from \"../../../utils\";\n\nimport obtainAuth from \"../../../Api/obtainAuth\";\n\nimport \"./SuccessLoginPage.css\";\n\nexport interface SuccessLoginPageProps {\n    onAuthSuccess: () => void,\n}\n\nexport const SuccessLoginPage: React.FunctionComponent<SuccessLoginPageProps> = ({onAuthSuccess}) => {\n    const updateAuth = async () => {\n        const state = getCookie(\"state\") || \"\";\n\n        let response = null;\n\n        try {\n            response = await obtainAuth({state: state});\n            onAuthSuccess();\n        } catch (error) {\n            console.error(error);\n            return;\n        }\n\n        document.cookie = `token=${response.value}; path=/; secure; max-age=86400`;\n        history.push(\"/\");\n    }\n\n    useEffect(() => {\n        updateAuth();\n    }, []);\n\n    const history = useHistory();\n\n    return (\n        <div>\n        </div>\n    )\n};\n\nexport default SuccessLoginPage;","import React, { useEffect, useRef, useState, useLayoutEffect } from \"react\";\nimport { FullItem } from \"vis-data/declarations/data-interface\";\nimport {\n    DataSet,\n    Network,\n    Options,\n    Data,\n} from \"vis-network/standalone/esm/vis-network\";\nimport { Move, NodeCore } from \"./Logic/IGraphTypes\";\nimport {edge, graph, node } from \"./react-graph-vis-types\";\nimport {Menu, MenuItem, MenuList, Paper, Typography } from \"@mui/material\";\n\ninterface PropsVisNet {\n    nodes: DataSet<node>,\n    edges: DataSet<edge>,\n    data: {nodes: DataSet<node, \"id\">, edges: DataSet<edge, \"id\">},\n    onDoubleClick: (params?: any) => void,\n    onClick1: (params?: any) => void,\n    onClick2: (params?: any) => void,\n    onClick3: (params?: any) => void,\n    onClick4: (params?: any) => void,\n    network: any,\n    contextMenu?: any\n}\n\n\n\nexport const VisNetwork = (props: PropsVisNet) => {\n    // A reference to the div rendered by this component\n    const [domNode, setdomNode] = useState(useRef<HTMLDivElement>(null));\n\n    const [options, setOptions] = useState<Options>({\n        edges: {\n            smooth: {\n                enabled: true,\n                type: \"discrete\",\n                roundness: 0.5\n            },\n            // color: {\n            //     //color:'#848484',\n            //     highlight:'#848484',\n            //     hover: '#d3d2cd',\n            //     inherit: true,\n            //     opacity:1.0\n            // },\n            color: \"#000000\",\n            width: 0.5,\n            arrows: {\n                to: {\n                    enabled: true,\n                    scaleFactor: 0.5\n                }\n            },\n            length: 200\n        },\n        manipulation: {\n            enabled: true,\n            addEdge: function(edgeData: any,callback: any) {\n                alert(\"Called 'Add Edge'\");\n              }\n        },\n\n        layout: {improvedLayout:false},\n        nodes: {\n            shapeProperties: {\n                interpolation: false\n            },\n            shape: \"circle\",\n            font: \"18px Roboto black\",\n            labelHighlightBold: false,\n            size: 40,\n            borderWidth : 2,\n            color: {\n                background: \"#ffffff\",\n                border: \"#000000\",\n                highlight: {\n                    border: \"#000000\",\n                    background: \"#ffffff\"\n                }\n            },\n            // color: \"#ffffff\",\n        },\n        physics: {\n            enabled: false\n        }\n    });\n\n    const [input, setInput] = useState(\"\")\n\n    const [elements, setElements] = useState<graph>({ edges: [], nodes: [] })\n\n    const [contextMenu, setContextMenu] = React.useState<{mouseX: any, mouseY: any} | null>(null);\n\n    const handleContextMenu = (event: { preventDefault: () => void; clientX: number; clientY: number; }) => {\n        event.preventDefault();\n        setContextMenu(\n            contextMenu === null\n                ? {\n                    mouseX: event.clientX - 2,\n                    mouseY: event.clientY - 4,\n                }\n                : // repeated contextmenu when it is already open closes it with Chrome 84 on Ubuntu\n                  // Other native context menus might behave different.\n                  // With this behavior we prevent contextmenu from the backdrop to re-locale existing context menus.\n                null,\n        );\n    };\n\n    const handleClose = () => {\n        setContextMenu(null);\n    };\n\n    useEffect(() => {\n        // props.network.current.addEdgeMode();\n        document.addEventListener(\"keydown\", (event) => {\n            if (props.network.current) {\n                if (event.ctrlKey) {\n                    props.network.current.addEdgeMode();\n                }\n            }\n        })\n\n        document.addEventListener(\"keyup\", (event) => {\n            if (props.network.current) {\n                props.network.current.disableEditMode();\n            }\n        })\n    })\n\n    useLayoutEffect(() => {\n\n        if (domNode.current) {\n            props.network.current = new Network(domNode.current, props.data, options);\n        }\n\n        window.addEventListener(\"contextmenu\", e => e.preventDefault());\n\n        // document.addEventListener(\"keydown\", (event) => {\n        //     if (props.network.current) {\n        //         if (event.ctrlKey) {\n        //             props.network.current.addEdgeMode();\n        //         }\n        //     }\n        // })\n\n        // document.addEventListener(\"keyup\", (event) => {\n        //     if (props.network.current) {\n        //         props.network.current.disableEditMode();\n        //     }\n        // })\n\n        if (props.network.current) {\n            props.network.current.on('doubleClick', props.onDoubleClick)\n            props.network.current.on('click', props.onClick1);\n            props.network.current.on('click', props.onClick2);\n            props.network.current.on('click', props.onClick3);\n            props.network.current.on('click', props.onClick4);\n            // props.network.current.on('click', () => {\n            //     setShowMenu(false)\n            // });\n            // props.network.current.on('contextmenu', handleContextMenu);\n        }\n\n    }, [domNode, props.network, props.data, options]);\n\n    const refContainer = () => {\n        return (\n            <div\n                style={{\n                    height: \"100%\",\n                    width: \"100%\",\n                }}\n                ref={domNode}\n            />\n        );\n    }\n\n    return (\n        props.contextMenu === undefined\n            ?\n                refContainer()\n            :\n                <div onContextMenu={handleContextMenu}\n                     style={{\n                         height: \"100%\",\n                         width: \"100%\",\n                }}>\n                    {refContainer()}\n                    <Menu\n                        open={contextMenu !== null}\n                        onClose={handleClose}\n                        anchorReference=\"anchorPosition\"\n                        anchorPosition={\n                            contextMenu !== null\n                                ? { top: contextMenu.mouseY, left: contextMenu.mouseX }\n                                : undefined\n                        }\n                    >\n                        {props.contextMenu(handleClose, handleContextMenu)}\n                    </Menu>\n                </div>\n    );\n};","import * as React from 'react';\nimport Box from '@mui/material/Box';\nimport Button from '@mui/material/Button';\nimport Typography from '@mui/material/Typography';\nimport Modal from '@mui/material/Modal';\nimport { useEffect } from 'react';\n\nconst style = {\n    position: 'absolute' as 'absolute',\n    top: '50%',\n    left: '50%',\n    transform: 'translate(-50%, -50%)',\n    width: 400,\n    bgcolor: 'background.paper',\n    border: '2px solid #000',\n    boxShadow: 24,\n    p: 4,\n};\n\nexport const NonDetermenisticModal = (props: { isNonDetermenistic: boolean, setIsNonDetermenistic: (v: boolean) => void }) => {\n    const [open, setOpen] = React.useState(false);\n    const handleClose = () => setOpen(false);\n\n    useEffect(() => {\n        if (props.isNonDetermenistic) {\n            setOpen(props.isNonDetermenistic)\n            props.setIsNonDetermenistic(false)\n        }\n    });\n\n    return (\n        <div>\n            <Modal\n                open={open}\n                onClose={handleClose}\n                aria-labelledby=\"modal-modal-title\"\n                aria-describedby=\"modal-modal-description\"\n            >\n                <Box sx={style}>\n                    <Typography id=\"modal-modal-title\" variant=\"h6\" component=\"h2\">\n                        Ошибка\n                    </Typography>\n                    <Typography id=\"modal-modal-description\" sx={{ mt: 2 }}>\n                        Недетерменизм\n                    </Typography>\n                </Box>\n            </Modal>\n        </div>\n    );\n}\n\nexport const NonMinimizableModal = (props: { isNonMinimizable: boolean, setIsNonMinimizable: (v: boolean) => void }) => {\n    const [open, setOpen] = React.useState(false);\n    const handleClose = () => setOpen(false);\n\n    useEffect(() => {\n        if (props.isNonMinimizable) {\n            setOpen(props.isNonMinimizable)\n            props.setIsNonMinimizable(false)\n        }\n    });\n\n    return (\n        <div>\n            <Modal\n                open={open}\n                onClose={handleClose}\n                aria-labelledby=\"modal-modal-title\"\n                aria-describedby=\"modal-modal-description\"\n            >\n                <Box sx={style}>\n                    <Typography id=\"modal-modal-title\" variant=\"h6\" component=\"h2\">\n                        Ошибка\n                    </Typography>\n                    <Typography id=\"modal-modal-description\" sx={{ mt: 2 }}>\n                        Невозможно минимизровать\n                    </Typography>\n                </Box>\n            </Modal>\n        </div>\n    );\n}","import React, { ReactNode } from 'react';\nimport \"./App.css\"\nimport Graph from \"react-graph-vis\";\nimport {\n    ComputerType,\n    controlNodeDraggingEventArgs, deselectEdgeEventArgs,\n    deselectNodeEventArgs,\n    doubleClickEventArgs, dragEndEventArgs, edge,\n    graph,\n    node, selectEdgeEventArgs,\n    selectNodeEventArgs\n} from \"./react-graph-vis-types\";\nimport { cloneDeep } from \"lodash\";\nimport NodeControl from \"./Components/NodeControl/NodeControl\";\nimport EdgeControl from \"./Components/EdgeControl/EdgeControl\";\nimport {\n    computersInfo, decorateGraph, elementsToGraph, getNodeNamePrefix, getTransitionsTitles,\n    graphToElements, transitionsToLabel\n} from \"./utils\";\nimport RunControl from \"./Components/RunControl/RunControl\";\nimport WelcomePopout from \"./Components/WelcomePopout/WelcomePopout\";\nimport Paper from \"@mui/material/Paper\";\nimport SavingPopout from \"./Components/SavingPopout/SavingPopout\";\nimport { Route, Switch, HashRouter } from \"react-router-dom\";\nimport LoginPage from \"./Components/Pages/LoginPage/LoginPage\";\nimport PingPage from \"./Components/Pages/PingPage/PingPage\";\nimport FailedLoginPage from \"./Components/Pages/FailedLoginPage/FailedLoginPage\";\nimport AppHeader from \"./Components/AppHeader/AppHeader\";\nimport { TransitionParams } from \"./Logic/IGraphTypes\";\nimport SuccessLoginPage from \"./Components/Pages/SuccessLoginPage/SuccessLoginPage\";\nimport { VisNetwork } from './VisNetwork';\nimport {\n    DataSet,\n    Network,\n    Options,\n    Data,\n} from \"vis-network/standalone/esm/vis-network\";\nimport { Output } from './Logic/Types';\nimport { NonDetermenisticModal, NonMinimizableModal } from './ErrorModal';\n// import {ContextMenu, MenuItem as CotextMenuItem, ContextMenuTrigger} from \"react-contextmenu\";\n\ninterface appProps {\n}\n\nexport type Elements = {\n    nodes: DataSet<node, \"id\">,\n    edges: DataSet<edge, \"id\">\n}\n\ninterface appState {\n    computerType: null | ComputerType,\n    selectedNode: node | null,\n    selectedEdge: edge | null,\n    inEdgeMode: boolean,\n    elements: Elements,\n    options: any,\n    initiallyStabilized: boolean,\n    popout: ReactNode | null,\n    savePopoutOpen: boolean,\n    welcomePopoutOpen: boolean,\n    isLogin: boolean,\n    mem: string[] | undefined,\n    ptr: number | undefined,\n    wasComputerResetted: boolean,\n    byEmptyStack: boolean,\n    errIsNonDetermenistic: boolean,\n    errIsNonMinimizable: boolean\n}\n\nexport const ComputerTypeContext = React.createContext<null | ComputerType>(null);\n\nexport const computerAction = {\n    init: (() => { }),\n    nfaToDfa: (() => { }),\n    minimizeDfa: (() => { }),\n    mooreToMealy: (() => { }),\n    mealyToMoore: (() => { })\n}\n\nexport const controlAction = {\n    changerByStack: (() => { }),\n    run: (() => { }),\n    step: (() => { }),\n    reset: (() => { })\n}\n\n// export interface errorAction {\n//     isNonDetermenistic: boolean, \n//     setIsNonDetermenistic: (v: boolean) => void\n// }\n// export const errorAction =  {\n//     isNonDetermenistic: false, \n//     setIsNonDetermenistic: (v: boolean): void => { errorAction.isNonDetermenistic = v }\n// }\n\n\ninterface RibbonProps {\n    computerType: null | ComputerType,\n    wasComputerResetted: boolean,\n    mem: string[] | undefined,\n    ptr: number | undefined\n}\n\nexport const Ribbon = (props: RibbonProps) => {\n    const memRef = React.createRef<HTMLDivElement>()\n    return (\n        props.computerType === \"tm\" && props.wasComputerResetted\n            ?\n            <div className=\"app__mem_ribbon\">\n                {\n                    props.mem?.map((value, index) =>\n                        <div\n                            className=\"app__mem_cell\"\n                            style={{ border: `${index === props.ptr ? \"#0041d0\" : \"#000000\"} 2px solid` }}\n                        >\n                            {Math.abs(Math.abs(index) - Math.abs(props.ptr!)) <= 5\n                                ? <div ref={memRef} />\n                                : <div />\n                            }\n                            {value}\n                            {memRef?.current?.scrollIntoView({ behavior: 'smooth' })}\n                        </div>\n                    )\n                }\n            </div>\n            : <div />\n    )\n}\n\nclass App extends React.Component<appProps, appState> {\n\n    memRef = React.createRef<HTMLDivElement>();\n    network = React.createRef<Network | null>();\n\n    constructor(props: appProps) {\n        super(props);\n\n        this.state = {\n            computerType: null,\n\n            selectedNode: null,\n            selectedEdge: null,\n            inEdgeMode: false,\n            elements: { nodes: new DataSet<node>(), edges: new DataSet<edge>() },\n            options: {\n                edges: {\n                    smooth: {\n                        enabled: true,\n                        type: \"discrete\",\n                        roundness: 0.5\n                    },\n                    length: 200\n                },\n                nodes: {\n                    shape: \"box\",\n                    font: \"18px Roboto black\",\n                    labelHighlightBold: false,\n                    widthConstraint: 40,\n                    color: \"red\",\n                    heightConstraint: 40\n                },\n                physics: {\n                    enabled: false\n                }\n            },\n            initiallyStabilized: false,\n            popout: null,\n            savePopoutOpen: false,\n            welcomePopoutOpen: false,\n            isLogin: true,\n            mem: undefined,\n            ptr: undefined,\n            wasComputerResetted: false,\n            byEmptyStack: false,\n\n            errIsNonDetermenistic: false,\n            errIsNonMinimizable: false,\n\n            // errorAction: {\n            //     isNonDetermenistic: false, \n            //     setIsNonDetermenistic: (v: boolean): void => { this.setState({ errorAction.isNonDetermenistic = v}) }\n            // }\n        };\n    }\n\n    setIsNonDetermenistic = (v: boolean) => this.setState({ errIsNonDetermenistic: v })\n\n    setIsNonMinimizable = (v: boolean) => this.setState({ errIsNonMinimizable: v })\n\n    componentDidMount() {\n        this.updateGraph();\n        // this.subscribeToShortcuts();\n        this.openWelcomePopout();\n    }\n\n    lastNodeId = 0;\n\n    ////////////////////////////////////////////////////////////////////////////////////////////////////\n    subscribeToShortcuts = () => {\n        document.addEventListener(\"keydown\", (event: KeyboardEvent) => {\n            // if (event.key === \"Shift\" && !this.state.inEdgeMode) {\n            //     this.enterEdgeMode();\n            // }\n            if (event.key === \"s\" && event.ctrlKey) {\n                event.preventDefault();\n                this.openSavePopout();\n            }\n        })\n\n        // document.addEventListener(\"keyup\", (event: KeyboardEvent) => {\n        //     if (event.key === \"Shift\" && this.state.inEdgeMode) {\n        //         this.leaveEdgeMode();\n        //     }\n        // })\n    }\n\n    openSavePopout = () => {\n        this.setState({ savePopoutOpen: true });\n    }\n\n    closeSavePopout = () => {\n        this.setState({ savePopoutOpen: false });\n    }\n\n    openWelcomePopout = () => {\n        this.setState({ welcomePopoutOpen: true });\n    }\n\n    closeWelcomePopout = () => {\n        this.setState({ welcomePopoutOpen: false });\n    }\n\n    login = () => {\n        this.setState({ isLogin: true });\n    }\n\n    logout = () => {\n        this.setState({ isLogin: false });\n    }\n\n    changePopout = (popout: ReactNode | null) => {\n        this.setState({ popout: popout });\n    }\n\n\n    updateGraph = (): void => {\n        decorateGraph(this.state.elements, this.state.computerType)\n    }\n\n    changeNodeLabel = (id: number, label: string): void => {\n        this.state.elements.nodes.forEach((node) => {\n            if (node.id === id) {\n                const lableTokens =\n                    label\n                        .split('')\n                        .filter(x => x !== \" \" && x !== \"\\n\")\n                        .join('')\n                        .split('|')\n                const output = lableTokens[1] !== undefined ? lableTokens[1] : \"\"\n                this.state.elements.nodes.update({\n                    id: node.id,\n                    label: label,\n                    output: output\n                })\n            }\n        })\n        this.updateGraph()\n    }\n\n\n    changeStateIsAdmit = (id: number, isAdmit: boolean): void => {\n        this.state.elements.nodes.forEach((node) => {\n            if (node.id === id) {\n                this.state.elements.nodes.update({\n                    id: node.id,\n                    isAdmit: isAdmit\n                })\n            }\n        })\n        this.updateGraph()\n    }\n\n    changeStateIsInitial = (id: number, isInitial: boolean): void => {\n        this.state.elements.nodes.forEach((node) => {\n            if (node.id === id) {\n                this.state.elements.nodes.update({\n                    id: node.id,\n                    isInitial: isInitial\n                })\n            }\n        })\n        this.updateGraph()\n    }\n\n\n    changeStateIsCurrent = (ids: number[], isCurrent: boolean): void => {\n        this.state.elements.nodes.forEach((node) => {\n            if (node.isCurrent) {\n                this.state.elements.nodes.update({\n                    id: node.id,\n                    isCurrent: false\n                })\n            }\n        })\n        this.state.elements.nodes.forEach((node) => {\n            if (ids.includes(node.id)) {\n                this.state.elements.nodes.update({\n                    id: node.id,\n                    isCurrent: isCurrent\n                })\n            }\n        })\n        this.updateGraph()\n    }\n\n    createNode = (e: { pointer: { canvas: { x: any; y: any; }; }; }) => {\n        this.lastNodeId++;\n        const node = {\n            id: this.lastNodeId,\n            label: 'S' + (this.lastNodeId),\n            x: e.pointer.canvas.x,\n            y: e.pointer.canvas.y,\n            isAdmit: false,\n            isInitial: false,\n            isCurrent: false,\n        }\n        this.state.elements.nodes.add(node);\n    }\n\n    selectNode = (e: { nodes: number[]; }): void => {\n        const nodesIDs: number[] = e.nodes;\n        const selectedNodes = this.state.elements.nodes.get(nodesIDs);\n        this.setState({ selectedNode: selectedNodes[0] });\n    }\n\n\n    deselectNode = (e: { nodes: number[]; }): void => {\n        const nodesIDs: number[] = e.nodes;\n        if (nodesIDs.length === 0) {\n            this.setState({ selectedNode: null });\n        }\n    }\n\n    deleteNode = (id: number): void => {\n        this.state.elements.nodes.remove(id)\n\n        let rmEdges: string[] = []\n        this.state.elements.edges.forEach((edge) => {\n            if (edge.from === id || edge.to === id) {\n                rmEdges.push(edge.id!)\n            }\n        })\n        this.state.elements.edges.remove(rmEdges)\n    }\n\n    selectEdge = (e: { edges: any; }): void => {\n        const edgesIDs: number[] = e.edges;\n        const selectedEdges = this.state.elements.edges.get(edgesIDs);\n        this.setState({ selectedEdge: selectedEdges[0] });\n    }\n\n    deselectEdge = (e: { edges: number[]; }): void => {\n        const edgesIDs: number[] = e.edges;\n        if (edgesIDs.length === 0) {\n            this.setState({ selectedEdge: null });\n        }\n    }\n\n\n    changeEdgeTransition = (id: string, transitions: Set<TransitionParams[]>): void => {\n        this.state.elements.edges.update({\n            id: id,\n            label: transitionsToLabel(transitions, this.state.computerType),\n            transitions: transitions\n        })\n    }\n\n    deleteEdge = (id: string): void => {\n        this.state.elements.edges.remove(id)\n    }\n\n    updMem = (mem: string[], ptr: number): void => {\n        this.setState({ mem: mem, ptr: ptr });\n    }\n\n    NFAContextMenu = (handleContextMenu: any, handleClose: any) => {\n        return (\n            <div onContextMenu={handleContextMenu}>\n                <div onClick={handleClose}>\n                    <button\n                        className={\"button-context-menu\"}\n                        onClick={controlAction.step}\n                    >\n                        {\"Шаг\"}\n                    </button>\n                </div>\n                <div onClick={handleClose}>\n                    <button\n                        className={\"button-context-menu\"}\n                        onClick={controlAction.run}\n                    >\n                        {\"Запуск\"}\n                    </button>\n                </div>\n                <div onClick={handleClose}>\n                    <button\n                        className={\"button-context-menu\"}\n                        onClick={controlAction.reset}\n                    >\n                        {\"Сброс\"}\n                    </button>\n                </div>\n                <div onClick={handleClose}>\n                    <button\n                        className={\"button-context-menu\"}\n                        onClick={computerAction.nfaToDfa}\n                    >\n                        {\"НКА->ДКА\"}\n                    </button>\n                </div>\n\n            </div>\n        )\n    }\n\n\n    DFAContextMenu = (handleContextMenu: any, handleClose: any) => {\n        return (\n            <div onContextMenu={handleContextMenu}>\n                <div onClick={handleClose}>\n                    <button\n                        className={\"button-context-menu\"}\n                        onClick={controlAction.step}\n                    >\n                        {\"Шаг\"}\n                    </button>\n                </div>\n                <div onClick={handleClose}>\n                    <button\n                        className={\"button-context-menu\"}\n                        onClick={controlAction.run}\n                    >\n                        {\"Запуск\"}\n                    </button>\n                </div>\n                <div onClick={handleClose}>\n                    <button\n                        className={\"button-context-menu\"}\n                        onClick={controlAction.reset}\n                    >\n                        {\"Сброс\"}\n                    </button>\n                </div>\n                <div onClick={handleClose}>\n                    <button\n                        className={\"button-context-menu\"}\n                        onClick={computerAction.minimizeDfa}\n                    >\n                        {\"Минимизровать\"}\n                    </button>\n                </div>\n            </div>\n        )\n    }\n\n    MealyContextMenu = (handleContextMenu: any, handleClose: any) => {\n        return (\n            <div onContextMenu={handleContextMenu}>\n                <div onClick={handleClose}>\n                    <button\n                        className={\"button-context-menu\"}\n                        onClick={controlAction.step}\n                    >\n                        {\"Шаг\"}\n                    </button>\n                </div>\n                <div onClick={handleClose}>\n                    <button\n                        className={\"button-context-menu\"}\n                        onClick={controlAction.run}\n                    >\n                        {\"Запуск\"}\n                    </button>\n                </div>\n                <div onClick={handleClose}>\n                    <button\n                        className={\"button-context-menu\"}\n                        onClick={controlAction.reset}\n                    >\n                        {\"Сброс\"}\n                    </button>\n                </div>\n                <div onClick={handleClose}>\n                    <button\n                        className={\"button-context-menu\"}\n                        onClick={computerAction.mealyToMoore}\n                    >\n                        {\"Мур\"}\n                    </button>\n                </div>\n            </div>\n        )\n    }\n\n    MooreContextMenu = (handleContextMenu: any, handleClose: any) => {\n        return (\n            <div onContextMenu={handleContextMenu}>\n                <div onClick={handleClose}>\n                    <button\n                        className={\"button-context-menu\"}\n                        onClick={controlAction.step}\n                    >\n                        {\"Шаг\"}\n                    </button>\n                </div>\n                <div onClick={handleClose}>\n                    <button\n                        className={\"button-context-menu\"}\n                        onClick={controlAction.run}\n                    >\n                        {\"Запуск\"}\n                    </button>\n                </div>\n                <div onClick={handleClose}>\n                    <button\n                        className={\"button-context-menu\"}\n                        onClick={controlAction.reset}\n                    >\n                        {\"Сброс\"}\n                    </button>\n                </div>\n                <div onClick={handleClose}>\n                    <button\n                        className={\"button-context-menu\"}\n                        onClick={computerAction.mooreToMealy}\n                    >\n                        {\"Мили\"}\n                    </button>\n                </div>\n            </div>\n        )\n    }\n\n    PDAContextMenu = (handleContextMenu: any, handleClose: any) => {\n        return (\n            <div onContextMenu={handleContextMenu}>\n                <div onClick={handleClose}>\n                    <button\n                        className={\"button-context-menu\"}\n                        onClick={controlAction.step}\n                    >\n                        {\"Шаг\"}\n                    </button>\n                </div>\n                <div onClick={handleClose}>\n                    <button\n                        className={\"button-context-menu\"}\n                        onClick={controlAction.run}\n                    >\n                        {\"Запуск\"}\n                    </button>\n                </div>\n                <div onClick={handleClose}>\n                    <button\n                        className={\"button-context-menu\"}\n                        onClick={controlAction.reset}\n                    >\n                        {\"Сброс\"}\n                    </button>\n                </div>\n                <div onClick={handleClose}>\n                    <button\n                        className={\"button-context-menu\"}\n                        onClick={controlAction.changerByStack}\n\n                    >\n                        {this.state.byEmptyStack ? \"По стеку\" : \"По состоянию\"}\n                    </button>\n                </div>\n            </div>\n        )\n    }\n\n    AnotherContextMenu = (handleContextMenu: any, handleClose: any) => {\n        return (\n            <div onContextMenu={handleContextMenu}>\n                <div onClick={handleClose}>\n                    <button\n                        className={\"button-context-menu\"}\n                        onClick={controlAction.step}\n                    >\n                        {\"Шаг\"}\n                    </button>\n                </div>\n                <div onClick={handleClose}>\n                    <button\n                        className={\"button-context-menu\"}\n                        onClick={controlAction.run}\n                    >\n                        {\"Запуск\"}\n                    </button>\n                </div>\n                <div onClick={handleClose}>\n                    <button\n                        className={\"button-context-menu\"}\n                        onClick={controlAction.reset}\n                    >\n                        {\"Сброс\"}\n                    </button>\n                </div>\n                {/* <div onClick={handleClose}>\n                    <button\n                        className={\"button-context-menu\"}\n                    >\n                        {\"Just-button\"}\n                    </button>\n                </div> */}\n            </div>\n        )\n    }\n\n    ContextMenu = (computerType: null | ComputerType) => {\n        switch (computerType) {\n            case \"nfa\":\n            case \"nfa-eps\": {\n                return this.NFAContextMenu\n            }\n            case \"dfa\": {\n                return this.DFAContextMenu\n            }\n            case \"mealy\" : \n            case \"dmealy\": {\n                return this.MealyContextMenu\n            }\n            case \"moore\": \n            case \"dmoore\": {\n                return this.MooreContextMenu\n            }\n            case \"pda\": \n            case \"dpda\": {\n                return this.PDAContextMenu\n            }\n            default: {\n                return this.AnotherContextMenu\n            }\n        }\n    }\n\n    render() {\n        return (\n            <HashRouter>\n                <Switch>\n                    <Route path=\"/login\">\n                        <LoginPage />\n                    </Route>\n                    <Route path=\"/ping\">\n                        <PingPage />\n                    </Route>\n                    <Route path=\"/failed-login\">\n                        <FailedLoginPage />\n                    </Route>\n                    <Route path=\"/success-login\">\n                        <SuccessLoginPage onAuthSuccess={this.login} />\n                    </Route>\n                    <Route path=\"/\">\n                        <ComputerTypeContext.Provider value={this.state.computerType}>\n                            <div className=\"app\">\n                                <WelcomePopout\n                                    open={this.state.welcomePopoutOpen}\n                                    onClose={this.closeWelcomePopout}\n                                    onAuthFailed={this.logout}\n                                    changeComputerType={(computerType, graph: graph | null) => {\n\n                                        const defaultGraph = graph || computersInfo[computerType!].defaultGraph;\n\n                                        console.log(defaultGraph);\n                                        console.log(defaultGraph[\"nodes\"]);\n                                        graphToElements(defaultGraph).nodes.forEach((v) => console.log(v))\n\n                                        this.lastNodeId = defaultGraph.nodes.length;\n                                        this.setState({\n                                            computerType: computerType,\n                                            elements: graphToElements(defaultGraph)\n                                        }\n                                            , () => this.updateGraph()\n                                        );\n                                    }}\n                                />\n\n                                {this.state.popout}\n\n                                <SavingPopout open={this.state.savePopoutOpen}\n                                    onClose={this.closeSavePopout}\n                                    isLogin={this.state.isLogin}\n                                    onAuthFailed={this.logout}\n                                    graph={elementsToGraph(this.state.elements)}\n                                    computerType={this.state.computerType!} />\n\n                                <div className=\"hint-container\">\n                                    <Paper className=\"hint\" variant=\"outlined\">\n                                        Ctrl+S — сохранить автомат\n                                    </Paper>\n                                    <Paper className=\"hint\" variant=\"outlined\">\n                                        Удерживайте Ctrl чтобы создать ребро\n                                    </Paper>\n                                    <Paper className=\"hint\" variant=\"outlined\">\n                                        Двойное нажатие чтобы создать вершину\n                                    </Paper>\n                                    <Paper className=\"hint\" variant=\"outlined\">\n                                        ПКМ для открытия контекстного меню\n                                    </Paper>\n                                </div>\n                                <NonDetermenisticModal\n                                    isNonDetermenistic={this.state.errIsNonDetermenistic}\n                                    setIsNonDetermenistic={this.setIsNonDetermenistic}\n                                />\n                                <NonMinimizableModal\n                                    isNonMinimizable={this.state.errIsNonMinimizable}\n                                    setIsNonMinimizable={this.setIsNonMinimizable}\n                                />\n                                <Ribbon\n                                    computerType={this.state.computerType}\n                                    wasComputerResetted={this.state.wasComputerResetted}\n                                    mem={this.state.mem}\n                                    ptr={this.state.ptr}\n                                />\n\n                                <AppHeader\n                                    onMenuButtonClicked={this.openWelcomePopout}\n                                    onSaveButtonClicked={this.openSavePopout}\n                                    onLogoutButtonClicked={this.logout}\n                                    isLogin={this.state.isLogin}\n                                />\n\n\n                                <div className=\"field__container\">\n                                    <VisNetwork\n                                        nodes={this.state.elements.nodes}\n                                        edges={this.state.elements.edges}\n                                        data={this.state.elements}\n                                        onDoubleClick={this.createNode}\n                                        onClick1={this.selectEdge}\n                                        onClick2={this.selectNode}\n                                        onClick3={this.deselectNode}\n                                        onClick4={this.deselectEdge}\n                                        network={this.network}\n                                        contextMenu={this.ContextMenu(this.state.computerType)}\n                                    />\n                                </div>\n\n                                <div className=\"app__right-menu\">\n                                    <NodeControl\n                                        node={this.state.selectedNode}\n                                        changeNodeLabel={this.changeNodeLabel}\n                                        changeStateIsAdmit={this.changeStateIsAdmit}\n                                        changeStateIsInitial={this.changeStateIsInitial}\n                                        deleteNode={this.deleteNode}\n                                        reinitComputer={computerAction.init}\n                                    />\n                                    <EdgeControl\n                                        edge={this.state.selectedEdge}\n                                        changeEdgeTransitions={this.changeEdgeTransition}\n                                        deleteEdge={this.deleteEdge}\n                                        computerType={this.state.computerType}\n                                        reinitComputer={computerAction.init}\n                                    />\n                                    <RunControl\n                                        updMem={this.updMem}\n                                        elements={this.state.elements}\n                                        changeStateIsCurrent={this.changeStateIsCurrent}\n                                        network={this.network}\n                                        setInit={(f: () => void) => computerAction.init = f}\n                                        setNfaToDfa={(f: () => void) => computerAction.nfaToDfa = f}\n                                        setMinimizeDfa={(f: () => void) => computerAction.minimizeDfa = f}\n                                        setMooreToMealy={(f: () => void) => computerAction.mooreToMealy = f}\n                                        setMealyToMoore={(f: () => void) => computerAction.mealyToMoore = f}\n                                        updateElements={(elements: Elements) => this.setState({ elements: elements }, () => this.updateGraph())}\n                                        setComputerType={(type: null | ComputerType) => this.setState({ computerType: type })}\n                                        setResettedStatus={(status: boolean) => this.setState({ wasComputerResetted: status })}\n                                        setByEmptyStack={(byEmptyStack: boolean) => this.setState({ byEmptyStack: byEmptyStack })}\n                                        setChangerByStack={(f: () => void) => controlAction.changerByStack = f}\n                                        setRun={(f: () => void) => controlAction.run = f}\n                                        setStep={(f: () => void) => controlAction.step = f}\n                                        setReset={(f: () => void) => controlAction.reset = f}\n                                        setIsNonDetermenistic={this.setIsNonDetermenistic}\n                                        setIsNonMinimizable={this.setIsNonMinimizable}\n                                    />\n                                </div>\n\n                            </div>\n                        </ComputerTypeContext.Provider>\n                    </Route>\n                </Switch>\n            </HashRouter>\n\n        )\n    }\n}\n\nexport default App;","import React, {createRef, useEffect, useRef } from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\n\nReactDOM.render(\n    <React.StrictMode>\n        <App/>\n\n    </React.StrictMode>,\n    document.getElementById('root'),\n);","\"use strict\";\nexports.__esModule = true;\nvar Move;\n(function (Move) {\n    Move[Move[\"L\"] = 0] = \"L\";\n    Move[Move[\"R\"] = 1] = \"R\";\n})(Move = exports.Move || (exports.Move = {}));\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nexports.__esModule = true;\nvar NonDeterministic = /** @class */ (function (_super) {\n    __extends(NonDeterministic, _super);\n    function NonDeterministic() {\n        var _this = _super.call(this) || this;\n        _this.name = 'NonDeterministic';\n        Object.setPrototypeOf(_this, NonDeterministic.prototype);\n        return _this;\n    }\n    return NonDeterministic;\n}(Error));\nexports.NonDeterministic = NonDeterministic;\nvar NonMinimizable = /** @class */ (function (_super) {\n    __extends(NonMinimizable, _super);\n    function NonMinimizable() {\n        var _this = _super.call(this) || this;\n        _this.name = 'NonMinimizable';\n        Object.setPrototypeOf(_this, NonMinimizable.prototype);\n        return _this;\n    }\n    return NonMinimizable;\n}(Error));\nexports.NonMinimizable = NonMinimizable;\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nexports.__esModule = true;\nvar Computer_1 = require(\"./Computer\");\nvar Stack_1 = require(\"./Stack\");\nvar lodash_1 = require(\"lodash\");\nvar Exceptions_1 = require(\"./Exceptions\");\nvar PDA = /** @class */ (function (_super) {\n    __extends(PDA, _super);\n    // isDeterministic0(): boolean {\n    //     let ret = true\n    //     this.matrix.forEach(value => {\n    //         value.forEach(value1 => {\n    //             if (value1.length > 1) {\n    //                 let tmp: statementCell = value1[0]\n    //                 value1.forEach((value2, index) => {\n    //                     if (index !== 0 && tmp.stackDown === undefined && value2.stackDown || index !== 0 && tmp.stackDown === value2.stackDown ) {\n    //                         ret = false\n    //                     }\n    //                 })\n    //             }\n    //         })\n    //     })\n    //     return ret && (!this.haveEpsilon())\n    // }\n    function PDA(graph, startStatements, input, byEmpty) {\n        var _this = _super.call(this, graph, startStatements) || this;\n        // protected matrix: statementCells[][] = []\n        _this.stack = new Stack_1.Stack();\n        _this.setInput = function (input) {\n            _this.input = [];\n            input.forEach(function (value) {\n                _this.input.push({ idLogic: _this.alphabet.get(value), value: value });\n            });\n            _this.restart();\n        };\n        _this.byEmptyStackAdmt = function (isAdmt) {\n            _this.admitByEmptyStack = isAdmt;\n        };\n        _this.pdaStep = function () {\n            var _a;\n            var ret = _this._step(_this.counterSteps, _this.alphabet.get((_a = _this.input[_this.counterSteps]) === null || _a === void 0 ? void 0 : _a.value), _this.historiStep);\n            _this.counterSteps = ret.counter;\n            _this.historiStep = ret.history;\n            console.log(\"STEP stck: \");\n            ret.history.forEach(function (value) { return value.nodes.forEach(function (value1) { return console.log(value1.stack); }); });\n            console.log(\"STEP admit: \");\n            console.log(ret.isAdmit);\n            return ret;\n        };\n        _this.pdaRun = function () {\n            _this.historiRun = [];\n            _this.counterStepsForResult = 0;\n            for (var i = 0; i < _this.input.length - 1; i++) {\n                var tmp = _this._step(_this.counterStepsForResult, _this.alphabet.get(_this.input[_this.counterStepsForResult].value), _this.historiRun);\n                _this.counterStepsForResult = tmp.counter;\n                _this.historiRun = tmp.history;\n            }\n            return _this._step(_this.counterStepsForResult, _this.alphabet.get(_this.input[_this.counterStepsForResult].value), _this.historiRun);\n        };\n        _this.step = _this.pdaStep;\n        _this.run = _this.pdaRun;\n        _this._step = function (counter, tr, histori) {\n            var newPosSet = [];\n            var updCurPos = function () {\n                _this.curPosition = [];\n                newPosSet.forEach(function (value) { return _this.curPosition.push(value); });\n                newPosSet = [];\n            };\n            var epsStep = function () {\n                _this.curPosition.forEach(function (value) {\n                    var _a;\n                    var pPos = _this.epsilonStep(value.stmt.idLogic, (_a = value.stack) === null || _a === void 0 ? void 0 : _a.peek(), value.stack);\n                    pPos === null || pPos === void 0 ? void 0 : pPos.forEach(function (value1) { return newPosSet.push(value1); });\n                });\n            };\n            var letterSter = function () {\n                _this.curPosition.forEach(function (value) {\n                    var pPos = _this.letterStep(tr, value.stmt.idLogic, value.stack.peek(), value.stack);\n                    pPos.forEach(function (value1) { return newPosSet.push(value1); });\n                });\n            };\n            var rmRepeations = function () {\n                var htable = new Map();\n                var positions = [];\n                _this.curPosition.forEach(function (value) {\n                    if (htable.get(JSON.stringify(value)) === undefined) {\n                        positions.push(value);\n                        htable.set(JSON.stringify(value), value);\n                    }\n                });\n                _this.curPosition = [];\n                positions.forEach(function (value) { return _this.curPosition.push(value); });\n            };\n            if (_this.epsId !== undefined) {\n                epsStep();\n                updCurPos();\n            }\n            if (counter < _this.input.length) {\n                letterSter();\n                updCurPos();\n                if (_this.epsId !== undefined) {\n                    epsStep();\n                    updCurPos();\n                }\n            }\n            else {\n                rmRepeations();\n                // console.log(\":::::::::::::::::::\")\n                // this.curPosition.forEach(value => {\n                //     console.log(value.stmt)\n                //     console.log(value.stack)\n                // })\n                // console.log(\":::::::::::::::::::\")\n                return {\n                    nodes: _this.toNodes(_this.curPosition),\n                    counter: counter,\n                    isAdmit: _this.haveAdmitting(_this.curPosition),\n                    history: histori\n                };\n            }\n            rmRepeations();\n            // console.log(\":::::::::::::::::::\")\n            // this.curPosition.forEach(value => {\n            //     console.log(value.stmt)\n            //     console.log(value.stack)\n            // })\n            // console.log(\":::::::::::::::::::\")\n            histori.push({ nodes: _this.toNodes(_this.curPosition), by: _this.input[counter].value });\n            counter++;\n            return {\n                nodes: _this.toNodes(_this.curPosition),\n                counter: counter,\n                isAdmit: _this.haveAdmitting(_this.curPosition),\n                history: histori\n            };\n        };\n        _this.restart = function () {\n            _this.counterSteps = 0;\n            _this.historiStep = [];\n            _this.curPosition = [];\n            _this.startStatements.forEach(function (value) {\n                var stack = new Stack_1.Stack();\n                stack.push(Computer_1.BOTTOM);\n                _this.curPosition.push({\n                    stmt: _this.statements.get(value.id),\n                    stack: stack\n                });\n            });\n        };\n        // move to Nfa\n        _this.nfaToDfa = function () {\n            var nextStepPosition = function (position, by) {\n                return _this.cellMatrix(position.stmt.idLogic, by).map(function (v) { return ({ stmt: v }); });\n            };\n            var _nextStepPositions = function (positions, by) {\n                var acc = [];\n                positions.map(function (v) {\n                    return nextStepPosition(v, by);\n                }).forEach(function (ps) {\n                    return ps.forEach(function (p) { return acc.push(p); });\n                });\n                return acc;\n            };\n            var nextStepPositions = function (positions, by) {\n                var afterEps = function (positions) {\n                    if (_this.epsId === undefined) {\n                        return positions;\n                    }\n                    var acc = [];\n                    var EPStack = new Stack_1.Stack();\n                    EPStack.push(Computer_1.EPS);\n                    positions.forEach(function (position) {\n                        var tmp = _this.epsilonStep(position.stmt.idLogic, Computer_1.EPS, EPStack);\n                        if (tmp !== undefined) {\n                            acc.push(tmp);\n                        }\n                    });\n                    var flatted = [];\n                    acc.forEach(function (ps) { return ps.forEach(function (p) { return flatted.push(p); }); });\n                    return flatted;\n                };\n                return afterEps(_nextStepPositions(afterEps(positions), by));\n            };\n            var pop = function () { return stack.shift(); };\n            var push = function (v) {\n                stack.push(v);\n            };\n            var stack = [];\n            var table = [];\n            var set = new ImSet();\n            var startPos = _this.curPosition;\n            _this.restart();\n            push(startPos);\n            var _loop_1 = function () {\n                var head = pop();\n                var acc = [];\n                if (head === undefined || head.length === 0) {\n                    return \"break\";\n                }\n                if (set.has(head)) {\n                    return \"continue\";\n                }\n                set.add(head.map(function (v) { return ({\n                    stmt: {\n                        id: v.stmt.id,\n                        idLogic: v.stmt.idLogic,\n                        isAdmit: v.stmt.isAdmit\n                    },\n                    stack: undefined\n                }); }));\n                _this.alphabet.forEach(function (value) {\n                    if (value !== _this.epsId) {\n                        var to = nextStepPositions(head, value);\n                        var _to = to.map(function (v) { return ({\n                            stmt: {\n                                id: v.stmt.id,\n                                idLogic: v.stmt.idLogic,\n                                isAdmit: v.stmt.isAdmit\n                            },\n                            stack: undefined\n                        }); });\n                        acc.push(_to);\n                        if (to.length > 0 && !set.has(to) && !set.has(_to)) {\n                            push(_to);\n                        }\n                    }\n                });\n                table.push(acc);\n            };\n            while (stack.length > 0) {\n                var state_1 = _loop_1();\n                if (state_1 === \"break\")\n                    break;\n            }\n            var _edges = [];\n            table.forEach(function (ps, from) {\n                _this.alphabet.forEach(function (tr, letter) {\n                    if (tr !== _this.epsId && ps[tr].length !== 0) {\n                        console.log(ps[tr]);\n                        console.log(from, set.getIter(ps[tr]));\n                        _edges.push({\n                            from: from,\n                            to: set.getIter(ps[tr]),\n                            transitions: new Set([[{ title: letter }]])\n                        });\n                    }\n                });\n            });\n            var nodes = set.getStorage().map(function (v) { return ({\n                id: set.getIter(v),\n                isAdmit: _this.haveAdmitting(v)\n            }); });\n            var edges = [];\n            _edges.sort(function (a, b) { return a.from - b.from || a.to - b.to; });\n            for (var i = 0; i < _edges.length; i++) {\n                var acc = [];\n                var delta = 0;\n                for (var j = i; j < _edges.length; j++) {\n                    if (_edges[i].from === _edges[j].from && _edges[i].to === _edges[j].to) {\n                        acc.push(Array.from(_edges[j].transitions)[0][0]);\n                        delta++;\n                    }\n                }\n                edges.push({\n                    from: _edges[i].from,\n                    to: _edges[i].to,\n                    transitions: new Set([acc])\n                });\n                i += delta - 1;\n            }\n            return { nodes: nodes, edges: edges };\n        };\n        //https://www.usna.edu/Users/cs/wcbrown/courses/F17SI340/lec/l22/lec.html\n        _this.minimizeDfa = function () {\n            _this.restart();\n            var startId = _this.curPosition[0].stmt.idLogic;\n            var cutBy = function (by) {\n                var acc = [];\n                _this.matrix.forEach(function (_, it) { return acc.push(_this.cellMatrix(it, by)[0]); });\n                return acc;\n            };\n            var _lookUp = function (group) { return function (id) {\n                return group[id];\n            }; };\n            var _getJump = function (table) { return function (by) { return function (id) {\n                return table[by][id];\n            }; }; };\n            var createTableT = function (zero) {\n                var lookUp = _lookUp(zero);\n                var table = [];\n                _this.alphabet.forEach(function (tr) {\n                    var acc = [];\n                    var cutted = cutBy(tr);\n                    cutted.forEach(function (cell) {\n                        acc.push(lookUp(cell.idLogic));\n                    });\n                    table.push(acc);\n                });\n                return table;\n            };\n            var _updateGroups = function (zero) { return function (groups) { return function (getJump) { return function (group) {\n                var jmpGrp = getJump(group[0].node.idLogic).number;\n                var newGrp = [];\n                var newNumber = groups.length + 1;\n                var toRm = [];\n                group.forEach(function (value, index) {\n                    if (getJump(value.node.idLogic).number !== jmpGrp) {\n                        value.number = newNumber;\n                        toRm.push(value.node.idLogic);\n                        newGrp.push(value);\n                    }\n                });\n                for (var i = 0; i < group.length; i++) {\n                    if (toRm.includes(group[i].node.idLogic)) {\n                        group.splice(i, 1);\n                        i--;\n                    }\n                }\n                if (newGrp.length > 0) {\n                    groups.push(newGrp);\n                    return { fst: group, snd: newGrp };\n                }\n                return { fst: [], snd: [] };\n            }; }; }; };\n            var stack = [];\n            var pop = function () { return stack.shift(); };\n            var push = function (v) { return stack.push(v); };\n            var zero = [];\n            var first = [];\n            var second = [];\n            _this.statements.forEach(function (statement) {\n                var element = { number: -1, node: { idLogic: -1, id: -1, isAdmit: false } };\n                if (statement.isAdmit) {\n                    element = { number: 1, node: statement };\n                    first.push(element);\n                }\n                else {\n                    element = { number: 2, node: statement };\n                    second.push(element);\n                }\n                zero.push(element);\n            });\n            var byEveryLetter = _this.matrix.reduce(function (acc, line) {\n                return acc && line.reduce(function (accLine, cells) { return accLine && cells.length > 0; }, acc);\n            }, true);\n            if (first.length < 1 || !byEveryLetter) {\n                console.log('CATHTHT');\n                throw new Exceptions_1.NonMinimizable();\n            }\n            // плюс если есть пробелы в таблице!\n            var groups = [];\n            groups.push(first);\n            groups.push(second);\n            var table = createTableT(zero);\n            _this.alphabet.forEach(function (tr) {\n                groups.forEach(function (stmt) { return push(stmt); });\n                var getJump = _getJump(table)(tr);\n                var updateGroups = _updateGroups(zero)(groups)(getJump);\n                while (stack.length > 0) {\n                    var head = pop();\n                    if (head === undefined) {\n                        break;\n                    }\n                    var newGrp = updateGroups(head);\n                    if (newGrp.fst.length > 0) {\n                        push(newGrp.fst);\n                        push(newGrp.snd);\n                    }\n                }\n            });\n            var toPositions = function (group) { return group.map(function (g) { return ({ stmt: g.node }); }); };\n            var grpAfterJmp = function (group, by) { return _getJump(table)(by)(group[0].node.idLogic).number; };\n            var nodes = groups.map(function (group) { return ({ id: group[0].number, isAdmit: _this.haveAdmitting(toPositions(group)) }); });\n            var edges = groups.reduce(function (acc, g) {\n                _this.alphabet.forEach(function (tr, letter) {\n                    acc.push({\n                        from: g[0].number,\n                        to: grpAfterJmp(g, tr),\n                        transitions: new Set([[{ title: letter }]])\n                    });\n                });\n                return acc;\n            }, []);\n            console.log(nodes);\n            var startGrp = groups.filter(function (g) {\n                var gIds = g.map(function (v) { return v.node.idLogic; });\n                return gIds.includes(startId);\n            });\n            var start = nodes[startGrp[0][0].number - 1];\n            return { graphcore: { nodes: nodes, edges: edges }, start: start };\n        };\n        _this.admitByEmptyStack = byEmpty;\n        _this.epsId = _this.alphabet.get(Computer_1.EPS);\n        // this.createMatrix()\n        // this.matrix.forEach(value => {\n        //     value.forEach(value1 => value1.forEach(value2 => {\n        //         console.log(value2.idLogic)\n        //         console.log(value2.stackDown)\n        //         console.log(value2.stackPush)\n        //         console.log(value2.stack)\n        //\n        //     }))\n        // })\n        _this.stack.push(Computer_1.BOTTOM);\n        _this.curPosition = []; //{stack: new Stack<string>(), stmt: startStatements}\n        startStatements.forEach(function (value) {\n            var stack = new Stack_1.Stack();\n            stack.push(Computer_1.BOTTOM);\n            _this.curPosition.push({\n                stmt: _this.statements.get(value.id),\n                stack: stack\n            });\n        });\n        _this.setInput(input);\n        if (_this.epsId) { //\n            _this.curPosition.forEach(function (value) {\n                _this.cycleEps(value.stmt.idLogic, value.stack);\n            });\n            ////// this.cycleEps(this.curPosition[0].stmt.idLogic, this.curPosition[0].stack!)\n        } //\n        console.log('-------------------------');\n        console.log(_this.isDeterministic());\n        console.log(\"ALPHBT\");\n        _this.alphabet.forEach(function (value, key) { return console.log(value, key); });\n        console.log(\"STMTS\");\n        _this.statements.forEach(function (value) { return console.log(value); });\n        console.log(\"MTX\");\n        _this.matrix.forEach(function (value) {\n            console.log();\n            value.forEach(function (value1) { return console.log(value1); });\n        });\n        console.log('-------------------------');\n        return _this;\n    }\n    PDA.prototype.copyPushList = function (value) {\n        var _a;\n        var cpy = [];\n        (_a = value.stackPush) === null || _a === void 0 ? void 0 : _a.forEach(function (value) { return cpy.push(value); });\n        return cpy;\n    };\n    PDA.prototype.pushReverse = function (pushVals, stack) {\n        pushVals.reverse().forEach(function (value) {\n            stack.push(value);\n        });\n    };\n    PDA.prototype.pushTopToNewStack0 = function (newStack, value) {\n        newStack.pop();\n        var pushVals = this.copyPushList(value);\n        this.pushReverse(pushVals, newStack);\n    };\n    PDA.permute0 = function (permutation) {\n        var r = lodash_1.cloneDeep(permutation);\n        function cmp(a, b) {\n            if (a.stackDown && b.stackDown) {\n                if (a.stackDown < b.stackDown) {\n                    return -1;\n                }\n                if (a.stackDown > b.stackDown) {\n                    return 1;\n                }\n                return 0;\n            }\n            return 0;\n        }\n        r = r.sort(cmp);\n        var tmp = [];\n        var _tmp = [];\n        var dwn = r[0].stackDown;\n        for (var i = 0; i < r.length; i++) {\n            if (r[i].stackDown === dwn) {\n                _tmp.push(r[i]);\n            }\n            else {\n                tmp.push(_tmp);\n                dwn = r[i].stackDown;\n                _tmp = [];\n                _tmp.push(r[i]);\n            }\n        }\n        tmp.push(_tmp);\n        var ret = [];\n        var _detour = function (lvl, cur, acc) {\n            if (lvl < tmp.length) {\n                for (var i = 0; i < tmp[lvl].length; i++) {\n                    var a = lodash_1.cloneDeep(acc);\n                    a.push(tmp[lvl][i]);\n                    _detour(lvl + 1, i, a);\n                }\n            }\n            else {\n                ret.push(acc);\n            }\n        };\n        _detour(0, 0, []);\n        return ret;\n    };\n    PDA.permute = function (permutation) {\n        var length = permutation.length;\n        var result = [permutation.slice()];\n        var c = new Array(length).fill(0);\n        var i = 1;\n        var k;\n        var p;\n        while (i < length) {\n            if (c[i] < i) {\n                k = i % 2 && c[i];\n                p = permutation[i];\n                permutation[i] = permutation[k];\n                permutation[k] = p;\n                c[i]++;\n                i = 1;\n                result.push(permutation.slice());\n            }\n            else {\n                c[i] = 0;\n                i++;\n            }\n        }\n        return result;\n    };\n    PDA.prototype.rmRepetitions = function (htable, value, positions, idLogic, newStack) {\n        var wasCreated = function (hash) {\n            return htable.get(hash) !== undefined;\n        };\n        if (!wasCreated(JSON.stringify(value))) {\n            positions.push({ stmt: this.statements.get(idLogic), stack: newStack });\n            htable.set(JSON.stringify({ stmt: this.statements.get(idLogic), stack: newStack }), { stmt: this.statements.get(idLogic), stack: newStack });\n        }\n    };\n    PDA.prototype.cycleEps = function (curLId, stack0) {\n        var _this = this;\n        var htable = new Map();\n        var positions = [];\n        var visited = [];\n        this.cellMatrix(curLId, this.epsId).forEach(function () { return visited.push(false); });\n        var permutes = this.cellMatrix(curLId, this.epsId)[0] !== undefined ? PDA.permute0(this.cellMatrix(curLId, this.epsId)) : [(this.cellMatrix(curLId, this.epsId))];\n        // permutes.push(this.cellMatrix(curLId, this.epsId))\n        // let permutes: statementCell[][] = PDA.permute(this.cellMatrix(curLId, this.epsId))\n        var cycle = function (cell, idx, idLogic, stack) {\n            visited[idx] = true;\n            cell.forEach(function (value, index) {\n                if (value.idLogic === idLogic) {\n                    if (value.stackDown === stack.peek()) {\n                        var newCycleStack = stack.cpyTo(new Stack_1.Stack());\n                        _this.matchPushEpsVal(value, newCycleStack); //\n                        _this.rmRepetitions(htable, { stmt: _this.statements.get(idLogic), stack: newCycleStack }, positions, idLogic, newCycleStack);\n                        if (!visited[index]) {\n                            cycle(cell, index, idLogic, newCycleStack);\n                        }\n                    }\n                    else if (value.stackDown === Computer_1.EPS) {\n                        var newCycleStack = stack.cpyTo(new Stack_1.Stack());\n                        _this.matchDownEpsVal(value, newCycleStack);\n                        _this.rmRepetitions(htable, { stmt: _this.statements.get(idLogic), stack: newCycleStack }, positions, idLogic, newCycleStack);\n                        if (!visited[index]) {\n                            cycle(cell, index, idLogic, newCycleStack);\n                        }\n                    }\n                }\n            });\n        };\n        permutes.forEach(function (value) {\n            for (var i = 0; i < visited.length; i++) {\n                visited[i] = false;\n            }\n            cycle(value, 0, curLId, stack0);\n        });\n        return positions;\n    };\n    PDA.prototype.epsilonStep = function (curLId, stackDown, stack) {\n        var _this = this;\n        if (this.epsId === undefined) {\n            return;\n        }\n        var visited = [];\n        for (var i = 0; i < this.statements.size; i++) {\n            visited.push(false);\n        }\n        var dfs = function (id, stack, stDwn, elements) {\n            _this.cycleEps(id, stack).forEach(function (value) {\n                elements.push({\n                    idLogic: id,\n                    top: value.stack\n                });\n            });\n            elements.push({\n                idLogic: id,\n                top: stack\n            });\n            visited[id] = true;\n            for (var i = 0; i < _this.matrix[id][_this.epsId].length; i++) {\n                if (!visited[_this.cellMatrix(id, _this.epsId)[i].idLogic]) {\n                    switch (_this.cellMatrix(id, _this.epsId)[i].stackDown) {\n                        case stDwn: {\n                            var newStack = stack.cpyTo(new Stack_1.Stack());\n                            _this.matchPushEpsVal(_this.cellMatrix(id, _this.epsId)[i], newStack);\n                            dfs(_this.cellMatrix(id, _this.epsId)[i].idLogic, newStack, newStack.peek(), elements);\n                            break;\n                        }\n                        case Computer_1.EPS: {\n                            var newStack = stack.cpyTo(new Stack_1.Stack());\n                            _this.matchDownEpsVal(_this.cellMatrix(id, _this.epsId)[i], newStack);\n                            dfs(_this.cellMatrix(id, _this.epsId)[i].idLogic, newStack, newStack.peek(), elements);\n                            break;\n                        }\n                    }\n                }\n            }\n            return elements;\n        };\n        var endsOfEpsWay = dfs(curLId, stack, stackDown, []);\n        var positions = [];\n        for (var i = 0; i < endsOfEpsWay.length; i++) {\n            var stmt = this.statements.get(this.nodes[endsOfEpsWay[i].idLogic].id);\n            positions.push({ stmt: stmt, stack: endsOfEpsWay[i].top });\n        }\n        return positions;\n    };\n    PDA.prototype.matchPushEpsVal = function (value, newStack) {\n        if (value.stackPush[0] === Computer_1.EPS) {\n            if (value.stackPush.length !== 1) {\n                throw Error(\"pushing list should be consist by [EPS] for 'pop'\");\n            }\n            else {\n                newStack.pop();\n            }\n        }\n        else {\n            this.pushTopToNewStack0(newStack, value);\n        }\n    };\n    PDA.prototype.matchDownEpsVal = function (value, newStack) {\n        if (value.stackPush[0] === Computer_1.EPS && value.stackPush.length !== 1) {\n            throw Error(\"pushing list should be consist by [EPS] for 'pop'\");\n        }\n        else if (value.stackPush[0] !== Computer_1.EPS) { //??\n            var pushVals = this.copyPushList(value);\n            this.pushReverse(pushVals, newStack);\n        }\n    };\n    PDA.prototype.letterStep = function (transformedInput, curLId, stackDown, stack) {\n        var _this = this;\n        var positions = [];\n        this.cellMatrix(curLId, transformedInput).forEach(function (value) {\n            switch (value.stackDown) {\n                case stackDown: {\n                    var newStack = stack.cpyTo(new Stack_1.Stack());\n                    _this.matchPushEpsVal(value, newStack);\n                    positions.push({ stmt: _this.statements.get(value.id), stack: newStack });\n                    break;\n                }\n                case Computer_1.EPS: {\n                    var newStack = stack.cpyTo(new Stack_1.Stack());\n                    _this.matchDownEpsVal(value, newStack);\n                    positions.push({ stmt: _this.statements.get(value.id), stack: newStack });\n                    break;\n                }\n            }\n        });\n        return positions;\n    };\n    PDA.prototype.haveEpsilon = function () {\n        return this.epsId !== undefined;\n    };\n    PDA.prototype.isDeterministic = function () {\n        var ret = true;\n        this.matrix.forEach(function (line) { return line.forEach(function (cells) {\n            var fstCell = cells[0];\n            var hasDublicates = cells.reduce(function (acc, stmt) { return acc || (stmt.stackDown === fstCell.stackDown); }, false);\n            if (cells.length > 1 && hasDublicates) {\n                ret = false;\n            }\n        }); });\n        return ret && (!this.haveEpsilon());\n    };\n    PDA.prototype.haveAdmitting = function (positions) {\n        var ret = false;\n        if (this.admitByEmptyStack === false || this.admitByEmptyStack === undefined) {\n            positions.forEach(function (value) {\n                if (value.stmt.isAdmit) {\n                    ret = true;\n                }\n            });\n            return ret;\n        }\n        else {\n            positions.forEach(function (value) {\n                if (value.stack.size() === 0) {\n                    ret = true;\n                }\n            });\n            // console.log(\"ADMT\")\n            // console.log(ret)\n            return ret;\n        }\n    };\n    PDA.prototype.toNodes = function (positions) {\n        var _this = this;\n        var retNodes = [];\n        positions.forEach(function (value) {\n            var temp = __assign(__assign({}, _this.nodes[value.stmt.idLogic]), { stack: value.stack.getStorage() });\n            retNodes.push(temp);\n        });\n        return retNodes;\n    };\n    return PDA;\n}(Computer_1.Computer));\nexports.PDA = PDA;\nvar Queue = /** @class */ (function () {\n    function Queue(capacity) {\n        if (capacity === void 0) { capacity = Infinity; }\n        this.capacity = capacity;\n        this.storage = [];\n    }\n    Queue.prototype.enqueue = function (item) {\n        if (this.size() === this.capacity) {\n            throw Error(\"Queue has reached max capacity, you cannot add more items\");\n        }\n        this.storage.push(item);\n    };\n    Queue.prototype.dequeue = function () {\n        return this.storage.shift();\n    };\n    Queue.prototype.size = function () {\n        return this.storage.length;\n    };\n    Queue.prototype.getStorage = function () {\n        return this.storage;\n    };\n    return Queue;\n}());\nvar ImSet = /** @class */ (function () {\n    function ImSet() {\n        this.table = new Map();\n        this.set = [];\n    }\n    ImSet.prototype.normalize = function (v) {\n        var _v = lodash_1.cloneDeep(v);\n        _v = _v.sort();\n        return _v;\n    };\n    ImSet.prototype.getItter = function (value) {\n        if (!this.has(value)) {\n            throw Error;\n        }\n        var it = 0;\n        var _v = this.normalize(value);\n        this.set.forEach(function (value1, index) {\n            if (JSON.stringify(_v) === JSON.stringify(value1)) {\n                it = index;\n            }\n        });\n        return it;\n    };\n    ImSet.prototype.has = function (value) {\n        var _v = this.normalize(value);\n        var k = JSON.stringify(_v);\n        return this.table.has(k);\n    };\n    ImSet.prototype.myForEach = function (callback) {\n        this.set.forEach(function (value1, index) {\n            callback(value1, index);\n        });\n    };\n    ImSet.prototype.add = function (value) {\n        var _v = this.normalize(value);\n        var k = JSON.stringify(_v);\n        if (!this.table.has(k)) {\n            this.table.set(k, _v);\n            this.set.push(_v);\n        }\n    };\n    ImSet.prototype.size = function () {\n        return this.set.length;\n    };\n    ImSet.prototype.getNth = function (i) {\n        return this.set[i];\n    };\n    ImSet.prototype.getIter = function (value) {\n        var _v = this.normalize(value);\n        var k = JSON.stringify(_v);\n        var iter = 0;\n        this.set.forEach(function (v, index) {\n            if (JSON.stringify(v) === k) {\n                iter = index;\n            }\n        });\n        return iter;\n    };\n    ImSet.prototype.getStorage = function () {\n        return this.set;\n    };\n    return ImSet;\n}());\nexports.ImSet = ImSet;\nvar nfa = new PDA({\n    nodes: [\n        { id: 0, isAdmit: false },\n        { id: 1, isAdmit: false }\n    ],\n    edges: [\n        { from: 0, to: 1, transitions: new Set([[{ title: '0', stackDown: 'Z0', stackPush: [Computer_1.EPS] }]]) },\n        { from: 0, to: 0, transitions: new Set([[{ title: '0', stackDown: 'Z0', stackPush: [Computer_1.EPS] }]]) },\n    ]\n}, [{ id: 0, isAdmit: false }], [\"0\"]);\nconsole.log(nfa.isDeterministic());\n// nfa.step()\n// let nfa = new PDA(\n//     {\n//         nodes: [\n//             {id: 0, isAdmit: false},\n//             {id: 1, isAdmit: false},\n//             {id: 2, isAdmit: false},\n//             {id: 3, isAdmit: false},\n//             {id: 4, isAdmit: true},\n//             {id: 5, isAdmit: true},\n//             {id: 6, isAdmit: false},\n//\n//         ],\n//         edges: [\n//\n//             {from: 0, to: 1, transitions: new Set([    [{title:      '0' }]])},\n//             {from: 0, to: 2, transitions: new Set([    [{title:      '1' }]])},\n//\n//             {from: 1, to: 3, transitions: new Set([    [{title:      '0' }]])},\n//             {from: 1, to: 4, transitions: new Set([    [{title:      '1' }]])},\n//\n//             {from: 2, to: 3, transitions: new Set([    [{title:      '0' }]])},\n//             {from: 2, to: 5, transitions: new Set([    [{title:      '1' }]])},\n//\n//             {from: 3, to: 3, transitions: new Set([    [{title:      '0' }, {title:      '1' }]])},\n//             // {from: 3, to: 3, transitions: new Set([    [{title:      '1' }]])},\n//\n//             {from: 4, to: 4, transitions: new Set([    [{title:      '0' }]])},\n//             {from: 4, to: 6, transitions: new Set([    [{title:      '1' }]])},\n//\n//             {from: 5, to: 5, transitions: new Set([    [{title:      '0' }]])},\n//             {from: 5, to: 6, transitions: new Set([    [{title:      '1' }]])},\n//\n//             {from: 6, to: 6, transitions: new Set([    [{title:      '0' }, {title:      '1' }]])},\n//             // {from: 6, to: 6, transitions: new Set([    [{title:      '1' }]])},\n//\n//\n//         ]\n//     }, [{id: 0, isAdmit: false}], [\"0\", \"1\", \"0\"], )\n//\n// nfa.nfaToDfa()\n// console.log(nfa.run())\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nexports.__esModule = true;\nvar PDA_1 = require(\"./PDA\");\nvar EpsilonNFA = /** @class */ (function (_super) {\n    __extends(EpsilonNFA, _super);\n    function EpsilonNFA(graph, startStatement, input) {\n        var _this = _super.call(this, graph, startStatement, input) || this;\n        _this.enfaStep = function () {\n            var _a;\n            var ret = _this._step(_this.counterSteps, _this.alphabet.get((_a = _this.input[_this.counterSteps]) === null || _a === void 0 ? void 0 : _a.value), _this.historiStep);\n            _this.counterSteps = ret.counter;\n            _this.historiStep = ret.history;\n            ret.nodes.forEach(function (value) { return value.stack = undefined; });\n            ret.history.forEach(function (value) { return value.nodes.forEach(function (value1) { return value1.stack = undefined; }); });\n            return ret;\n        };\n        _this.enfaRun = function () {\n            _this.historiRun = [];\n            _this.counterStepsForResult = 0;\n            for (var i = 0; i < _this.input.length - 1; i++) {\n                var tmp = _this._step(_this.counterStepsForResult, _this.alphabet.get(_this.input[_this.counterStepsForResult].value), _this.historiRun);\n                _this.counterStepsForResult = tmp.counter;\n                _this.historiRun = tmp.history;\n            }\n            var ret = _this._step(_this.counterStepsForResult, _this.alphabet.get(_this.input[_this.counterStepsForResult].value), _this.historiRun);\n            ret.nodes.forEach(function (value) { return value.stack = undefined; });\n            ret.history.forEach(function (value) { return value.nodes.forEach(function (value1) { return value1.stack = undefined; }); });\n            return ret;\n        };\n        _this.step = _this.enfaStep;\n        _this.run = _this.enfaRun;\n        return _this;\n    }\n    return EpsilonNFA;\n}(PDA_1.PDA));\nexports.EpsilonNFA = EpsilonNFA;\n// let nfa = new EpsilonNFA (\n//     {\n//         nodes: [\n//             {id: 0, isAdmit: false},\n//             {id: 1, isAdmit: false},\n//             {id: 2, isAdmit: false},\n//             {id: 3, isAdmit: false},\n//             {id: 4, isAdmit: false},\n//             // {id: 2, isAdmit: false},\n//\n//         ],\n//         edges: [\n//             // {from: 0, to: 0, transitions: new Set([ [{title: 'a'}, {title: 'b'}] ])},\n//             {from: 0, to: 1, transitions: new Set([ [{title: EPS}] ])},\n//             {from: 1, to: 2, transitions: new Set([ [{title: \"a\"}] ])},\n//             {from: 2, to: 3, transitions: new Set([ [{title: \"a\"}] ])},\n//             {from: 3, to: 4, transitions: new Set([ [{title: \"a\"}] ])},\n//             // {from: 1, to: 2, transitions: new Set([ [{title: EPS}] ])},\n//         ]\n//     }, [{id: 0, isAdmit: false}, {id: 3, isAdmit: false}], ['a', 'a'],\n// )\n// console.log(nfa.step())\n// console.log(nfa.step())\n// nfa.nfaToDfa()\n//\n// let nfa = new EpsilonNFA(\n//     {\n//         nodes: [\n//             {id: 1, isAdmit: false},\n//             {id: 2, isAdmit: false},\n//             {id: 3, isAdmit: false},\n//             {id: 4, isAdmit: false},\n//             {id: 5, isAdmit: false},\n//             {id: 6, isAdmit: false},\n//             {id: 7, isAdmit: false},\n//             {id: 8, isAdmit: false},\n//             {id: 9, isAdmit: false},\n//             {id: 10, isAdmit: false},\n//             {id: 11, isAdmit: false},\n//             {id: 12, isAdmit: false},\n//\n//         ],\n//         edges: [\n//             {from: 1, to: 2, transitions: new Set([     {title:      EPS}])},\n//             {from: 1, to: 8, transitions: new Set([     {title:      EPS }])},\n//             {from: 2, to: 3, transitions: new Set([     {title:      EPS }])},\n//             {from: 2, to: 9, transitions: new Set([     {title:      EPS }])},\n//             {from: 3, to: 4, transitions: new Set([     {title:      EPS }])},\n//             {from: 3, to: 6, transitions: new Set([     {title:      EPS }])},\n//             {from: 4, to: 5, transitions: new Set([     {title:      'a' }])},\n//             {from: 5, to: 4, transitions: new Set([     {title:      EPS }])},\n//             {from: 5, to: 6, transitions: new Set([     {title:      EPS }])},\n//             {from: 6, to: 7, transitions: new Set([     {title:      EPS }])},\n//             {from: 7, to: 2, transitions: new Set([     {title:      EPS }])},\n//             {from: 7, to: 8, transitions: new Set([     {title:      EPS }])},\n//             {from: 9, to: 10, transitions: new Set([    {title:      EPS }])},\n//             {from: 9, to: 12, transitions: new Set([    {title:      EPS }])},\n//             {from: 10, to: 11, transitions: new Set([   {title:      'b' }])},\n//             {from: 11, to: 10, transitions: new Set([   {title:      EPS }])},\n//             {from: 11, to: 12, transitions: new Set([   {title:      EPS }])},\n//             {from: 12, to: 7, transitions: new Set([    {title:      EPS }])},\n//\n//\n//\n//\n//\n//\n//             //\n//             // {from: 1, to: 3, transitions: new Set([{title: EPS}])},\n//             // {from: 2, to: 4, transitions: new Set([{title: '0'}])},\n//             // {from: 4, to: 5, transitions: new Set([{title: '1'}])},\n//             // {from: 5, to: 6, transitions: new Set([{title: '1'}])},\n//             // {from: 3, to: 7, transitions: new Set([{title: '1'}])},\n//             // {from: 7, to: 8, transitions: new Set([{title: '0'}])},\n//             // {from: 8, to: 9, transitions: new Set([{title: '1'}])},\n//             // {from: 9, to: 9, transitions: new Set([{title: '0'}])},\n//             // {from: 9, to: 9, transitions: new Set([{title: '1'}])},\n//             //\n//             // {from: 6, to: 6, transitions: new Set([{title: '0'}])},\n//             // {from: 6, to: 6, transitions: new Set([{title: '1'}])},\n//         ]\n//     }, [{id: 1, isAdmit: false}], ['a', 'b'])\n// console.log(nfa.step())\n// console.log(nfa.step())\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nexports.__esModule = true;\nvar OutputAutomata_1 = require(\"./OutputAutomata\");\nvar Mealy = /** @class */ (function (_super) {\n    __extends(Mealy, _super);\n    function Mealy(graph, startStatements, input) {\n        var _this = _super.call(this, graph, startStatements, input) || this;\n        _this.mealyToMoore = function () {\n            var outs = new Map();\n            _this.edges.forEach(function (edge) {\n                edge.transitions.forEach(function (_) { return _.forEach(function (transition) {\n                    var out = transition.output;\n                    if (!outs.has(out)) {\n                        outs.set(out, outs.size);\n                    }\n                }); });\n            });\n            var nodesOuts = function () {\n                var counter = 0;\n                return _this.nodes.reduce(function (acc, node) {\n                    var edges = _this.edges.filter(function (edge) { return edge.to === node.id; });\n                    var tmp = [];\n                    outs.forEach(function () { return tmp.push(undefined); });\n                    edges.forEach(function (edge) {\n                        edge.transitions.forEach(function (_) { return _.forEach(function (transition) {\n                            var out = transition.output;\n                            var outIndex = outs.get(out);\n                            if (!tmp[outIndex]) {\n                                tmp[outIndex] = {\n                                    id: counter,\n                                    isAdmit: node.isAdmit,\n                                    output: out\n                                };\n                                counter++;\n                            }\n                        }); });\n                    });\n                    if (tmp.filter(function (v) { return v !== undefined; }).length === 0) {\n                        tmp[0] = {\n                            id: counter,\n                            isAdmit: node.isAdmit,\n                            output: \"~\"\n                        };\n                        counter++;\n                    }\n                    acc.push(tmp);\n                    return acc;\n                }, []);\n            };\n            var _nodesOuts = nodesOuts();\n            var _edges = _nodesOuts.reduce(function (acc, vs, index) {\n                var edges = _this.edges.filter(function (edge) { return edge.from === _this.nodes[index].id; });\n                edges.forEach(function (edge) { return edge.transitions.forEach(function (_) { return _.forEach(function (transition) {\n                    vs.forEach(function (v) {\n                        console.log(v);\n                        if (v !== undefined) {\n                            acc.push({\n                                from: v.id,\n                                to: _nodesOuts[edge.to][outs.get(transition.output)].id,\n                                transitions: new Set([[{ title: transition.title }]])\n                            });\n                        }\n                    });\n                }); }); });\n                return acc;\n            }, []);\n            var edges = [];\n            _edges.sort(function (a, b) { return a.from - b.from || a.to - b.to; });\n            for (var i = 0; i < _edges.length; i++) {\n                var acc = [];\n                var delta = 0;\n                for (var j = i; j < _edges.length; j++) {\n                    if (_edges[i].from === _edges[j].from && _edges[i].to === _edges[j].to) {\n                        acc.push(Array.from(_edges[j].transitions)[0][0]);\n                        delta++;\n                    }\n                }\n                edges.push({\n                    from: _edges[i].from,\n                    to: _edges[i].to,\n                    transitions: new Set([acc])\n                });\n                i += delta - 1;\n            }\n            var starts = _this.startStatements.map(function (stmt) { return stmt.id; });\n            var nodes = _nodesOuts.reduce(function (acc, vs, index) {\n                vs.forEach(function (v) {\n                    if (v) {\n                        acc.push(v);\n                    }\n                });\n                return acc;\n            }, []);\n            var start = starts.reduce(function (acc, id) {\n                var curNodeOuts = _nodesOuts[id].filter(function (v) {\n                    if (v !== undefined) {\n                        return v;\n                    }\n                });\n                acc.push(curNodeOuts[0]);\n                return acc;\n            }, []);\n            return {\n                graphcore: { edges: edges, nodes: nodes },\n                start: start\n            };\n        };\n        _this.step = _this.oaStep;\n        _this.run = _this.oaRun;\n        return _this;\n    }\n    return Mealy;\n}(OutputAutomata_1.OutputAutomata));\nexports.Mealy = Mealy;\n// let nfa = new Mealy(\n//     {\n//         nodes: [\n//             { id: 0, isAdmit: false },\n//             { id: 1, isAdmit: false },\n//         ],\n//         edges: [\n//             { from: 0, to: 0, transitions: new Set([[{ title: '5', output: 'n' }]]) },\n//             { from: 0, to: 1, transitions: new Set([[{ title: '5', output: 'n' }]]) },\n//         ]\n//     }, [{ id: 0, isAdmit: false }], [])\n// console.log(nfa.isDeterministic())\n// let nfa = new Mealy(\n//     {\n//         nodes: [\n//             { id: 1, isAdmit: false },\n//             { id: 2, isAdmit: false },\n//             { id: 3, isAdmit: false },\n//             { id: 4, isAdmit: false },\n//         ],\n//         edges: [\n//             { from: 1, to: 1, transitions: new Set([[{ title: 'a', output: '1' }]]) },\n//             { from: 1, to: 2, transitions: new Set([[{ title: 'b', output: '0' }]]) },\n//             { from: 2, to: 4, transitions: new Set([[{ title: 'a', output: '1' }, { title: 'b', output: '1' }]]) },\n//             // { from: 2, to: 2, transitions: new Set([[{ title: 'b', output: '0' }]]) },\n//             { from: 3, to: 3, transitions: new Set([[{ title: 'b', output: '1' }]]) },\n//             { from: 3, to: 2, transitions: new Set([[{ title: 'a', output: '1' }]]) },\n//             { from: 4, to: 1, transitions: new Set([[{ title: 'b', output: '1' }]]) },\n//             { from: 4, to:3, transitions: new Set([[{ title: 'a', output: '0' }]]) },\n//         ]\n//     }, [{ id: 1, isAdmit: false }], [])\n// console.log(nfa.mealyToMoore().graphcore.edges)\n// let nfa = new Mealy(\n//     {\n//         nodes: [\n//             { id: 0, isAdmit: false },\n//             { id: 1, isAdmit: false },\n//             { id: 2, isAdmit: false },\n//             { id: 3, isAdmit: false },\n//         ],\n//         edges: [\n//             { from: 0, to: 1, transitions: new Set([[{ title: '5', output: 'n' }]]) },\n//             { from: 0, to: 3, transitions: new Set([[{ title: '10', output: 'n' }]]) },\n//             { from: 1, to: 2, transitions: new Set([[{ title: '10', output: 'n' }]]) },\n//             { from: 1, to: 3, transitions: new Set([[{ title: '5', output: 'n' }]]) },\n//             { from: 2, to: 0, transitions: new Set([[{ title: '5', output: '0' }, { title: '10', output: '5' }]]) },\n//             { from: 3, to: 2, transitions: new Set([[{ title: '5', output: 'n' }]]) },\n//             { from: 3, to: 0, transitions: new Set([[{ title: '10', output: '0' }]]) },\n//         ]\n//     }, [{ id: 0, isAdmit: false }], [])\n// console.log(nfa.run())\n// console.log(nfa.step())\n// console.log(nfa.step())\n// nfa.mealyToMoore()\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nexports.__esModule = true;\nvar OutputAutomata_1 = require(\"./OutputAutomata\");\nvar Moore = /** @class */ (function (_super) {\n    __extends(Moore, _super);\n    function Moore(graph, startStatements, input) {\n        var _this = _super.call(this, graph, startStatements, input) || this;\n        _this.restart = function () {\n            _this.counterSteps = 0;\n            _this.historiStep = [];\n            _this.curPosition = [];\n            _this.startStatements.forEach(function (value) {\n                _this.curPosition.push({\n                    stmt: _this.statements.get(value.id)\n                });\n            });\n        };\n        _this.mooreToMealy = function () {\n            var mapNodes = new Map();\n            _this.nodes.forEach(function (node) { return mapNodes.set(node.id, { id: node.id, isAdmit: node.isAdmit, output: node.output }); });\n            var mealyEdges = _this.edges.map(function (edge) {\n                var tmpTransitions = new Set();\n                var tmpTransiton = [];\n                edge.transitions.forEach(function (v) { return v.forEach(function (transition) {\n                    var _a;\n                    tmpTransiton.push({ title: transition.title, output: (_a = mapNodes.get(edge.to)) === null || _a === void 0 ? void 0 : _a.output });\n                }); });\n                tmpTransitions.add(tmpTransiton);\n                return { from: edge.from, to: edge.to, transitions: tmpTransitions };\n            });\n            console.log('>>>>', _this.startStatements);\n            return {\n                graphcore: { edges: mealyEdges, nodes: _this.nodes.map(function (node) { return ({ id: node.id, isAdmit: node.isAdmit }); }) },\n                start: _this.startStatements.map(function (statement) { return ({ id: statement.id, isAdmit: statement.isAdmit }); })\n            };\n        };\n        _this.step = _this.oaStep;\n        // (): Step => {\n        //     if (!super.isDeterministic()) {\n        //         throw new NonDeterministic()\n        //     }\n        //     return this.oaRun()\n        // }\n        _this.run = _this.oaRun;\n        return _this;\n    }\n    return Moore;\n}(OutputAutomata_1.OutputAutomata));\nexports.Moore = Moore;\n// let nfa = new Moore(\n//     {\n//         nodes: [\n//             { id: 0, isAdmit: false, output: 'b' },\n//             { id: 1, isAdmit: false, output: 'b' },\n//             // { id: 2, isAdmit: false, output: 'a' },\n//             // { id: 3, isAdmit: false, output: '3' },\n//         ],\n//         edges: [\n//             // { from: 0, to: 0, transitions: new Set([[{ title: '1' }]]) },\n//             { from: 0, to: 1, transitions: new Set([[{ title: '0' }]]) },\n//             { from: 0, to: 0, transitions: new Set([[{ title: '0' }]]) },\n//             // { from: 1, to: 1, transitions: new Set([[{ title: '0' }]]) },\n//             // { from: 1, to: 2, transitions: new Set([[{ title: '1' }]]) },\n//             // { from: 2, to: 1, transitions: new Set([[{ title: '0' }]]) },\n//             // { from: 2, to: 0, transitions: new Set([[{ title: '1' }]]) },\n//         ]\n//     }, [{ id: 0, isAdmit: false }], [\"0\"])\n// // console.log(nfa.run())\n// // console.log(nfa.mooreToMealy().start)\n// // edges.forEach(v => console.log(v.from, v.to, v.transitions))\n// console.log(nfa.run())\n// // const conv = nfa.moorToMealy()\n// // conv.graphcore.edges.forEach(edge => {\n// //     console.log(edge.from)\n// //     console.log(edge.to)\n// //     console.log(edge.transitions)\n// // })\n// // conv.graphcore.nodes.forEach(node => {\n// //     console.log(node)\n// // })\n"],"sourceRoot":""}